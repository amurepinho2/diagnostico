{"version":3,"names":["_lodash","require","getNormalizedBlockType","state","nameOrType","getBlockType","getBlockTypes","reduce","sortBy","keys","blockName","order","acc","key","exports","name","getBlockSupport","feature","blockType","get","hasBlockSupport"],"sources":["@quillforms/blocks/src/store/selectors.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { get, sortBy, keys, reduce } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport type {\r\n\tBlockTypeSettings,\r\n\tBlocksState,\r\n\tBlockSupportedFeatures,\r\n\tBlockTypeInterface,\r\n} from '../types';\r\n/**\r\n * Given a block name or block type object, returns the corresponding\r\n * normalized block type object.\r\n *\r\n * @param {Object}          state      Blocks state.\r\n * @param {(string|Object)} nameOrType Block name or type object\r\n *\r\n * @return {Object} Block type object.\r\n */\r\nconst getNormalizedBlockType = (\r\n\tstate: BlocksState,\r\n\tnameOrType: string | BlockTypeInterface\r\n) =>\r\n\t'string' === typeof nameOrType\r\n\t\t? getBlockType( state, nameOrType )\r\n\t\t: nameOrType;\r\n\r\n/**\r\n * Get all blocks registered.\r\n *\r\n * @param {Object} state Global application state.\r\n *\r\n * @return {Array} Registered blocks\r\n */\r\nexport const getBlockTypes = ( state: BlocksState ): BlocksState => {\r\n\treturn reduce(\r\n\t\tsortBy( keys( state ), ( blockName ) => state[ blockName ].order ),\r\n\t\t( acc, key ) => {\r\n\t\t\tif ( key !== 'unknown' ) {\r\n\t\t\t\tacc[ key ] = state[ key ];\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t},\r\n\t\t{}\r\n\t);\r\n};\r\n\r\n/**\r\n * Returns a block type by name.\r\n *\r\n * @param {Object} state Data state.\r\n * @param {string} name  Block type name.\r\n *\r\n * @return {Object?} Block Type.\r\n */\r\nexport function getBlockType(\r\n\tstate: BlocksState,\r\n\tname: string\r\n): BlockTypeSettings | undefined {\r\n\treturn state[ name ];\r\n}\r\n\r\n/**\r\n * Returns the block support value for a feature, if defined.\r\n *\r\n * @param {Object}          state           Data state.\r\n * @param {(string|Object)} nameOrType      Block name or type object\r\n * @param {string}          feature         Feature to retrieve\r\n * @param {*}               defaultSupports Default value to return if not\r\n *                                          explicitly defined\r\n *\r\n * @return {?*} Block support value\r\n */\r\nexport const getBlockSupport = (\r\n\tstate: BlocksState,\r\n\tnameOrType: string | BlockTypeInterface,\r\n\tfeature: keyof BlockSupportedFeatures\r\n): string | boolean | undefined => {\r\n\tconst blockType = getNormalizedBlockType( state, nameOrType );\r\n\treturn get( blockType, [ 'supports', feature ] );\r\n};\r\n\r\n/**\r\n * Returns true if the block defines support for a feature, or false otherwise.\r\n *\r\n * @param {Object}          state           Data state.\r\n * @param {(string|Object)} nameOrType      Block name or type object.\r\n * @param {string}          feature         Feature to test.\r\n * @param {boolean}         defaultSupports Whether feature is supported by\r\n *                                          default if not explicitly defined.\r\n *\r\n * @return {boolean} Whether block supports feature.\r\n */\r\nexport function hasBlockSupport(\r\n\tstate: BlocksState,\r\n\tnameOrType: string,\r\n\tfeature: keyof BlockSupportedFeatures\r\n): boolean {\r\n\treturn !! getBlockSupport( state, nameOrType, feature );\r\n}\r\n"],"mappings":";;;;;;;;;AAGA,IAAAA,OAAA,GAAAC,OAAA;AAHA;AACA;AACA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,sBAAsB,GAAGA,CAC9BC,KAAkB,EAClBC,UAAuC,KAEvC,QAAQ,KAAK,OAAOA,UAAU,GAC3BC,YAAY,CAAEF,KAAK,EAAEC,UAAW,CAAC,GACjCA,UAAU;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAME,aAAa,GAAKH,KAAkB,IAAmB;EACnE,OAAO,IAAAI,cAAM,EACZ,IAAAC,cAAM,EAAE,IAAAC,YAAI,EAAEN,KAAM,CAAC,EAAIO,SAAS,IAAMP,KAAK,CAAEO,SAAS,CAAE,CAACC,KAAM,CAAC,EAClE,CAAEC,GAAG,EAAEC,GAAG,KAAM;IACf,IAAKA,GAAG,KAAK,SAAS,EAAG;MACxBD,GAAG,CAAEC,GAAG,CAAE,GAAGV,KAAK,CAAEU,GAAG,CAAE;IAC1B;IACA,OAAOD,GAAG;EACX,CAAC,EACD,CAAC,CACF,CAAC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPAE,OAAA,CAAAR,aAAA,GAAAA,aAAA;AAQO,SAASD,YAAYA,CAC3BF,KAAkB,EAClBY,IAAY,EACoB;EAChC,OAAOZ,KAAK,CAAEY,IAAI,CAAE;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,eAAe,GAAGA,CAC9Bb,KAAkB,EAClBC,UAAuC,EACvCa,OAAqC,KACH;EAClC,MAAMC,SAAS,GAAGhB,sBAAsB,CAAEC,KAAK,EAAEC,UAAW,CAAC;EAC7D,OAAO,IAAAe,WAAG,EAAED,SAAS,EAAE,CAAE,UAAU,EAAED,OAAO,CAAG,CAAC;AACjD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVAH,OAAA,CAAAE,eAAA,GAAAA,eAAA;AAWO,SAASI,eAAeA,CAC9BjB,KAAkB,EAClBC,UAAkB,EAClBa,OAAqC,EAC3B;EACV,OAAO,CAAC,CAAED,eAAe,CAAEb,KAAK,EAAEC,UAAU,EAAEa,OAAQ,CAAC;AACxD","ignoreList":[]}