{"version":3,"names":["get","sortBy","keys","reduce","getNormalizedBlockType","state","nameOrType","getBlockType","getBlockTypes","blockName","order","acc","key","name","getBlockSupport","feature","blockType","hasBlockSupport"],"sources":["@quillforms/blocks/src/store/selectors.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { get, sortBy, keys, reduce } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport type {\r\n\tBlockTypeSettings,\r\n\tBlocksState,\r\n\tBlockSupportedFeatures,\r\n\tBlockTypeInterface,\r\n} from '../types';\r\n/**\r\n * Given a block name or block type object, returns the corresponding\r\n * normalized block type object.\r\n *\r\n * @param {Object}          state      Blocks state.\r\n * @param {(string|Object)} nameOrType Block name or type object\r\n *\r\n * @return {Object} Block type object.\r\n */\r\nconst getNormalizedBlockType = (\r\n\tstate: BlocksState,\r\n\tnameOrType: string | BlockTypeInterface\r\n) =>\r\n\t'string' === typeof nameOrType\r\n\t\t? getBlockType( state, nameOrType )\r\n\t\t: nameOrType;\r\n\r\n/**\r\n * Get all blocks registered.\r\n *\r\n * @param {Object} state Global application state.\r\n *\r\n * @return {Array} Registered blocks\r\n */\r\nexport const getBlockTypes = ( state: BlocksState ): BlocksState => {\r\n\treturn reduce(\r\n\t\tsortBy( keys( state ), ( blockName ) => state[ blockName ].order ),\r\n\t\t( acc, key ) => {\r\n\t\t\tif ( key !== 'unknown' ) {\r\n\t\t\t\tacc[ key ] = state[ key ];\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t},\r\n\t\t{}\r\n\t);\r\n};\r\n\r\n/**\r\n * Returns a block type by name.\r\n *\r\n * @param {Object} state Data state.\r\n * @param {string} name  Block type name.\r\n *\r\n * @return {Object?} Block Type.\r\n */\r\nexport function getBlockType(\r\n\tstate: BlocksState,\r\n\tname: string\r\n): BlockTypeSettings | undefined {\r\n\treturn state[ name ];\r\n}\r\n\r\n/**\r\n * Returns the block support value for a feature, if defined.\r\n *\r\n * @param {Object}          state           Data state.\r\n * @param {(string|Object)} nameOrType      Block name or type object\r\n * @param {string}          feature         Feature to retrieve\r\n * @param {*}               defaultSupports Default value to return if not\r\n *                                          explicitly defined\r\n *\r\n * @return {?*} Block support value\r\n */\r\nexport const getBlockSupport = (\r\n\tstate: BlocksState,\r\n\tnameOrType: string | BlockTypeInterface,\r\n\tfeature: keyof BlockSupportedFeatures\r\n): string | boolean | undefined => {\r\n\tconst blockType = getNormalizedBlockType( state, nameOrType );\r\n\treturn get( blockType, [ 'supports', feature ] );\r\n};\r\n\r\n/**\r\n * Returns true if the block defines support for a feature, or false otherwise.\r\n *\r\n * @param {Object}          state           Data state.\r\n * @param {(string|Object)} nameOrType      Block name or type object.\r\n * @param {string}          feature         Feature to test.\r\n * @param {boolean}         defaultSupports Whether feature is supported by\r\n *                                          default if not explicitly defined.\r\n *\r\n * @return {boolean} Whether block supports feature.\r\n */\r\nexport function hasBlockSupport(\r\n\tstate: BlocksState,\r\n\tnameOrType: string,\r\n\tfeature: keyof BlockSupportedFeatures\r\n): boolean {\r\n\treturn !! getBlockSupport( state, nameOrType, feature );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAEC,MAAM,QAAQ,QAAQ;;AAElD;AACA;AACA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,sBAAsB,GAAGA,CAC9BC,KAAkB,EAClBC,UAAuC,KAEvC,QAAQ,KAAK,OAAOA,UAAU,GAC3BC,YAAY,CAAEF,KAAK,EAAEC,UAAW,CAAC,GACjCA,UAAU;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,aAAa,GAAKH,KAAkB,IAAmB;EACnE,OAAOF,MAAM,CACZF,MAAM,CAAEC,IAAI,CAAEG,KAAM,CAAC,EAAII,SAAS,IAAMJ,KAAK,CAAEI,SAAS,CAAE,CAACC,KAAM,CAAC,EAClE,CAAEC,GAAG,EAAEC,GAAG,KAAM;IACf,IAAKA,GAAG,KAAK,SAAS,EAAG;MACxBD,GAAG,CAAEC,GAAG,CAAE,GAAGP,KAAK,CAAEO,GAAG,CAAE;IAC1B;IACA,OAAOD,GAAG;EACX,CAAC,EACD,CAAC,CACF,CAAC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASJ,YAAYA,CAC3BF,KAAkB,EAClBQ,IAAY,EACoB;EAChC,OAAOR,KAAK,CAAEQ,IAAI,CAAE;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,eAAe,GAAGA,CAC9BT,KAAkB,EAClBC,UAAuC,EACvCS,OAAqC,KACH;EAClC,MAAMC,SAAS,GAAGZ,sBAAsB,CAAEC,KAAK,EAAEC,UAAW,CAAC;EAC7D,OAAON,GAAG,CAAEgB,SAAS,EAAE,CAAE,UAAU,EAAED,OAAO,CAAG,CAAC;AACjD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,eAAeA,CAC9BZ,KAAkB,EAClBC,UAAkB,EAClBS,OAAqC,EAC3B;EACV,OAAO,CAAC,CAAED,eAAe,CAAET,KAAK,EAAEC,UAAU,EAAES,OAAQ,CAAC;AACxD","ignoreList":[]}