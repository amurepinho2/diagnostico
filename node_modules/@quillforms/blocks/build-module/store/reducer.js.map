{"version":3,"names":["keyBy","SET_BLOCK_ADMIN_SETTINGS","SET_BLOCK_RENDERER_SETTINGS","ADD_BLOCK_TYPES","initialState","unknown","title","supports","editable","description","attachment","required","logic","placeholder","logicalOperators","BlocksReducer","state","action","type","name","settings","blockTypes"],"sources":["@quillforms/blocks/src/store/reducer.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { Reducer } from 'redux';\r\nimport { keyBy } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport {\r\n\tSET_BLOCK_ADMIN_SETTINGS,\r\n\tSET_BLOCK_RENDERER_SETTINGS,\r\n\tADD_BLOCK_TYPES,\r\n} from './constants';\r\nimport type { BlockActionTypes, BlocksState } from '../types';\r\n\r\nconst initialState: BlocksState = {\r\n\tunknown: {\r\n\t\ttitle: 'Unknown',\r\n\t\tsupports: {\r\n\t\t\teditable: true,\r\n\t\t\tdescription: true,\r\n\t\t\tattachment: true,\r\n\t\t\trequired: false,\r\n\t\t\tlogic: true,\r\n\t\t\tplaceholder: false,\r\n\t\t},\r\n\t\tlogicalOperators: [\r\n\t\t\t'is',\r\n\t\t\t'is_not',\r\n\t\t\t'starts_with',\r\n\t\t\t'greater_than',\r\n\t\t\t'lower_than',\r\n\t\t\t'ends_with',\r\n\t\t\t'contains',\r\n\t\t\t'not_contains',\r\n\t\t],\r\n\t},\r\n};\r\n\r\n/**\r\n * Reducer returning an array of registered blocks.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nconst BlocksReducer: Reducer< BlocksState, BlockActionTypes > = (\r\n\tstate = initialState,\r\n\taction\r\n): BlocksState => {\r\n\tswitch ( action.type ) {\r\n\t\tcase SET_BLOCK_ADMIN_SETTINGS:\r\n\t\tcase SET_BLOCK_RENDERER_SETTINGS:\r\n\t\t\tconst { name } = action;\r\n\t\t\tif ( ! state[ name ] ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ name ]: {\r\n\t\t\t\t\t...state[ name ],\r\n\t\t\t\t\t...action.settings,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase ADD_BLOCK_TYPES: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...keyBy( action.blockTypes, 'name' ),\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn state;\r\n};\r\n\r\nexport type State = ReturnType< typeof BlocksReducer >;\r\nexport default BlocksReducer;\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,KAAK,QAAQ,QAAQ;;AAE9B;AACA;AACA;AACA,SACCC,wBAAwB,EACxBC,2BAA2B,EAC3BC,eAAe,QACT,aAAa;AAGpB,MAAMC,YAAyB,GAAG;EACjCC,OAAO,EAAE;IACRC,KAAK,EAAE,SAAS;IAChBC,QAAQ,EAAE;MACTC,QAAQ,EAAE,IAAI;MACdC,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAE,IAAI;MAChBC,QAAQ,EAAE,KAAK;MACfC,KAAK,EAAE,IAAI;MACXC,WAAW,EAAE;IACd,CAAC;IACDC,gBAAgB,EAAE,CACjB,IAAI,EACJ,QAAQ,EACR,aAAa,EACb,cAAc,EACd,YAAY,EACZ,WAAW,EACX,UAAU,EACV,cAAc;EAEhB;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAuD,GAAGA,CAC/DC,KAAK,GAAGZ,YAAY,EACpBa,MAAM,KACW;EACjB,QAASA,MAAM,CAACC,IAAI;IACnB,KAAKjB,wBAAwB;IAC7B,KAAKC,2BAA2B;MAC/B,MAAM;QAAEiB;MAAK,CAAC,GAAGF,MAAM;MACvB,IAAK,CAAED,KAAK,CAAEG,IAAI,CAAE,EAAG;QACtB,OAAOH,KAAK;MACb;MACA,OAAO;QACN,GAAGA,KAAK;QACR,CAAEG,IAAI,GAAI;UACT,GAAGH,KAAK,CAAEG,IAAI,CAAE;UAChB,GAAGF,MAAM,CAACG;QACX;MACD,CAAC;IACF,KAAKjB,eAAe;MAAE;QACrB,OAAO;UACN,GAAGa,KAAK;UACR,GAAGhB,KAAK,CAAEiB,MAAM,CAACI,UAAU,EAAE,MAAO;QACrC,CAAC;MACF;EACD;EACA,OAAOL,KAAK;AACb,CAAC;AAGD,eAAeD,aAAa","ignoreList":[]}