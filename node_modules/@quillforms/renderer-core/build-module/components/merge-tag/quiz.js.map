{"version":3,"names":["useCorrectAnswersCount","useIncorrectAnswersCount","useSelect","HtmlParser","useBlockTheme","useCorrectIncorrectQuiz","useMessages","css","__experimentalUseFieldRenderContext","QuizMergeTag","modifier","correctIncorrectQuiz","attributes","theme","themeId","messages","fieldsSupportQuiz","answers","select","getFieldsBySupportCriteria","getAnswers","correctAnswersCount","inCorrectAnswersCount","createElement","Fragment","map","field","index","className","fontSize","lg","sm","dangerouslySetInnerHTML","__html","label","replace","_match","p1","p2","value","id","isCorrect"],"sources":["@quillforms/renderer-core/src/components/merge-tag/quiz.tsx"],"sourcesContent":["/**\r\n * Internal Dependencies\r\n */\r\nimport { forEach } from 'lodash';\r\nimport useCorrectAnswersCount from '../../hooks/use-correct-answers-count';\r\nimport useIncorrectAnswersCount from '../../hooks/use-incorrect-answers-count';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect } from \"@wordpress/data\";\r\nimport HtmlParser from '../html-parser';\r\nimport { useBlockTheme, useCorrectIncorrectQuiz, useMessages, useTheme } from '../../hooks';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { css } from 'emotion';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { __experimentalUseFieldRenderContext } from '../field-render';\r\n\r\ninterface Props {\r\n\tmodifier: string;\r\n}\r\nconst QuizMergeTag: React.FC<Props> = ({ modifier }) => {\r\n\tconst correctIncorrectQuiz = useCorrectIncorrectQuiz();\r\n\tconst { attributes } = __experimentalUseFieldRenderContext();\r\n\tconst theme = useBlockTheme(attributes?.themeId)\r\n\tconst messages = useMessages();\r\n\tconst { fieldsSupportQuiz, answers } = useSelect((select) => {\r\n\t\tconst { getFieldsBySupportCriteria } = select('quillForms/renderer-core');\r\n\t\treturn {\r\n\t\t\tfieldsSupportQuiz: getFieldsBySupportCriteria(['correctAnswers']),\r\n\t\t\tanswers: select('quillForms/renderer-core')?.getAnswers(),\r\n\t\t};\r\n\t});\r\n\tconst correctAnswersCount = useCorrectAnswersCount();\r\n\tconst inCorrectAnswersCount = useIncorrectAnswersCount();\r\n\tif (modifier === 'correct_answers_count') {\r\n\t\treturn <>{correctAnswersCount}</>;\r\n\t}\r\n\r\n\telse if (modifier === 'incorrect_answers_count') {\r\n\t\treturn <>{inCorrectAnswersCount}</>;\r\n\t}\r\n\r\n\telse if (modifier === 'summary') {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{fieldsSupportQuiz.map((field, index) => {\r\n\t\t\t\t\t// first div add dangerouslySetInnerHTML\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={css`\r\n\t\t\t\t\t\t\tfont-size: ${theme.fontSize.lg};\r\n\t\t\t\t\t\t\t@media screen and (max-width: 768px) {\r\n\t\t\t\t\t\t\t\tfont-size: ${theme.fontSize.sm}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmargin-bottom: 14px;\r\n\t\t\t\t\t\t`}>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t__html: index + 1 + \"- \" + field.attributes?.label?.replace(\r\n\t\t\t\t\t\t\t\t\t\t/{{([a-zA-Z0-9-_]+):([a-zA-Z0-9-_]+)}}/g,\r\n\t\t\t\t\t\t\t\t\t\t(_match, p1, p2) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn `______`;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{messages['label.yourAnswer']}: <HtmlParser value={`{{field:${field.id}}}`} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className={css`\r\n\t\t\t\t\t\t\t\tmargin-top:8px;\r\n\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\tbackground: ${answers[field.id]?.isCorrect ? '#5bc68a' : '#d93148'};\r\n\t\t\t\t\t\t\t\tpadding: 5px 8px;\r\n\t\t\t\t\t\t\t\tdisplay: inline-flex;\r\n\t\t\t\t\t\t\t`}>\r\n\t\t\t\t\t\t\t\t{answers[field.id]?.isCorrect ? messages['label.correct'] : messages['label.incorrect']}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nexport default QuizMergeTag;\r\n"],"mappings":"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","ignoreList":[]}