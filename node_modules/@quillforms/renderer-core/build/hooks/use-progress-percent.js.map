{"version":3,"names":["_data","require","_useFlattenedBlocks","_interopRequireDefault","useProgressPerecent","answers","walkPath","blockTypes","useSelect","select","getWalkPath","getAnswers","getBlockTypes","allBlocks","useFlattenedBlocks","editableBlocksLength","answered","forEach","field","name","supports","editable","id","value","getPercent","percent","Math","round","isNaN","_default","exports","default"],"sources":["@quillforms/renderer-core/src/hooks/use-progress-percent.ts"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport useFlattenedBlocks from './use-flattened-blocks';\r\nimport { FormBlocks } from '@quillforms/types/src';\r\n\r\nconst useProgressPerecent = () => {\r\n\tconst { answers, walkPath, blockTypes } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\twalkPath: select( 'quillForms/renderer-core' ).getWalkPath(),\r\n\t\t\tanswers: select( 'quillForms/renderer-core' ).getAnswers(),\r\n\t\t\tblockTypes: select( 'quillForms/blocks' ).getBlockTypes(),\r\n\t\t};\r\n\t} );\r\n\tconst allBlocks: FormBlocks = useFlattenedBlocks( walkPath );\r\n\tlet editableBlocksLength = 0;\r\n\tlet answered = 0;\r\n\tallBlocks.forEach( ( field ) => {\r\n\t\tif ( blockTypes[ field?.name ]?.supports.editable ) {\r\n\t\t\teditableBlocksLength++;\r\n\t\t\tif ( answers[ field?.id ]?.value ) {\r\n\t\t\t\tanswered++;\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\tconst getPercent = () => {\r\n\t\tconst percent = Math.round( ( answered * 100 ) / editableBlocksLength );\r\n\t\tif ( isNaN( percent ) ) return 0;\r\n\t\treturn percent;\r\n\t};\r\n\r\n\treturn getPercent();\r\n};\r\n\r\nexport default useProgressPerecent;\r\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,mBAAA,GAAAC,sBAAA,CAAAF,OAAA;AAJA;AACA;AACA;;AAKA,MAAMG,mBAAmB,GAAGA,CAAA,KAAM;EACjC,MAAM;IAAEC,OAAO;IAAEC,QAAQ;IAAEC;EAAW,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IAClE,OAAO;MACNH,QAAQ,EAAEG,MAAM,CAAE,0BAA2B,CAAC,CAACC,WAAW,CAAC,CAAC;MAC5DL,OAAO,EAAEI,MAAM,CAAE,0BAA2B,CAAC,CAACE,UAAU,CAAC,CAAC;MAC1DJ,UAAU,EAAEE,MAAM,CAAE,mBAAoB,CAAC,CAACG,aAAa,CAAC;IACzD,CAAC;EACF,CAAE,CAAC;EACH,MAAMC,SAAqB,GAAG,IAAAC,2BAAkB,EAAER,QAAS,CAAC;EAC5D,IAAIS,oBAAoB,GAAG,CAAC;EAC5B,IAAIC,QAAQ,GAAG,CAAC;EAChBH,SAAS,CAACI,OAAO,CAAIC,KAAK,IAAM;IAC/B,IAAKX,UAAU,CAAEW,KAAK,EAAEC,IAAI,CAAE,EAAEC,QAAQ,CAACC,QAAQ,EAAG;MACnDN,oBAAoB,EAAE;MACtB,IAAKV,OAAO,CAAEa,KAAK,EAAEI,EAAE,CAAE,EAAEC,KAAK,EAAG;QAClCP,QAAQ,EAAE;MACX;IACD;EACD,CAAE,CAAC;EACH,MAAMQ,UAAU,GAAGA,CAAA,KAAM;IACxB,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAAIX,QAAQ,GAAG,GAAG,GAAKD,oBAAqB,CAAC;IACvE,IAAKa,KAAK,CAAEH,OAAQ,CAAC,EAAG,OAAO,CAAC;IAChC,OAAOA,OAAO;EACf,CAAC;EAED,OAAOD,UAAU,CAAC,CAAC;AACpB,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa3B,mBAAmB","ignoreList":[]}