"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _data = require("@wordpress/data");
var _useFlattenedBlocks = _interopRequireDefault(require("./use-flattened-blocks"));
/**
 * WordPress Dependencies
 */

const useProgressPerecent = () => {
  const {
    answers,
    walkPath,
    blockTypes
  } = (0, _data.useSelect)(select => {
    return {
      walkPath: select('quillForms/renderer-core').getWalkPath(),
      answers: select('quillForms/renderer-core').getAnswers(),
      blockTypes: select('quillForms/blocks').getBlockTypes()
    };
  });
  const allBlocks = (0, _useFlattenedBlocks.default)(walkPath);
  let editableBlocksLength = 0;
  let answered = 0;
  allBlocks.forEach(field => {
    if (blockTypes[field?.name]?.supports.editable) {
      editableBlocksLength++;
      if (answers[field?.id]?.value) {
        answered++;
      }
    }
  });
  const getPercent = () => {
    const percent = Math.round(answered * 100 / editableBlocksLength);
    if (isNaN(percent)) return 0;
    return percent;
  };
  return getPercent();
};
var _default = exports.default = useProgressPerecent;
//# sourceMappingURL=use-progress-percent.js.map