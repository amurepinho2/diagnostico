"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _data = require("@wordpress/data");
var _element = require("@wordpress/element");
var _hooks = require("@wordpress/hooks");
var _hooks2 = require("../../hooks");
/**
 * WordPress Dependencies
 */

/**
 * Internal Dependencies
 */

const WelcomeScreensWrapper = () => {
  const {
    formId
  } = (0, _hooks2.useFormContext)();
  const blockTypes = (0, _hooks2.useBlockTypes)();
  const {
    welcomeScreens,
    currentBlockId
  } = (0, _data.useSelect)(select => {
    return {
      welcomeScreens: select('quillForms/renderer-core').getWelcomeScreens(),
      currentBlockId: select('quillForms/renderer-core').getCurrentBlockId()
    };
  });
  (0, _element.useEffect)(() => {
    // fire event on unmount.
    return () => {
      (0, _hooks.doAction)('QuillForms.RendererCore.WelcomeScreenPassed', {
        formId,
        id: currentBlockId
      });
    };
  }, []);
  const {
    goNext
  } = (0, _data.useDispatch)('quillForms/renderer-core');
  return (0, _react.createElement)(_react.Fragment, null, welcomeScreens?.length > 0 && welcomeScreens.map(screen => {
    const blockType = blockTypes['welcome-screen'];
    return (
      //@ts-expect-error
      (0, _react.createElement)(blockType.display, {
        next: goNext,
        isActive: currentBlockId === screen.id,
        key: screen.id,
        id: screen.id,
        attributes: screen.attributes
      })
    );
  }));
};
var _default = exports.default = WelcomeScreensWrapper;
//# sourceMappingURL=index.js.map