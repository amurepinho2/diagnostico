"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _data = require("@wordpress/data");
var _element = require("@wordpress/element");
var _fieldAction = _interopRequireDefault(require("../field-action"));
var _fieldRender = require("../field-render");
var _submitBtn = _interopRequireDefault(require("../submit-btn"));
/**
 * WordPress Dependencies
 */

/**
 * Internal Dependencies
 */

const ParentBlockFooter = () => {
  const {
    id,
    next,
    isLastField,
    showErrMsg,
    isErrMsgVisible
  } = (0, _fieldRender.__experimentalUseFieldRenderContext)();
  if (!id) return null;
  const {
    isValid,
    isReviewing
  } = (0, _data.useSelect)(select => {
    return {
      isValid: select('quillForms/renderer-core').hasValidFields(id),
      isReviewing: select('quillForms/renderer-core').isReviewing()
    };
  });
  (0, _element.useEffect)(() => {
    if (isValid) {
      showErrMsg(false);
    }
    if (!isValid && isReviewing) {
      showErrMsg(true);
    }
  }, [isReviewing, isValid]);
  return (0, _react.createElement)("div", {
    className: "renderer-components-block-footer"
  }, isLastField ? (0, _react.createElement)(_submitBtn.default, null) : (0, _react.createElement)(_react.Fragment, null, !isErrMsgVisible && (0, _react.createElement)(_fieldAction.default, {
    show: true,
    clickHandler: () => {
      if (!isValid) {
        showErrMsg(true);
      } else {
        next();
      }
    }
  })));
};
var _default = exports.default = ParentBlockFooter;
//# sourceMappingURL=parent.js.map