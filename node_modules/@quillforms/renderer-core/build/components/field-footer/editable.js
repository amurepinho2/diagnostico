"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _data = require("@wordpress/data");
var _fieldAction = _interopRequireDefault(require("../field-action"));
var _errorMessage = _interopRequireDefault(require("../error-message"));
var _fieldRender = require("../field-render");
var _submitBtn = _interopRequireDefault(require("../submit-btn"));
/**
 * WordPress Dependencies
 */

/**
 * Internal Dependencies
 */

const EditableBlockFooter = ({
  id,
  shakingErr
}) => {
  if (!id) return null;
  const {
    isValid,
    validationErr
  } = (0, _data.useSelect)(select => {
    return {
      isValid: select('quillForms/renderer-core').isValidField(id),
      validationErr: select('quillForms/renderer-core').getFieldValidationErr(id)
    };
  });
  const {
    next,
    isErrMsgVisible,
    showErrMsg,
    isLastField
  } = (0, _fieldRender.__experimentalUseFieldRenderContext)();
  return (0, _react.createElement)(_react.Fragment, null, shakingErr || !isValid && validationErr?.length > 0 && isErrMsgVisible ?
  // @ts-expect-error
  (0, _react.createElement)(_errorMessage.default, {
    message: shakingErr ? shakingErr : validationErr
  }) : isLastField ? (0, _react.createElement)(_submitBtn.default, null) :
  // @ts-expect-error
  (0, _react.createElement)(_fieldAction.default, {
    clickHandler: () => {
      if (validationErr && !isValid) {
        showErrMsg(true);
      } else {
        next();
      }
    }
  }));
};
var _default = exports.default = EditableBlockFooter;
//# sourceMappingURL=editable.js.map