{"version":3,"names":["_data","require","_classnames","_interopRequireDefault","_emotion","_hooks","_downIcon","_upIcon","_useCorrectIncorrectQuiz","FieldNavigation","shouldFooterBeDisplayed","goNext","goPrev","setIsCurrentBlockSafeToSwipe","setIsFieldValid","setIsFieldPending","setFieldValidationErr","goToBlock","setCorrectIncorrectDisplay","setIsFieldCorrectIncorrectScreenDisplayed","useDispatch","beforeGoingNext","useFormContext","theme","useCurrentTheme","settings","useFormSettings","correctIncorrectQuiz","useCorrectIncorrectQuiz","currentBlockId","walkPath","blockTypes","correctIncorrectDisplay","useSelect","select","getCurrentBlockId","getWalkPath","getBlockTypes","getCorrectIncorrectDisplay","currentBlockIndex","findIndex","block","id","currentBlockName","name","currentBlockType","isCurrentBlockValid","answers","isFieldCorrectIncorrectScreenDisplayed","getAnswers","supports","innerBlocks","hasValidFields","editable","isValidField","goNextReally","isPending","setIsPending","val","enabled","correctAnswers","_react","createElement","className","classnames","hidden","rotate","animationDirection","css","buttonsBgColor","onClick","default","length","_default","exports"],"sources":["@quillforms/renderer-core/src/components/field-navigation/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport classnames from 'classnames';\r\nimport { css } from 'emotion';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { useCurrentTheme, useFormContext, useFormSettings } from '../../hooks';\r\nimport DownIcon from './down-icon';\r\nimport UpIcon from './up-icon';\r\nimport useCorrectIncorrectQuiz from '../../hooks/use-correct-incorrect-quiz';\r\n\r\nconst FieldNavigation = ({ shouldFooterBeDisplayed }) => {\r\n\tconst {\r\n\t\tgoNext,\r\n\t\tgoPrev,\r\n\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\tsetIsFieldValid,\r\n\t\tsetIsFieldPending,\r\n\t\tsetFieldValidationErr,\r\n\t\tgoToBlock,\r\n\t\tsetCorrectIncorrectDisplay,\r\n\t\tsetIsFieldCorrectIncorrectScreenDisplayed\r\n\t} = useDispatch('quillForms/renderer-core');\r\n\tconst { beforeGoingNext } = useFormContext();\r\n\tconst theme = useCurrentTheme();\r\n\tconst settings = useFormSettings();\r\n\tconst correctIncorrectQuiz = useCorrectIncorrectQuiz();\r\n\tconst { currentBlockId, walkPath, blockTypes, correctIncorrectDisplay } = useSelect((select) => {\r\n\t\treturn {\r\n\t\t\tcurrentBlockId: select(\r\n\t\t\t\t'quillForms/renderer-core'\r\n\t\t\t).getCurrentBlockId(),\r\n\t\t\twalkPath: select('quillForms/renderer-core').getWalkPath(),\r\n\t\t\tblockTypes: select('quillForms/blocks').getBlockTypes(),\r\n\t\t\tcorrectIncorrectDisplay: select('quillForms/renderer-core').getCorrectIncorrectDisplay(),\r\n\t\t};\r\n\t});\r\n\tif (!currentBlockId) return null;\r\n\tconst currentBlockIndex = walkPath.findIndex(\r\n\t\t(block) => block.id === currentBlockId\r\n\t);\r\n\r\n\tconst currentBlockName = walkPath[currentBlockIndex]?.name;\r\n\r\n\tconst currentBlockType = blockTypes?.[currentBlockName];\r\n\r\n\tconst { isCurrentBlockValid, answers, isFieldCorrectIncorrectScreenDisplayed } = useSelect((select) => {\r\n\t\treturn {\r\n\t\t\tanswers: select('quillForms/renderer-core').getAnswers(),\r\n\t\t\tisCurrentBlockValid: currentBlockType?.supports?.innerBlocks\r\n\t\t\t\t? select('quillForms/renderer-core')?.hasValidFields(\r\n\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t)\r\n\t\t\t\t: currentBlockType?.supports?.editable\r\n\t\t\t\t\t? select('quillForms/renderer-core')?.isValidField(\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t\t)\r\n\t\t\t\t\t: true,\r\n\t\t\tisFieldCorrectIncorrectScreenDisplayed: select('quillForms/renderer-core').isFieldCorrectIncorrectScreenDisplayed(currentBlockId)\r\n\t\t};\r\n\t});\r\n\r\n\tconst goNextReally = async () => {\r\n\t\tif (answers[currentBlockIndex]?.isPending) return;\r\n\t\tif (beforeGoingNext && currentBlockId) {\r\n\t\t\tawait beforeGoingNext({\r\n\t\t\t\tanswers,\r\n\t\t\t\tcurrentBlockId,\r\n\t\t\t\tsetIsFieldValid,\r\n\t\t\t\tsetFieldValidationErr,\r\n\t\t\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\t\t\tgoToBlock,\r\n\t\t\t\tgoNext,\r\n\t\t\t\tsetIsPending: (val) =>\r\n\t\t\t\t\tsetIsFieldPending(currentBlockId, val),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (correctIncorrectQuiz?.enabled &&\r\n\t\t\t\tcorrectIncorrectDisplay === false &&\r\n\t\t\t\tcurrentBlockType.supports.correctAnswers &&\r\n\t\t\t\t!isFieldCorrectIncorrectScreenDisplayed\r\n\t\t\t) {\r\n\t\t\t\tsetCorrectIncorrectDisplay(true);\r\n\t\t\t\tsetIsFieldCorrectIncorrectScreenDisplayed(currentBlockId, true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgoNext();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classnames('renderer-core-field-navigation', {\r\n\t\t\t\thidden: !shouldFooterBeDisplayed,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__up-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${theme.buttonsBgColor};\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tgoPrev();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<UpIcon />\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__down-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${theme.buttonsBgColor};\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\twalkPath[walkPath.length - 1].id !== currentBlockId\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif (isCurrentBlockValid) {\r\n\t\t\t\t\t\t\tgoNextReally();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetIsCurrentBlockSafeToSwipe(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<DownIcon />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FieldNavigation;\r\n"],"mappings":"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","ignoreList":[]}