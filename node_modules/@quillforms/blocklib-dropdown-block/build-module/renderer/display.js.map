{"version":3,"names":["useMessages","useBlockTheme","useCx","css","useState","useEffect","useRef","useMemo","createPortal","useSelect","tinyColor","classnames","cloneDeep","DropdownIcon","CloseIcon","ChoiceItem","styles","ENTER_CODE","ESC_CODE","ARROW_UP_CODE","ARROW_DOWN_CODE","timer","timer2","timer3","DropdownDisplay","props","_theme$backgroundColo","id","attributes","setIsValid","setIsAnswered","setValidationErr","val","setVal","next","showErrMsg","isActive","isTouchScreen","setFooterDisplay","inputRef","isPreview","isReviewing","choices","required","cx","isIframed","window","self","top","theme","themeId","showDropdown","setShowDropdown","searchKeyword","setSearchKeyword","selectedChoiceIndex","setSelectedChoiceIndex","clicked","setClicked","goNext","setGoNext","showCloseIcon","setShowCloseIcon","inputValue","setInputValue","showFixedDropdownInDom","setShowFixedDropdownInDom","showFDrop","setShowFDrop","wrapperRef","choicesWrappeerRef","messages","answersColor","$choices","map","choice","index","label","filter","toLowerCase","includes","checkFieldValidation","$val","handleClickOutside","e","current","contains","target","document","addEventListener","querySelector","classList","add","remove","removeEventListener","setTimeout","clearTimeout","changeHandler","value","undefined","selectedChoice","find","checkInView","container","element","cTop","scrollTop","cBottom","clientHeight","eTop","offsetTop","eBottom","handleChoiceKeyDown","keyCode","block","length","newChoiceIndex","choiceEl","getElementById","stopPropagation","clickHandler","selectedIndex","findIndex","c","createElement","ref","style","position","autoComplete","className","setAlpha","toString","placeholder","onChange","onClick","blur","onFocus","onBlur","onKeyDown","focus","transform","visible","DropdownChoices","backgroundColor","onWheel","blockId","choiceIndex","hovered","role","key","errorsBgColor","errorsFontColor","Fragment","show","hide","FixedDropdown","focusable","viewBox","d","autoFocus"],"sources":["@quillforms/blocklib-dropdown-block/src/renderer/display.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/**\r\n * QuillForms Dependencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\nimport { useCx, css } from '@quillforms/utils';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport {\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseMemo\r\n} from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport classnames from 'classnames';\r\nimport { cloneDeep } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport DropdownIcon from './expand-icon';\r\nimport CloseIcon from './close-icon';\r\nimport ChoiceItem from './choice-item';\r\nimport * as styles from './styles';\r\n\r\nconst ENTER_CODE = 13;\r\nconst ESC_CODE = 27;\r\nconst ARROW_UP_CODE = 38;\r\nconst ARROW_DOWN_CODE = 40;\r\n\r\nlet timer;\r\nlet timer2;\r\nlet timer3;\r\nconst DropdownDisplay = (props) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tnext,\r\n\t\tshowErrMsg,\r\n\t\tisActive,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tinputRef,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst { choices, required } = attributes;\r\n\tconst cx = useCx();\r\n\tconst isIframed = window.self !== window.top;\r\n\tconst theme = useBlockTheme(attributes.themeId);\r\n\tconst [showDropdown, setShowDropdown] = useState(false);\r\n\tconst [searchKeyword, setSearchKeyword] = useState('');\r\n\tconst [selectedChoiceIndex, setSelectedChoiceIndex] = useState(-1);\r\n\tconst [clicked, setClicked] = useState(false);\r\n\tconst [goNext, setGoNext] = useState(false);\r\n\tconst [showCloseIcon, setShowCloseIcon] = useState(false);\r\n\tconst [inputValue, setInputValue] = useState('');\r\n\tconst [showFixedDropdownInDom, setShowFixedDropdownInDom] =\r\n\t\tuseState(false);\r\n\tconst [showFDrop, setShowFDrop] = useState(false);\r\n\tconst wrapperRef = useRef();\r\n\tconst choicesWrappeerRef = useRef();\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor(theme.answersColor);\r\n\tconst $choices = useMemo(() => {\r\n\t\treturn cloneDeep(choices)\r\n\t\t\t.map((choice, index) => {\r\n\t\t\t\tif (!choice.label) choice.label = 'Choice ' + (index + 1);\r\n\t\t\t\treturn choice;\r\n\t\t\t})\r\n\t\t\t.filter((choice) =>\r\n\t\t\t\tchoice.label\r\n\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t.includes(\r\n\t\t\t\t\t\tval && isTouchScreen ? '' : searchKeyword.toLowerCase()\r\n\t\t\t\t\t)\r\n\t\t\t);\r\n\t}, [choices, searchKeyword]);\r\n\r\n\tconst checkFieldValidation = ($val) => {\r\n\t\tif (required === true && (!$val || $val === '')) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(\r\n\t\t\t\tmessages['label.errorAlert.selectionRequired']\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tsetIsValid(true);\r\n\t\t\tsetValidationErr(null);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle click outside the countries dropdown\r\n\tconst handleClickOutside = (e) => {\r\n\t\tif (wrapperRef.current && !wrapperRef.current.contains(e.target)) {\r\n\t\t\tsetShowDropdown(false);\r\n\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t}\r\n\t};\r\n\r\n\t// Attaching the previous event with UseEffect hook\r\n\tuseEffect(() => {\r\n\t\tif (showDropdown) {\r\n\t\t\t// Bind the event listener\r\n\t\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\t\tif (\r\n\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tdocument\r\n\t\t\t\t\t.querySelector(\r\n\t\t\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.classList.add('is-hidden');\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\tdocument.querySelector(\r\n\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector(`#block-${id} .renderer-core-field-footer`)\r\n\t\t\t\t.classList.remove('is-hidden');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [showDropdown]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if change in attributes and is in preview mode, check validation\r\n\t\t// Note, that this effect will also be called on mount, that's why we check if isReviewing = false\r\n\t\t// because we want to display errors coming from server.\r\n\t\tif (isPreview || !isReviewing) checkFieldValidation(val);\r\n\t}, [attributes]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showFDrop) {\r\n\t\t\tsetShowFixedDropdownInDom(showFDrop);\r\n\t\t\tsetFooterDisplay(false);\r\n\t\t} else {\r\n\t\t\ttimer3 = setTimeout(() => {\r\n\t\t\t\tsetShowFixedDropdownInDom(showFDrop);\r\n\t\t\t}, 500);\r\n\t\t}\r\n\r\n\t\treturn () => clearTimeout(timer3);\r\n\t}, [showFDrop]);\r\n\r\n\tconst changeHandler = (e) => {\r\n\t\t// show close icon of there is any string\r\n\t\tsetShowCloseIcon(e.target.value !== '');\r\n\t\tsetInputValue(e.target.value);\r\n\t\tif (!isTouchScreen || isIframed) setShowDropdown(true);\r\n\t\tif (val) {\r\n\t\t\tsetVal(null);\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\tcheckFieldValidation(undefined);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSearchKeyword(e.target.value);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isActive) {\r\n\t\t\t//clearTimeout( timer );\r\n\t\t\tif (timer2) clearTimeout(timer2);\r\n\t\t}\r\n\t\tsetGoNext(false);\r\n\t}, [isActive]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (val) {\r\n\t\t\tconst selectedChoice = $choices.find(\r\n\t\t\t\t(choice) => choice.value === val\r\n\t\t\t);\r\n\t\t\tsetSearchKeyword(selectedChoice ? selectedChoice.label : '');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\t// clearTimeout( timer );\r\n\t\t\ttimer2 && clearTimeout(timer2);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (goNext) {\r\n\t\t\tnext();\r\n\t\t}\r\n\t}, [goNext])\r\n\r\n\tfunction checkInView(container, element) {\r\n\t\t//Get container properties\r\n\t\tconst cTop = container.scrollTop;\r\n\t\tconst cBottom = cTop + container.clientHeight;\r\n\r\n\t\t//Get element properties\r\n\t\tconst eTop = element.offsetTop;\r\n\t\tconst eBottom = eTop + element.clientHeight;\r\n\r\n\t\t//Check if in view\r\n\t\treturn eTop >= cTop + 10 && eBottom <= cBottom - 50;\r\n\t}\r\n\r\n\tconst handleChoiceKeyDown = (e) => {\r\n\t\tif (isTouchScreen) return;\r\n\t\tif (e.keyCode === ESC_CODE) {\r\n\t\t\tsetShowDropdown(false);\r\n\t\t\tsetShowCloseIcon(inputValue !== '');\r\n\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.keyCode === ARROW_UP_CODE || e.keyCode === ARROW_DOWN_CODE) {\r\n\t\t\tconst block = document.querySelector(\r\n\t\t\t\t`#block-${id}  .qf-block-dropdown-display__choices`\r\n\t\t\t);\r\n\t\t\tif (\r\n\t\t\t\t!block ||\r\n\t\t\t\t(selectedChoiceIndex <= 0 && e.keyCode === ARROW_UP_CODE) ||\r\n\t\t\t\t(selectedChoiceIndex === $choices.length - 1 &&\r\n\t\t\t\t\te.keyCode === ARROW_DOWN_CODE)\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetShowDropdown(true);\r\n\t\t\tconst newChoiceIndex =\r\n\t\t\t\te.keyCode === ARROW_UP_CODE\r\n\t\t\t\t\t? selectedChoiceIndex - 1\r\n\t\t\t\t\t: selectedChoiceIndex + 1;\r\n\t\t\tsetSelectedChoiceIndex(newChoiceIndex);\r\n\t\t\tconst choiceEl = document.getElementById(\r\n\t\t\t\t`block-${id}-option-${newChoiceIndex}`\r\n\t\t\t);\r\n\t\t\tif (!checkInView(block, choiceEl)) {\r\n\t\t\t\tblock.scrollTop = choiceEl.offsetTop - 30;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.keyCode === ENTER_CODE) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tif (selectedChoiceIndex === -1) {\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetClicked(true);\r\n\t\t\t// selectedChoiceIndex > 4 &&\r\n\t\t\t// \tdocument\r\n\t\t\t// \t\t.querySelector( '.qf-block-dropdown-display__choices' )\r\n\t\t\t// \t\t.scrollTo( 0, ( selectedChoiceIndex - 3 ) * 49 );\r\n\t\t}\r\n\t};\r\n\r\n\tconst clickHandler = (choice = $choices[selectedChoiceIndex]) => {\r\n\t\tconst selectedIndex = $choices.findIndex(\r\n\t\t\t(c) => c.value === choice.value\r\n\t\t);\r\n\t\tif (selectedIndex !== selectedChoiceIndex)\r\n\t\t\tsetSelectedChoiceIndex(selectedIndex);\r\n\t\tsetClicked(false);\r\n\t\tsetShowCloseIcon(false);\r\n\t\tshowErrMsg(false);\r\n\t\tclearTimeout(timer);\r\n\t\tif (timer2) clearTimeout(timer2);\r\n\t\tif (val && val === choice.value) {\r\n\t\t\tsetVal(null);\r\n\t\t\tsetIsAnswered(false);\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\tcheckFieldValidation(undefined);\r\n\t\t\tsetGoNext(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsAnswered(true);\r\n\t\tsetVal(choice.value);\r\n\t\tcheckFieldValidation(choice.value)\r\n\r\n\t\ttimer = setTimeout(\r\n\t\t\t() => {\r\n\t\t\t\tsetSearchKeyword(choice.label);\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\t\tif (isTouchScreen && !isIframed) {\r\n\t\t\t\t\tsetShowFDrop(false);\r\n\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t// timer2 for showing the input after choosing value\r\n\t\t\t\t\ttimer2 = setTimeout(() => {\r\n\t\t\t\t\t\tsetGoNext(true)\r\n\t\t\t\t\t}, 750);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetGoNext(true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisTouchScreen ? 500 : 700\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div ref={wrapperRef} style={{ position: 'relative' }}>\r\n\t\t\t<input\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tclassName={cx(\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\t& {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\t\tfont-size: 30px;\r\n\t\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t.setAlpha(0.3)\r\n\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t0px 1px;\r\n\t\t\t\t\t\t\t@media ( max-width: 600px ) {\r\n\t\t\t\t\t\t\t\tfont-size: 24px;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t@media ( max-width: 480px ) {\r\n\t\t\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t.setAlpha(1)\r\n\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t0px 2px;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tid={'dropdown-' + id}\r\n\t\t\t\tplaceholder={messages['block.dropdown.placeholder']}\r\n\t\t\t\tonChange={changeHandler}\r\n\t\t\t\tvalue={\r\n\t\t\t\t\tval && isTouchScreen\r\n\t\t\t\t\t\t? searchKeyword\r\n\t\t\t\t\t\t: !isTouchScreen\r\n\t\t\t\t\t\t\t? searchKeyword\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (isTouchScreen && !isIframed) {\r\n\t\t\t\t\t\tsetShowFDrop(true);\r\n\t\t\t\t\t\tinputRef?.current?.blur();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetShowDropdown(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonFocus={() => {\r\n\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonBlur={() => {\r\n\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonKeyDown={handleChoiceKeyDown}\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t/>\r\n\t\t\t{(val && val.length > 0) ||\r\n\t\t\t\t(showCloseIcon && (!isTouchScreen || isIframed)) ? (\r\n\t\t\t\t<CloseIcon\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\ttimer2 && clearTimeout(timer2);\r\n\t\t\t\t\t\tsetSearchKeyword('');\r\n\t\t\t\t\t\tsetIsAnswered(false);\r\n\t\t\t\t\t\tsetVal(undefined);\r\n\t\t\t\t\t\tsetShowCloseIcon(false);\r\n\t\t\t\t\t\tif (!isTouchScreen) {\r\n\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<DropdownIcon\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\ttransform: `${showDropdown ? 'rotate(180deg)' : 'rotate(0deg)'\r\n\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tshowDropdown && setSelectedChoiceIndex(-1);\r\n\t\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\t\tsetShowFDrop(!showFDrop);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetShowDropdown(!showDropdown);\r\n\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonKeyDown={(e) => {\r\n\t\t\t\t\t\tif (e.keyCode === ENTER_CODE) {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tshowDropdown && setSelectedChoiceIndex(-1);\r\n\t\t\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\t\t\tsetShowFDrop(!showFDrop);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetShowDropdown(!showDropdown);\r\n\t\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{showDropdown && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t'qf-block-dropdown-display__choices',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvisible: showDropdown,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstyles.DropdownChoices,\r\n\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\tbackground: ${theme.backgroundColor ?? '#fff'};\r\n\t\t\t\t\t\t\tpadding: 15px;\r\n\t\t\t\t\t\t\tborder: 1px dashed ${theme.answersColor};\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tref={choicesWrappeerRef}\r\n\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\tif (showDropdown) {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{$choices?.length > 0 ? (\r\n\t\t\t\t\t\t$choices.map((choice, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ChoiceItem\r\n\t\t\t\t\t\t\t\t\tblockId={id}\r\n\t\t\t\t\t\t\t\t\tchoiceIndex={index}\r\n\t\t\t\t\t\t\t\t\thovered={index === selectedChoiceIndex}\r\n\t\t\t\t\t\t\t\t\tclicked={\r\n\t\t\t\t\t\t\t\t\t\tindex === selectedChoiceIndex && clicked\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\tkey={`block-dropdown-${id}-choice-${choice.value}`}\r\n\t\t\t\t\t\t\t\t\tclickHandler={() =>\r\n\t\t\t\t\t\t\t\t\t\tclickHandler(choice)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tchoice={choice}\r\n\t\t\t\t\t\t\t\t\tval={val}\r\n\t\t\t\t\t\t\t\t\tshowDropdown={showDropdown}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={cx(css`\r\n\t\t\t\t\t\t\t\tbackground: ${theme.errorsBgColor};\r\n\t\t\t\t\t\t\t\tcolor: ${theme.errorsFontColor};\r\n\t\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\t` )}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{messages['block.dropdown.noSuggestions']}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{showFixedDropdownInDom && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{createPortal(\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t'fixed-dropdown',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tshow: showFDrop,\r\n\t\t\t\t\t\t\t\t\thide: !showFDrop,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tstyles.FixedDropdown(theme)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tonWheel={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"fixed-dropdown-content\"\r\n\t\t\t\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowFDrop(false);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"back-icon\"\r\n\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={false}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\t\t\t\t\t\t& {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransition: box-shadow 0.1s\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tease-out 0s;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.setAlpha(0.3)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0px 1px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.setAlpha(1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0px 2px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={\r\n\t\t\t\t\t\t\t\t\t\t\tmessages[\r\n\t\t\t\t\t\t\t\t\t\t\t'block.dropdown.placeholder'\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonChange={changeHandler}\r\n\t\t\t\t\t\t\t\t\t\tvalue={searchKeyword}\r\n\t\t\t\t\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleChoiceKeyDown}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"qf-block-dropdown-display__choices visible fixed-choices\"\r\n\t\t\t\t\t\t\t\t\tref={choicesWrappeerRef}\r\n\t\t\t\t\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tif (showFixedDropdownInDom) {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$choices?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t$choices.map((choice, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ChoiceItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thovered={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedChoiceIndex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchoiceIndex={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tblockId={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedChoiceIndex &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclicked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`block-dropdown-${id}-choice-${choice.value}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler(choice)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchoice={choice}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval={val}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowDropdown={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDropdown\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={cx(css`\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: ${theme.errorsBgColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.errorsFontColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\t\t\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\t\t\t\t\t` )}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessages[\r\n\t\t\t\t\t\t\t\t\t\t\t\t'block.dropdown.noSuggestions'\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>,\r\n\t\t\t\t\t\tdocument.querySelector('.renderer-core-form-flow')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default DropdownDisplay;\r\n"],"mappings":"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","ignoreList":[]}