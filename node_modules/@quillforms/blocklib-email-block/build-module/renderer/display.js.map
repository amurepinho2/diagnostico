{"version":3,"names":["useMessages","useBlockTheme","useSelect","useEffect","tinyColor","css","classnames","EmailValidator","EmailOutput","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","showNextBtn","val","setVal","showErrMsg","next","inputRef","isTouchScreen","setFooterDisplay","isPreview","isReviewing","theme","themeId","messages","answersColor","required","placeholder","checkFieldValidation","value","length","validate","changeHandler","e","target","createElement","ref","className","setAlpha","toString","type","onChange","onFocus","onBlur","autoComplete"],"sources":["@quillforms/blocklib-email-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\nimport * as EmailValidator from 'email-validator';\r\n\r\nconst EmailOutput = (props) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tshowErrMsg,\r\n\t\tnext,\r\n\t\tinputRef,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst theme = useBlockTheme(attributes.themeId);\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor(theme.answersColor);\r\n\tconst { required, placeholder } = attributes;\r\n\r\n\tconst checkFieldValidation = (value) => {\r\n\t\tif (\r\n\t\t\trequired === true &&\r\n\t\t\t(!value || value === '' || value.length === 0)\r\n\t\t) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(messages['label.errorAlert.required']);\r\n\t\t} else if (\r\n\t\t\tvalue &&\r\n\t\t\t!EmailValidator.validate(value) &&\r\n\t\t\tvalue.length > 0\r\n\t\t) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(messages['label.errorAlert.email']);\r\n\t\t} else {\r\n\t\t\tsetIsValid(true);\r\n\t\t\tsetValidationErr(null);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isPreview || !isReviewing) checkFieldValidation(val);\r\n\t}, [required]);\r\n\r\n\tconst changeHandler = (e) => {\r\n\t\tconst value = e.target.value;\r\n\t\tcheckFieldValidation(value);\r\n\t\tsetVal(value);\r\n\t\tshowErrMsg(false);\r\n\t\tif (!value) {\r\n\t\t\tsetIsAnswered(false);\r\n\t\t} else {\r\n\t\t\tsetIsAnswered(true);\r\n\t\t\tshowNextBtn(true);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<input\r\n\t\t\tref={inputRef}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\tpadding-bottom: 8px !important;\r\n\t\t\t\t\t\tpadding-left: 0 !important;\r\n\t\t\t\t\t\tpadding-right: 0 !important;\r\n\t\t\t\t\t\tborder-radius: 0 !important;\r\n\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\tbackground-color: transparent !important;\r\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\t-webkit-appearance: none;\r\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(0.3).toString()}\r\n\t\t\t\t\t\t\t0px 1px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(1).toString()}\r\n\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolor: ${theme.answersColor} !important;\r\n\t\t\t\t`\r\n\t\t\t)}\r\n\t\t\tid={'email-' + id}\r\n\t\t\ttype=\"email\"\r\n\t\t\tplaceholder={\r\n\t\t\t\tplaceholder === false\r\n\t\t\t\t\t? messages['block.email.placeholder']\r\n\t\t\t\t\t: placeholder\r\n\t\t\t}\r\n\t\t\tonChange={changeHandler}\r\n\t\t\tvalue={val && val.length > 0 ? val : ''}\r\n\t\t\tonFocus={() => {\r\n\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tonBlur={() => {\r\n\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\nexport default EmailOutput;\r\n"],"mappings":"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","ignoreList":[]}