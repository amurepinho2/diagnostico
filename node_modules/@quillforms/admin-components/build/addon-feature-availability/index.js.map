{"version":3,"names":["_navigation","require","_config","_interopRequireDefault","_components","_emotion","_lockIcon","AddonFeatureAvailability","featureName","addonSlug","showLockIcon","license","ConfigApi","getLicense","addon","getStoreAddons","isWPEnv","featurePlanLabel","getPlans","plan","label","isPlanAccessible","content","_react","createElement","is_installed","licenseNote","status","className","is_active","name","NavLink","to","Icon","icon","lockIcon","size","css","Fragment","href","target","_default","exports","default"],"sources":["@quillforms/admin-components/src/addon-feature-availability/index.tsx"],"sourcesContent":["/**\n * QuillForms Dependencies\n */\nimport { NavLink } from '@quillforms/navigation';\nimport ConfigApi from '@quillforms/config';\n\n/**\n * WordPress Dependencies\n */\nimport { Icon } from '@wordpress/components';\n\n/**\n * External Dependencies\n */\nimport { css } from 'emotion';\n\n/** \n * Internal Dependencies\n */\nimport lockIcon from './lock-icon';\n\ninterface Props {\n\tfeatureName: string;\n\taddonSlug: string;\n\tshowLockIcon: boolean;\n}\n\nconst AddonFeatureAvailability: React.FC<Props> = ({\n\tfeatureName,\n\taddonSlug,\n\tshowLockIcon,\n}) => {\n\tconst license = ConfigApi.getLicense();\n\tconst addon = ConfigApi.getStoreAddons()[addonSlug];\n\tconst isWPEnv = ConfigApi.isWPEnv();\n\tconst featurePlanLabel = ConfigApi.getPlans()[addon.plan].label;\n\tconst isPlanAccessible = ConfigApi.isPlanAccessible(addon.plan);\n\n\tlet content = <div></div>;\n\n\t// if addon installed.\n\tif (isWPEnv && addon.is_installed) {\n\t\t// license note in case of invalid or low level license.\n\t\tlet licenseNote = <div></div>;\n\t\tif (license?.status !== 'valid') {\n\t\t\tlicenseNote = (\n\t\t\t\t<div className=\"addon-feature-availability-license-note\">\n\t\t\t\t\tRenewing your license is recommended to receive updates for\n\t\t\t\t\tthis addon.\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (!isPlanAccessible) {\n\t\t\tlicenseNote = (\n\t\t\t\t<div className=\"addon-feature-availability-license-note\">\n\t\t\t\t\tUpgrading your license to {featurePlanLabel} is\n\t\t\t\t\trecommended to receive updates for this addon.\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t// if addon is active, shouldn't be reached in most cases.\n\t\tif (addon.is_active) {\n\t\t\tcontent = (\n\t\t\t\t<div>\n\t\t\t\t\t<div>{featureName} is already available.</div>\n\t\t\t\t\t{licenseNote}\n\t\t\t\t</div>\n\t\t\t);\n\t\t\t// else, the addon is not active -but installed-.\n\t\t} else {\n\t\t\tcontent = (\n\t\t\t\t<div>\n\t\t\t\t\t<div>{featureName} is already available.</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPlease activate <b>{addon.name}</b> addon from{' '}\n\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\tto={`/admin.php?page=quillforms&path=addons`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\taddons page\n\t\t\t\t\t\t</NavLink>{' '}\n\t\t\t\t\t\tto use it.\n\t\t\t\t\t</div>\n\t\t\t\t\t{licenseNote}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t// else, addon is not installed.\n\t} else {\n\t\t// if license is valid and the feature plan is accessible.\n\t\tif (license?.status === 'valid' && isPlanAccessible) {\n\t\t\tcontent = (\n\t\t\t\t<div>\n\t\t\t\t\t<div>{featureName} is available for your plan.</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPlease install and activate {addon.name} addon from{' '}\n\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\tto={`/admin.php?page=quillforms&path=addons`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\taddons page\n\t\t\t\t\t\t</NavLink>{' '}\n\t\t\t\t\t\tto use it.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t\t// else, no license or the license is invalid or the feature of addon require higher plan.\n\t\t} else {\n\t\t\tcontent = (\n\t\t\t\t<div>\n\t\t\t\t\t{showLockIcon && (\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tclassName=\"addon-feature-availability-lock-icon\"\n\t\t\t\t\t\t\ticon={lockIcon}\n\t\t\t\t\t\t\tsize={120}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<p\n\t\t\t\t\t\tclassName={css`\n\t\t\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\t\t` }\n\t\t\t\t\t>\n\n\t\t\t\t\t\tWe're sorry, {featureName} is not available\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\ton your plan. Please upgrade to the {\n\t\t\t\t\t\t\tfeaturePlanLabel\n\t\t\t\t\t\t}{' '}\n\t\t\t\t\t\tplan to unlock\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tall of {featurePlanLabel} features.\n\t\t\t\t\t</p>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{isWPEnv ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"https://quillforms.com\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tclassName=\"addon-feature-availability-upgrade-button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpgrade to {featurePlanLabel}!\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t<NavLink to=\"/admin.php?page=quillforms&path=checkout\" className=\"addon-feature-availability-upgrade-button\">\n\t\t\t\t\t\t\t\t\tUpgrade to {featurePlanLabel}! </NavLink>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn <div className=\"addon-feature-availability\">{content}</div>;\n};\n\nexport default AddonFeatureAvailability;\n"],"mappings":"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","ignoreList":[]}