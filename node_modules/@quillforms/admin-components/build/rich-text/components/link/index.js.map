{"version":3,"names":["_slate","require","_button","_interopRequireDefault","_linkIcon","Link","editor","insertLink","url","selection","wrapLink","isLinkActive","link","Editor","nodes","match","n","type","unwrapLink","Transforms","unwrapNodes","isCollapsed","Range","children","text","insertNodes","wrapNodes","split","collapse","edge","_react","createElement","default","active","onMouseDown","event","preventDefault","window","prompt","_default","exports"],"sources":["@quillforms/admin-components/src/rich-text/components/link/index.tsx"],"sourcesContent":["/**\n * External Dependencies\n */\nimport { Transforms, Editor, Range } from 'slate';\nimport { CustomNode } from '../../types';\n\n/**\n * Inernal Dependencies\n */\nimport Button from '../button';\nimport LinkIcon from './link-icon';\n\ninterface Props {\n\teditor: Editor;\n}\nconst Link: React.FC< Props > = ( { editor } ) => {\n\tconst insertLink = ( url: string ) => {\n\t\tif ( editor.selection ) {\n\t\t\twrapLink( url );\n\t\t}\n\t};\n\tconst isLinkActive = () => {\n\t\tconst [ link ] = Editor.nodes( editor, {\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\n\t\t} );\n\t\treturn !! link;\n\t};\n\n\tconst unwrapLink = () => {\n\t\tTransforms.unwrapNodes( editor, {\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\n\t\t} );\n\t};\n\n\tconst wrapLink = ( url ) => {\n\t\tif ( isLinkActive() ) {\n\t\t\tunwrapLink();\n\t\t}\n\n\t\tconst { selection } = editor;\n\t\tconst isCollapsed = selection && Range.isCollapsed( selection );\n\t\tconst link = {\n\t\t\ttype: 'link',\n\t\t\turl,\n\t\t\tchildren: isCollapsed ? [ { text: url } ] : [],\n\t\t};\n\n\t\tif ( isCollapsed ) {\n\t\t\tTransforms.insertNodes( editor, link );\n\t\t} else {\n\t\t\tTransforms.wrapNodes( editor, link, { split: true } );\n\t\t\tTransforms.collapse( editor, { edge: 'end' } );\n\t\t}\n\t};\n\n\treturn (\n\t\t<Button\n\t\t\tactive={ isLinkActive() }\n\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( isLinkActive() ) {\n\t\t\t\t\tunwrapLink();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\tconst url = window.prompt( 'Enter the URL of the link:' );\n\t\t\t\tif ( ! url ) return;\n\t\t\t\tinsertLink( url );\n\t\t\t} }\n\t\t>\n\t\t\t<LinkIcon />\n\t\t</Button>\n\t);\n};\nexport default Link;\n"],"mappings":";;;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AAMA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,SAAA,GAAAD,sBAAA,CAAAF,OAAA;AAVA;AACA;AACA;;AAIA;AACA;AACA;;AAOA,MAAMI,IAAuB,GAAGA,CAAE;EAAEC;AAAO,CAAC,KAAM;EACjD,MAAMC,UAAU,GAAKC,GAAW,IAAM;IACrC,IAAKF,MAAM,CAACG,SAAS,EAAG;MACvBC,QAAQ,CAAEF,GAAI,CAAC;IAChB;EACD,CAAC;EACD,MAAMG,YAAY,GAAGA,CAAA,KAAM;IAC1B,MAAM,CAAEC,IAAI,CAAE,GAAGC,aAAM,CAACC,KAAK,CAAER,MAAM,EAAE;MACtCS,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAE,CAAC;IACH,OAAO,CAAC,CAAEL,IAAI;EACf,CAAC;EAED,MAAMM,UAAU,GAAGA,CAAA,KAAM;IACxBC,iBAAU,CAACC,WAAW,CAAEd,MAAM,EAAE;MAC/BS,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAE,CAAC;EACJ,CAAC;EAED,MAAMP,QAAQ,GAAKF,GAAG,IAAM;IAC3B,IAAKG,YAAY,CAAC,CAAC,EAAG;MACrBO,UAAU,CAAC,CAAC;IACb;IAEA,MAAM;MAAET;IAAU,CAAC,GAAGH,MAAM;IAC5B,MAAMe,WAAW,GAAGZ,SAAS,IAAIa,YAAK,CAACD,WAAW,CAAEZ,SAAU,CAAC;IAC/D,MAAMG,IAAI,GAAG;MACZK,IAAI,EAAE,MAAM;MACZT,GAAG;MACHe,QAAQ,EAAEF,WAAW,GAAG,CAAE;QAAEG,IAAI,EAAEhB;MAAI,CAAC,CAAE,GAAG;IAC7C,CAAC;IAED,IAAKa,WAAW,EAAG;MAClBF,iBAAU,CAACM,WAAW,CAAEnB,MAAM,EAAEM,IAAK,CAAC;IACvC,CAAC,MAAM;MACNO,iBAAU,CAACO,SAAS,CAAEpB,MAAM,EAAEM,IAAI,EAAE;QAAEe,KAAK,EAAE;MAAK,CAAE,CAAC;MACrDR,iBAAU,CAACS,QAAQ,CAAEtB,MAAM,EAAE;QAAEuB,IAAI,EAAE;MAAM,CAAE,CAAC;IAC/C;EACD,CAAC;EAED,OACC,IAAAC,MAAA,CAAAC,aAAA,EAAC7B,OAAA,CAAA8B,OAAM;IACNC,MAAM,EAAGtB,YAAY,CAAC,CAAG;IACzBuB,WAAW,EAAKC,KAAK,IAAM;MAC1BA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,IAAKzB,YAAY,CAAC,CAAC,EAAG;QACrBO,UAAU,CAAC,CAAC;QACZ;MACD;MACA;MACA,MAAMV,GAAG,GAAG6B,MAAM,CAACC,MAAM,CAAE,4BAA6B,CAAC;MACzD,IAAK,CAAE9B,GAAG,EAAG;MACbD,UAAU,CAAEC,GAAI,CAAC;IAClB;EAAG,GAEH,IAAAsB,MAAA,CAAAC,aAAA,EAAC3B,SAAA,CAAA4B,OAAQ,MAAE,CACJ,CAAC;AAEX,CAAC;AAAC,IAAAO,QAAA,GAAAC,OAAA,CAAAR,OAAA,GACa3B,IAAI","ignoreList":[]}