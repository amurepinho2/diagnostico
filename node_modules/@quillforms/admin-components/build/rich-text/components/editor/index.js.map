{"version":3,"names":["_react","require","_components","_slate","_slateReact","_emotion","_element","_interopRequireDefault","_hoveringToolbar","_mergeTagListItem","TextEditor","props","editor","placeholder","color","onChange","value","onFocus","mergeTags","allowedFormats","wrapperRef","useRef","PopoverRef","ref","target","setTarget","useState","index","setIndex","search","setSearch","$mergeTags","filter","c","label","toLowerCase","startsWith","isFormatActive","format","match","Editor","nodes","n","mode","renderElement","useCallback","createElement","default","toggleFormat","active","Transforms","setNodes","Text","isText","split","Leaf","attributes","children","leaf","bold","italic","insertMergeTag","mergeTag","insertNodes","type","data","modifier","text","setTimeout","move","onKeyDown","event","key","length","preventDefault","prevIndex","nextIndex","select","undefined","useEffect","handleClickOutsidePortal","current","contains","document","addEventListener","removeEventListener","Fragment","className","style","width","Slate","initialValue","val","selection","Range","isCollapsed","start","edges","wordBefore","before","beforeRange","range","beforeText","string","beforeMatch","endsWith","after","afterRange","afterText","afterMatch","formattingControls","Editable","renderLeaf","$props","renderPlaceholder","opacity","height","position","zIndex","onDOMBeforeInput","inputType","Popover","css","map","i","onClick","ReactEditor","focus","onMouseEnter","isSelected","_default","exports"],"sources":["@quillforms/admin-components/src/rich-text/components/editor/index.tsx"],"sourcesContent":["/* eslint-disable no-nested-ternary */\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useCallback, useEffect, useState, useRef } from 'react';\nimport { Popover } from '@wordpress/components';\n\n/**\n * External Dependencies\n */\nimport { Transforms, Text, Editor, Range, Node as SlateNode } from 'slate';\nimport { Slate, Editable, ReactEditor, RenderElementProps } from 'slate-react';\nimport { HistoryEditor } from 'slate-history';\nimport { css } from 'emotion';\n\n/**\n * Internal Dependencies\n */\nimport Element from '../element';\nimport HoveringToolbar from '../hovering-toolbar';\nimport MergeTagListItem from '../merge-tag-list-item';\nimport type {\n\tMergeTags,\n\tMergeTagsSections,\n\tMergeTag,\n\tallowedFormats,\n} from '../../types';\ninterface Props {\n\teditor: ReactEditor & HistoryEditor;\n\tplaceholder?: string;\n\tcolor?: string;\n\tvalue: SlateNode[];\n\tonChange: (value: SlateNode[]) => void;\n\tonFocus: React.FocusEventHandler;\n\tmergeTags?: MergeTags;\n\tmergeTagsSections?: MergeTagsSections;\n\tallowedFormats?: allowedFormats;\n}\nconst TextEditor: React.FC<Props> = (props) => {\n\tconst {\n\t\teditor,\n\t\tplaceholder,\n\t\tcolor,\n\t\tonChange,\n\t\tvalue,\n\t\tonFocus,\n\t\tmergeTags = [],\n\t\t// mergeTagsSections = [\n\t\t// \t{ key: 'field', label: 'Fields' },\n\t\t// \t{ key: 'variable', label: 'Variables' },\n\t\t// \t{ key: 'hidden_field', label: 'Hidden Fields' },\n\t\t// ],\n\t\tallowedFormats = [],\n\t} = props;\n\n\tconst wrapperRef = useRef<HTMLDivElement>(null);\n\tconst PopoverRef = useRef(null);\n\tconst ref = useRef<HTMLDivElement>(null);\n\tconst [target, setTarget] = useState<Range | undefined>();\n\tconst [index, setIndex] = useState(0);\n\tconst [search, setSearch] = useState('');\n\n\tconst $mergeTags = mergeTags.filter((c) => {\n\t\tif (search) {\n\t\t\treturn c.label\n\t\t\t\t?.toLowerCase()\n\t\t\t\t.startsWith(search ? search.toLowerCase() : '');\n\t\t}\n\t\treturn true;\n\t});\n\n\tconst isFormatActive = (format) => {\n\t\tconst [match] = Editor.nodes(editor, {\n\t\t\tmatch: (n) => n[format] === true,\n\t\t\tmode: 'all',\n\t\t});\n\t\treturn !!match;\n\t};\n\n\tconst renderElement = useCallback(props => {\n\t\treturn <Element {...props} editor={editor} mergeTags={mergeTags} />;\n\t}, [mergeTags, value]);\n\n\n\tconst toggleFormat = (editor: Editor, format) => {\n\t\tconst active = isFormatActive(format);\n\t\tTransforms.setNodes(\n\t\t\teditor,\n\t\t\t{ [format]: active ? null : true },\n\t\t\t{ match: Text.isText, split: true }\n\t\t);\n\t};\n\n\tconst Leaf = ({ attributes, children, leaf }) => {\n\t\tif (leaf.bold) {\n\t\t\tchildren = <strong>{children}</strong>;\n\t\t}\n\n\t\tif (leaf.italic) {\n\t\t\tchildren = <em>{children}</em>;\n\t\t}\n\n\t\treturn <span {...attributes}>{children}</span>;\n\t};\n\n\t// Insert Variable\n\tconst insertMergeTag = (mergeTag: MergeTag) => {\n\t\tTransforms.insertNodes(editor, {\n\t\t\ttype: 'mergeTag',\n\t\t\tdata: {\n\t\t\t\ttype: mergeTag.type,\n\t\t\t\tmodifier: mergeTag.modifier,\n\t\t\t},\n\t\t\tchildren: [{ text: '' }],\n\t\t});\n\t\tsetTimeout(() => {\n\t\t\tTransforms.move(editor);\n\t\t}, 0);\n\t};\n\n\tconst onKeyDown = useCallback(\n\t\t(event) => {\n\t\t\tif (event.key === 'Enter' && allowedFormats?.length === 0) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tif (target) {\n\t\t\t\tswitch (event.key) {\n\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tconst prevIndex =\n\t\t\t\t\t\t\tindex >= $mergeTags.length - 1 ? 0 : index + 1;\n\t\t\t\t\t\tsetIndex(prevIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tconst nextIndex =\n\t\t\t\t\t\t\tindex <= 0 ? $mergeTags.length - 1 : index - 1;\n\t\t\t\t\t\tsetIndex(nextIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Tab':\n\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tTransforms.select(editor, target);\n\t\t\t\t\t\tinsertMergeTag($mergeTags[index]);\n\t\t\t\t\t\tsetTarget(undefined);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Escape':\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tsetTarget(undefined);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[index, search, target]\n\t);\n\n\t// useEffect( () => {\n\t// \tif ( target && $mergeTags.length > 0 ) {\n\t// \t\tconst el: HTMLDivElement | null = ref.current;\n\t// \t\tconst domRange = ReactEditor.toDOMRange( editor, target );\n\t// \t\tconst rect = domRange.getBoundingClientRect();\n\t// \t\tif ( el ) {\n\t// \t\t\tel.style.top = `${ rect.top + window.pageYOffset + 24 }px`;\n\t// \t\t\tel.style.left = `${ rect.left + window.pageXOffset }px`;\n\t// \t\t}\n\t// \t}\n\t// }, [ $mergeTags.length, editor, index, search, target ] );\n\n\tuseEffect(() => {\n\t\t/**\n\t\t * Alert if clicked on outside of element\n\t\t *\n\t\t * @param  event\n\t\t */\n\t\tfunction handleClickOutsidePortal(event: MouseEvent): void {\n\t\t\tif (\n\t\t\t\tPopoverRef.current &&\n\t\t\t\tref.current &&\n\t\t\t\t// @ts-expect-error\n\t\t\t\t!PopoverRef.current.contains(event.target as Node) &&\n\t\t\t\t!ref.current.contains(event.target as Node)\n\t\t\t) {\n\t\t\t\tsetTarget(undefined);\n\t\t\t}\n\t\t}\n\n\t\t// Bind the event listener\n\t\tdocument.addEventListener('mousedown', handleClickOutsidePortal);\n\t\treturn () => {\n\t\t\t// Unbind the event listener on clean up\n\t\t\tdocument.removeEventListener(\n\t\t\t\t'mousedown',\n\t\t\t\thandleClickOutsidePortal\n\t\t\t);\n\t\t};\n\t}, [PopoverRef]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div\n\t\t\t\tclassName=\"richtext__editor\"\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tref={wrapperRef}\n\t\t\t>\n\t\t\t\t<Slate\n\t\t\t\t\teditor={editor}\n\t\t\t\t\tinitialValue={value}\n\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\tonChange(val);\n\t\t\t\t\t\tconst { selection } = editor;\n\n\t\t\t\t\t\tif (selection && Range.isCollapsed(selection)) {\n\t\t\t\t\t\t\tconst [start] = Range.edges(selection);\n\t\t\t\t\t\t\tconst wordBefore = selection;\n\t\t\t\t\t\t\tconst before =\n\t\t\t\t\t\t\t\twordBefore &&\n\t\t\t\t\t\t\t\tEditor.before(editor, wordBefore);\n\t\t\t\t\t\t\tconst beforeRange =\n\t\t\t\t\t\t\t\tbefore && Editor.range(editor, before, start);\n\t\t\t\t\t\t\tconst beforeText =\n\t\t\t\t\t\t\t\tbeforeRange &&\n\t\t\t\t\t\t\t\tEditor.string(editor, beforeRange);\n\t\t\t\t\t\t\tconst beforeMatch =\n\t\t\t\t\t\t\t\tbeforeText && beforeText.endsWith('@');\n\t\t\t\t\t\t\tconst after = Editor.after(editor, start);\n\t\t\t\t\t\t\tconst afterRange = Editor.range(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tafter\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst afterText = Editor.string(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\tafterRange\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst afterMatch = afterText.match(/^(\\s|$)/);\n\n\t\t\t\t\t\t\tif (beforeMatch && afterMatch) {\n\t\t\t\t\t\t\t\tsetTarget(beforeRange);\n\t\t\t\t\t\t\t\tsetSearch(beforeMatch[1]);\n\t\t\t\t\t\t\t\tsetIndex(0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetTarget(undefined);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{allowedFormats?.length > 0 && (\n\t\t\t\t\t\t<HoveringToolbar\n\t\t\t\t\t\t\tformattingControls={allowedFormats}\n\t\t\t\t\t\t\ttoggleFormat={(format) =>\n\t\t\t\t\t\t\t\ttoggleFormat(editor, format)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisFormatActive={(format) =>\n\t\t\t\t\t\t\t\tisFormatActive(format)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<Editable\n\t\t\t\t\t\tstyle={{ color }}\n\t\t\t\t\t\tcolor={color}\n\t\t\t\t\t\trenderLeaf={($props) => <Leaf {...$props} />}\n\t\t\t\t\t\trenderElement={renderElement}\n\t\t\t\t\t\trenderPlaceholder={({ attributes, children }) => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t{...attributes}\n\t\t\t\t\t\t\t\t\tstyle={{ opacity: 0, height: 0, position: \"relative\", zIndex: -1 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div {...attributes}>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\tonDOMBeforeInput={(event: Event) => {\n\t\t\t\t\t\t\tswitch ((event as InputEvent).inputType) {\n\t\t\t\t\t\t\t\tcase 'formatBold':\n\t\t\t\t\t\t\t\t\treturn toggleFormat(editor, 'bold');\n\t\t\t\t\t\t\t\tcase 'formatItalic':\n\t\t\t\t\t\t\t\t\treturn toggleFormat(editor, 'italic');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{target && $mergeTags.length > 0 && (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tref={PopoverRef}\n\t\t\t\t\t\t\tclassName={css`\n\t\t\t\t\t\t\t\tz-index: 1111111111111111111;\n\t\t\t\t\t\t\t\t.components-popover__content {\n\t\t\t\t\t\t\t\t\tpadding: 3px;\n\t\t\t\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\t\t\t\tbox-shadow: 0 1px 5px rgba( 0, 0, 0, 0.2 );\n\t\t\t\t\t\t\t\t\tz-index: 111111111111111111;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t` }\n\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={css`\n\t\t\t\t\t\t\t\t\tpadding: 5px 25px;\n\t\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\t` }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecall Information from...\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"rich-text-merge-tag-list\"\n\t\t\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$mergeTags.map((mergeTag, i) => (\n\t\t\t\t\t\t\t\t\t<MergeTagListItem\n\t\t\t\t\t\t\t\t\t\tkey={`merge-tag-${i}`}\n\t\t\t\t\t\t\t\t\t\tmergeTag={mergeTag}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tTransforms.select(editor, target);\n\t\t\t\t\t\t\t\t\t\t\tinsertMergeTag(mergeTag);\n\t\t\t\t\t\t\t\t\t\t\tReactEditor.focus(editor);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setIndex(i)}\n\t\t\t\t\t\t\t\t\t\tisSelected={index === i}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t)}\n\t\t\t\t</Slate>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n};\n\n/**\n * Export.\n */\nexport default TextEditor;\n"],"mappings":"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","ignoreList":[]}