{"version":3,"names":["_react","require","_reactDom","_emotion","_slateReact","_slate","_link","_interopRequireDefault","_formatButton","_boldIcon","_italicIcon","Menu","forwardRef","className","props","ref","createElement","cx","css","HoveringToolbar","toggleFormat","isFormatActive","formattingControls","useRef","editor","useSlate","inFocus","useFocused","useEffect","el","current","selection","Range","isCollapsed","Editor","string","removeAttribute","domSelection","window","getSelection","domRange","getRangeAt","rect","getBoundingClientRect","style","opacity","top","pageYOffset","offsetHeight","left","pageXOffset","offsetWidth","width","createPortal","includes","default","format","document","body","_default","exports"],"sources":["@quillforms/admin-components/src/rich-text/components/hovering-toolbar/index.tsx"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useRef, useEffect, forwardRef } from 'react';\nimport { createPortal } from 'react-dom';\n\n/**\n * External Dependencies\n */\nimport { cx, css } from 'emotion';\nimport { useSlate, useFocused } from 'slate-react';\nimport { Editor, Range } from 'slate';\n\n/**\n * Internal Dependencies\n */\nimport Link from '../link';\nimport FormatButton from '../format-button';\nimport FormatBoldIcon from './bold-icon';\nimport FormatItalicIcon from './italic-icon';\ninterface Props {\n\tclassName: string;\n\t[ key: string ]: unknown;\n}\n\nconst Menu = forwardRef< HTMLDivElement, React.PropsWithChildren< Props > >(\n\t( { className, ...props }, ref ) => (\n\t\t<div\n\t\t\t{ ...props }\n\t\t\tref={ ref }\n\t\t\tclassName={ cx(\n\t\t\t\tclassName,\n\t\t\t\tcss`\n\t\t\t\t\t& > * {\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t}\n\t\t\t\t\t& > * + * {\n\t\t\t\t\t\tmargin-left: 15px;\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t\t) }\n\t\t/>\n\t)\n);\n\nconst HoveringToolbar = ( {\n\ttoggleFormat,\n\tisFormatActive,\n\tformattingControls,\n} ) => {\n\tconst ref = useRef< HTMLDivElement | null >( null );\n\tconst editor = useSlate();\n\tconst inFocus = useFocused();\n\tuseEffect( () => {\n\t\tconst el = ref.current;\n\t\tconst { selection } = editor;\n\n\t\tif ( ! el ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t! selection ||\n\t\t\t! inFocus ||\n\t\t\tRange.isCollapsed( selection ) ||\n\t\t\tEditor.string( editor, selection ) === ''\n\t\t) {\n\t\t\tel.removeAttribute( 'style' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst domSelection = window.getSelection();\n\t\tconst domRange = domSelection?.getRangeAt( 0 );\n\t\tconst rect = domRange?.getBoundingClientRect();\n\t\tel.style.opacity = '1';\n\t\tif ( rect ) {\n\t\t\tel.style.top = `${\n\t\t\t\trect.top + window.pageYOffset - el.offsetHeight\n\t\t\t}px`;\n\t\t\tel.style.left = `${\n\t\t\t\trect.left +\n\t\t\t\twindow.pageXOffset -\n\t\t\t\tel.offsetWidth / 2 +\n\t\t\t\trect.width / 2\n\t\t\t}px`;\n\t\t}\n\t} );\n\n\treturn createPortal(\n\t\t<Menu\n\t\t\tref={ ref }\n\t\t\tclassName={ css`\n\t\t\t\tpadding: 8px 7px 6px;\n\t\t\t\tposition: absolute;\n\t\t\t\tz-index: 1;\n\t\t\t\ttop: -10000px;\n\t\t\t\tleft: -10000px;\n\t\t\t\tmargin-top: -6px;\n\t\t\t\topacity: 0;\n\t\t\t\tbackground-color: #222;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\ttransition: opacity 0.75s;\n\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t}\n\t\t\t` }\n\t\t>\n\t\t\t{ !! formattingControls && formattingControls.includes( 'bold' ) && (\n\t\t\t\t<FormatButton\n\t\t\t\t\tformat=\"bold\"\n\t\t\t\t\ttoggleFormat={ () => toggleFormat( 'bold' ) }\n\t\t\t\t\tisFormatActive={ () => isFormatActive( 'bold' ) }\n\t\t\t\t>\n\t\t\t\t\t<FormatBoldIcon />\n\t\t\t\t</FormatButton>\n\t\t\t) }\n\t\t\t{ !! formattingControls &&\n\t\t\t\tformattingControls.includes( 'italic' ) && (\n\t\t\t\t\t<FormatButton\n\t\t\t\t\t\tformat=\"italic\"\n\t\t\t\t\t\ttoggleFormat={ () => toggleFormat( 'italic' ) }\n\t\t\t\t\t\tisFormatActive={ () => isFormatActive( 'italic' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormatItalicIcon />\n\t\t\t\t\t</FormatButton>\n\t\t\t\t) }\n\t\t\t{ !! formattingControls &&\n\t\t\t\tformattingControls.includes( 'link' ) && (\n\t\t\t\t\t<Link editor={ editor } />\n\t\t\t\t) }\n\t\t</Menu>,\n\t\tdocument.body\n\t);\n};\nexport default HoveringToolbar;\n"],"mappings":"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","ignoreList":[]}