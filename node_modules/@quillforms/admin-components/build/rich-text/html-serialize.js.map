{"version":3,"names":["_autop","require","_escapeHtml","_interopRequireDefault","_slate","_lodash","htmlSerialize","value","removep","serialize","node","nodeText","escapeHtml","text","Text","isText","bold","italic","Array","isArray","map","subNode","serializeNode","join","children","size","n","type","url","data","modifier","_default","exports","default"],"sources":["@quillforms/admin-components/src/rich-text/html-serialize.ts"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { removep } from '@wordpress/autop';\n\n/**\n * External Dependencies\n */\nimport escapeHtml from 'escape-html';\nimport { Text, Node } from 'slate';\n\n/**\n * Internal Dependencies\n */\nimport type { CustomNode, MergeTag } from './types';\nimport { size } from 'lodash';\nconst htmlSerialize = ( value: Node ): string => {\n\treturn removep( serialize( value ) );\n};\nconst serialize = ( node: CustomNode ) => {\n\tlet nodeText = escapeHtml( node.text );\n\tif ( Text.isText( node ) ) {\n\t\tif ( node.bold ) {\n\t\t\tnodeText = `<strong>` + nodeText + `</strong>`;\n\t\t}\n\n\t\tif ( node.italic ) {\n\t\t\tnodeText = `<em>` + nodeText + `</em>`;\n\t\t}\n\n\t\tif ( nodeText === '' ) {\n\t\t\treturn '<br />';\n\t\t}\n\n\t\treturn nodeText;\n\t}\n\n\tif ( Array.isArray( node ) ) {\n\t\treturn node\n\t\t\t.map( ( subNode ) => {\n\t\t\t\treturn serializeNode( subNode );\n\t\t\t} )\n\t\t\t.join( '' );\n\t}\n\n\treturn serializeNode( node );\n};\n\nconst serializeNode = ( node: CustomNode ) => {\n\tconst children =\n\t\tsize( node.children ) > 0\n\t\t\t? node.children.map( ( n ) => serialize( n ) ).join( '' )\n\t\t\t: '';\n\tswitch ( node.type ) {\n\t\tcase 'link':\n\t\t\treturn `<a target=\"_blank\" href=\"${ escapeHtml(\n\t\t\t\tnode.url\n\t\t\t) }\">${ children }</a>`;\n\t\tcase 'mergeTag':\n\t\t\treturn `{{${ ( node.data as MergeTag ).type }:${\n\t\t\t\t( node.data as MergeTag ).modifier\n\t\t\t}}}`;\n\t\tcase 'paragraph':\n\t\t\treturn `<p>${ children }</p>`;\n\t\tdefault:\n\t\t\treturn `${ children }`;\n\t}\n};\n\nexport default htmlSerialize;\n"],"mappings":";;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AAKA,IAAAC,WAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAMA,IAAAI,OAAA,GAAAJ,OAAA;AAfA;AACA;AACA;;AAGA;AACA;AACA;;AASA,MAAMK,aAAa,GAAKC,KAAW,IAAc;EAChD,OAAO,IAAAC,cAAO,EAAEC,SAAS,CAAEF,KAAM,CAAE,CAAC;AACrC,CAAC;AACD,MAAME,SAAS,GAAKC,IAAgB,IAAM;EACzC,IAAIC,QAAQ,GAAG,IAAAC,mBAAU,EAAEF,IAAI,CAACG,IAAK,CAAC;EACtC,IAAKC,WAAI,CAACC,MAAM,CAAEL,IAAK,CAAC,EAAG;IAC1B,IAAKA,IAAI,CAACM,IAAI,EAAG;MAChBL,QAAQ,GAAI,UAAS,GAAGA,QAAQ,GAAI,WAAU;IAC/C;IAEA,IAAKD,IAAI,CAACO,MAAM,EAAG;MAClBN,QAAQ,GAAI,MAAK,GAAGA,QAAQ,GAAI,OAAM;IACvC;IAEA,IAAKA,QAAQ,KAAK,EAAE,EAAG;MACtB,OAAO,QAAQ;IAChB;IAEA,OAAOA,QAAQ;EAChB;EAEA,IAAKO,KAAK,CAACC,OAAO,CAAET,IAAK,CAAC,EAAG;IAC5B,OAAOA,IAAI,CACTU,GAAG,CAAIC,OAAO,IAAM;MACpB,OAAOC,aAAa,CAAED,OAAQ,CAAC;IAChC,CAAE,CAAC,CACFE,IAAI,CAAE,EAAG,CAAC;EACb;EAEA,OAAOD,aAAa,CAAEZ,IAAK,CAAC;AAC7B,CAAC;AAED,MAAMY,aAAa,GAAKZ,IAAgB,IAAM;EAC7C,MAAMc,QAAQ,GACb,IAAAC,YAAI,EAAEf,IAAI,CAACc,QAAS,CAAC,GAAG,CAAC,GACtBd,IAAI,CAACc,QAAQ,CAACJ,GAAG,CAAIM,CAAC,IAAMjB,SAAS,CAAEiB,CAAE,CAAE,CAAC,CAACH,IAAI,CAAE,EAAG,CAAC,GACvD,EAAE;EACN,QAASb,IAAI,CAACiB,IAAI;IACjB,KAAK,MAAM;MACV,OAAQ,4BAA4B,IAAAf,mBAAU,EAC7CF,IAAI,CAACkB,GACN,CAAG,KAAKJ,QAAU,MAAK;IACxB,KAAK,UAAU;MACd,OAAQ,KAAOd,IAAI,CAACmB,IAAI,CAAeF,IAAM,IAC1CjB,IAAI,CAACmB,IAAI,CAAeC,QAC1B,IAAG;IACL,KAAK,WAAW;MACf,OAAQ,MAAMN,QAAU,MAAK;IAC9B;MACC,OAAQ,GAAGA,QAAU,EAAC;EACxB;AACD,CAAC;AAAC,IAAAO,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa3B,aAAa","ignoreList":[]}