{"version":3,"names":["_react","require","_blocks","_components","_icons","_data","_classnames","_interopRequireDefault","_emotion","_tinycolor","areEqual","prevProps","nextProps","disabled","BlockTypesListItem","memo","blockName","index","disableAnimation","destinationIndex","parent","isMounted","setIsMounted","useState","useEffect","setTimeout","blockType","useSelect","select","getBlockType","icon","src","blockDefault","plus","renderedIcon","createElement","Icon","insertEmptyFieldAnswer","useDispatch","__experimentalInsertBlock","setCurrentBlock","generateBlockId","Math","random","toString","substr","createBlock","name","attributes","id","sanitizeBlockAttributes","onClick","e","stopPropagation","blockToInsert","supports","editable","document","querySelector","getElementById","scrollIntoView","behavior","className","classNames","css","tinycolor","color","setAlpha","mounted","style","backgroundColor","title","_default","exports","default"],"sources":["@quillforms/admin-components/src/block-types-list-item/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/**\n * QuillForms Dependencies\n */\nimport type {\n\tIconDescriptor,\n\tFormBlock,\n\tIcon as IconType,\n} from '@quillforms/types';\nimport { sanitizeBlockAttributes } from '@quillforms/blocks';\n\n/**\n * WordPress Dependencies\n */\nimport { memo, useState, useEffect } from 'react';\n// @ts-expect-error\nimport { Icon, Dashicon } from '@wordpress/components';\nimport { blockDefault, plus } from '@wordpress/icons';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { FC } from 'react';\n\n/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { css } from 'emotion';\nimport tinycolor from 'tinycolor2';\n\nconst areEqual = (prevProps: Props, nextProps: Props): boolean => {\n\tif (prevProps.disabled === nextProps.disabled) return true;\n\treturn false;\n};\ninterface Props {\n\tdisabled: boolean;\n\tblockName: string;\n\tindex: number;\n\tdisableAnimation?: boolean;\n\tdestinationIndex: number;\n\tparent?: string;\n}\nconst BlockTypesListItem: FC<Props> = memo(\n\t({\n\t\tdisabled,\n\t\tblockName,\n\t\tindex,\n\t\tdisableAnimation,\n\t\tdestinationIndex,\n\t\tparent,\n\t}) => {\n\t\tconst [isMounted, setIsMounted] = useState(false);\n\n\t\tuseEffect(() => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetIsMounted(true);\n\t\t\t}, 50);\n\t\t}, []);\n\t\tconst { blockType } = useSelect((select) => {\n\t\t\treturn {\n\t\t\t\tblockType:\n\t\t\t\t\tselect('quillForms/blocks').getBlockType(blockName),\n\t\t\t};\n\t\t});\n\n\t\tif (!blockType) return null;\n\t\tlet { icon } = blockType;\n\t\tif ((icon as IconDescriptor)?.src === 'block-default') {\n\t\t\ticon = {\n\t\t\t\tsrc: blockDefault,\n\t\t\t};\n\t\t}\n\t\tif (!icon) icon = plus;\n\t\tconst renderedIcon = (\n\t\t\t<Icon\n\t\t\t\ticon={\n\t\t\t\t\t((icon as IconDescriptor).src as IconType)\n\t\t\t\t\t\t? ((icon as IconDescriptor).src as IconType)\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t: (icon as Dashicon.Icon)\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t\tconst { insertEmptyFieldAnswer } = useDispatch(\n\t\t\t'quillForms/renderer-core'\n\t\t);\n\t\tconst { __experimentalInsertBlock, setCurrentBlock } = useDispatch(\n\t\t\t'quillForms/block-editor'\n\t\t);\n\t\tconst generateBlockId = (): string => {\n\t\t\treturn Math.random().toString(36).substr(2, 9);\n\t\t};\n\n\t\t/**\n\t\t * Returns a block object given its type and attributes.\n\t\t *\n\t\t * @param {string} name       Block name.\n\t\t * @param {Object} attributes Block attributes.\n\t\t *\n\t\t * @throws {Error} If the block type isn't registered.\n\t\t * @return {Object?} Block object.\n\t\t */\n\t\tconst createBlock = (\n\t\t\tname: string,\n\t\t\tattributes: Record<string, unknown> = {}\n\t\t): FormBlock | void => {\n\t\t\t// Blocks are stored with a unique ID, the assigned type name, the block\n\t\t\t// attributes.\n\t\t\treturn {\n\t\t\t\tid: generateBlockId(),\n\t\t\t\tname,\n\t\t\t\tattributes: sanitizeBlockAttributes(name, attributes),\n\t\t\t};\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\tif (disabled) return;\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst blockToInsert = createBlock(blockName);\n\t\t\t\t\tif (blockToInsert) {\n\t\t\t\t\t\t// blockToInsert.id = generateBlockId();\n\t\t\t\t\t\tif (blockType.supports.editable)\n\t\t\t\t\t\t\tinsertEmptyFieldAnswer(\n\t\t\t\t\t\t\t\tblockToInsert.id,\n\t\t\t\t\t\t\t\tblockName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t__experimentalInsertBlock(\n\t\t\t\t\t\t\tblockToInsert,\n\t\t\t\t\t\t\tdestinationIndex,\n\t\t\t\t\t\t\tparent\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!document.querySelector(\n\t\t\t\t\t\t\t\t\t`#block-editor-box-wrapper-${blockToInsert.id} .block-editor-block-edit`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetCurrentBlock(blockToInsert.id);\n\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t?.getElementById(\n\t\t\t\t\t\t\t\t\t\t`block-editor-box-wrapper-${blockToInsert.id}`\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t?.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 80);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'admin-components-blocks-list-item',\n\t\t\t\t\tcss`\n\t\t\t\t\t\t&:not( .animation-disabled ) {\n\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\ttransform: translateX( -15px );\n\t\t\t\t\t\t\ttransition: transform 0.3s ease ${index * 0.1}s,\n\t\t\t\t\t\t\t\topacity 0.3s ease ${index * 0.1}s;\n\n\t\t\t\t\t\t\t&.mounted {\n\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\ttransform: scale( 1 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tbackground: ${tinycolor(blockType?.color)\n\t\t\t\t\t\t\t.setAlpha(0.1)\n\t\t\t\t\t\t\t.toString()};\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\t\t{\n\t\t\t\t\t\tdisabled: disabled ? true : false,\n\t\t\t\t\t\tmounted: isMounted,\n\t\t\t\t\t\t'animation-disabled': disableAnimation,\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"admin-components-blocks-list-item__icon-wrapper\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: blockType?.color\n\t\t\t\t\t\t\t? blockType.color\n\t\t\t\t\t\t\t: '#bb426f',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"admin-components-blocks-list-item__icon\">\n\t\t\t\t\t\t{renderedIcon}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span className=\"admin-components-blocks-list-item__block-name\">\n\t\t\t\t\t{blockType?.title}\n\t\t\t\t</span>\n\t\t\t\t{(blockType?.name === 'group' || blockType?.name === 'slider') && (\n\t\t\t\t\t<div className=\"admin-components-control-label__new-feature\">\n\t\t\t\t\t\tNEW\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t},\n\tareEqual\n);\n\nexport default BlockTypesListItem;\n"],"mappings":"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","ignoreList":[]}