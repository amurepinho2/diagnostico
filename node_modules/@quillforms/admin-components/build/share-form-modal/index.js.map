{"version":3,"names":["_react","require","_data","_apiFetch","_interopRequireDefault","_url","_components","_emotion","_classnames","_linkPlaceholder","ShareFormModal","formId","closeModal","isFetching","setIsFetching","useState","permalink","setPermalink","hiddenFields","useSelect","select","_select$getHiddenFiel","getHiddenFields","useEffect","apiFetch","path","addQueryArgs","_fields","then","res","link","length","query","hash","field","includes","name","Object","keys","buildQueryString","createElement","Modal","className","classnames","css","title","onRequestClose","default","href","target","rel","_default","exports"],"sources":["@quillforms/admin-components/src/share-form-modal/index.tsx"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useEffect, useState } from 'react';\nimport { useSelect } from '@wordpress/data';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs, buildQueryString } from '@wordpress/url';\nimport { Modal } from '@wordpress/components';\n\n/**\n * External Dependencies\n */\n\nimport { css } from 'emotion';\nimport classnames from 'classnames';\n\n/**\n * Internal Dependencies\n */\nimport LinkPlaceholder from './link-placeholder';\n\ninterface Props {\n\tformId: number;\n\tcloseModal: () => void;\n}\nconst ShareFormModal: React.FC< Props > = ( { formId, closeModal } ) => {\n\tconst [ isFetching, setIsFetching ] = useState( true );\n\tconst [ permalink, setPermalink ] = useState( '' );\n\tconst { hiddenFields } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\thiddenFields:\n\t\t\t\tselect(\n\t\t\t\t\t'quillForms/hidden-fields-editor'\n\t\t\t\t\t//@ts-expect-error\n\t\t\t\t)?.getHiddenFields() ?? [],\n\t\t};\n\t} );\n\n\t// Invalidate resolution for entity record on unmount\n\tuseEffect( () => {\n\t\tapiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/quill_forms/${ formId }`, {\n\t\t\t\t_fields: [ 'link' ],\n\t\t\t} ),\n\t\t} ).then( ( res ) => {\n\t\t\tsetIsFetching( false );\n\t\t\t//@ts-expect-error\n\t\t\tsetPermalink( res.link );\n\t\t} );\n\t}, [] );\n\n\tlet link = permalink;\n\tif ( hiddenFields.length > 0 ) {\n\t\tconst query = {};\n\t\tconst hash = {};\n\t\tfor ( const field of hiddenFields ) {\n\t\t\tif (\n\t\t\t\t[\n\t\t\t\t\t'utm_source',\n\t\t\t\t\t'utm_medium',\n\t\t\t\t\t'utm_campaign',\n\t\t\t\t\t'utm_term',\n\t\t\t\t\t'utm_content',\n\t\t\t\t].includes( field.name )\n\t\t\t) {\n\t\t\t\tquery[ field.name ] = 'xxxxx';\n\t\t\t} else {\n\t\t\t\thash[ field.name ] = 'xxxxx';\n\t\t\t}\n\t\t}\n\t\tif ( Object.keys( query ).length ) {\n\t\t\tlink += '?' + buildQueryString( query );\n\t\t}\n\t\tif ( Object.keys( hash ).length ) {\n\t\t\tlink += '#' + buildQueryString( hash );\n\t\t}\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName={ classnames(\n\t\t\t\tcss`\n\t\t\t\t\tborder: none !important;\n\t\t\t\t\tmin-width: 420px !important;\n\t\t\t\t\tmax-width: 470px !important;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tz-index: 1111111;\n\t\t\t\t`\n\t\t\t) }\n\t\t\ttitle=\"Share form\"\n\t\t\tonRequestClose={ closeModal }\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'admin-components-share-form-modal__link',\n\t\t\t\t\tcss`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t\t`\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\tmargin-bottom: 6px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t` }\n\t\t\t\t>\n\t\t\t\t\tLink\n\t\t\t\t</div>\n\t\t\t\t{ isFetching ? (\n\t\t\t\t\t<LinkPlaceholder />\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\t\tpadding: 8px;\n\t\t\t\t\t\t\tbackground: #eeeeee;\n\t\t\t\t\t\t` }\n\t\t\t\t\t>\n\t\t\t\t\t\t<a href={ link } target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t{ link }\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'admin-components-share-form-modal__shortcode',\n\t\t\t\t\tcss`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t\t`\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\tmargin-bottom: 6px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t` }\n\t\t\t\t>\n\t\t\t\t\tShortcode\n\t\t\t\t</div>\n\t\t\t\t{ isFetching ? (\n\t\t\t\t\t<LinkPlaceholder />\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\t\tpadding: 8px;\n\t\t\t\t\t\t\tbackground: #eeeeee;\n\t\t\t\t\t\t` }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ `[quillforms id=\"${ formId }\" width=\"100%\"]` }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'admin-components-share-form-modal__embed',\n\t\t\t\t\tcss`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t\t`\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\tmargin-bottom: 6px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t` }\n\t\t\t\t>\n\t\t\t\t\tEmbed\n\t\t\t\t</div>\n\t\t\t\t{ isFetching ? (\n\t\t\t\t\t<LinkPlaceholder />\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ css`\n\t\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\t\tpadding: 8px;\n\t\t\t\t\t\t\tbackground: #eeeeee;\n\t\t\t\t\t\t` }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ `<iframe src=\"${ link }\" width=\"100%\" height=\"600\" style=\"border:0;\"></iframe>` }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</Modal>\n\t);\n};\n\nexport default ShareFormModal;\n"],"mappings":";;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,IAAA,GAAAJ,OAAA;AACA,IAAAK,WAAA,GAAAL,OAAA;AAMA,IAAAM,QAAA,GAAAN,OAAA;AACA,IAAAO,WAAA,GAAAJ,sBAAA,CAAAH,OAAA;AAKA,IAAAQ,gBAAA,GAAAL,sBAAA,CAAAH,OAAA;AAnBA;AACA;AACA;;AAOA;AACA;AACA;;AAKA;AACA;AACA;;AAOA,MAAMS,cAAiC,GAAGA,CAAE;EAAEC,MAAM;EAAEC;AAAW,CAAC,KAAM;EACvE,MAAM,CAAEC,UAAU,EAAEC,aAAa,CAAE,GAAG,IAAAC,eAAQ,EAAE,IAAK,CAAC;EACtD,MAAM,CAAEC,SAAS,EAAEC,YAAY,CAAE,GAAG,IAAAF,eAAQ,EAAE,EAAG,CAAC;EAClD,MAAM;IAAEG;EAAa,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IAAA,IAAAC,qBAAA;IACjD,OAAO;MACNH,YAAY,GAAAG,qBAAA,GACXD,MAAM,CACL;MACA;MACD,CAAC,EAAEE,eAAe,CAAC,CAAC,cAAAD,qBAAA,cAAAA,qBAAA,GAAI;IAC1B,CAAC;EACF,CAAE,CAAC;;EAEH;EACA,IAAAE,gBAAS,EAAE,MAAM;IAChB,IAAAC,iBAAQ,EAAE;MACTC,IAAI,EAAE,IAAAC,iBAAY,EAAG,sBAAsBf,MAAQ,EAAC,EAAE;QACrDgB,OAAO,EAAE,CAAE,MAAM;MAClB,CAAE;IACH,CAAE,CAAC,CAACC,IAAI,CAAIC,GAAG,IAAM;MACpBf,aAAa,CAAE,KAAM,CAAC;MACtB;MACAG,YAAY,CAAEY,GAAG,CAACC,IAAK,CAAC;IACzB,CAAE,CAAC;EACJ,CAAC,EAAE,EAAG,CAAC;EAEP,IAAIA,IAAI,GAAGd,SAAS;EACpB,IAAKE,YAAY,CAACa,MAAM,GAAG,CAAC,EAAG;IAC9B,MAAMC,KAAK,GAAG,CAAC,CAAC;IAChB,MAAMC,IAAI,GAAG,CAAC,CAAC;IACf,KAAM,MAAMC,KAAK,IAAIhB,YAAY,EAAG;MACnC,IACC,CACC,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,UAAU,EACV,aAAa,CACb,CAACiB,QAAQ,CAAED,KAAK,CAACE,IAAK,CAAC,EACvB;QACDJ,KAAK,CAAEE,KAAK,CAACE,IAAI,CAAE,GAAG,OAAO;MAC9B,CAAC,MAAM;QACNH,IAAI,CAAEC,KAAK,CAACE,IAAI,CAAE,GAAG,OAAO;MAC7B;IACD;IACA,IAAKC,MAAM,CAACC,IAAI,CAAEN,KAAM,CAAC,CAACD,MAAM,EAAG;MAClCD,IAAI,IAAI,GAAG,GAAG,IAAAS,qBAAgB,EAAEP,KAAM,CAAC;IACxC;IACA,IAAKK,MAAM,CAACC,IAAI,CAAEL,IAAK,CAAC,CAACF,MAAM,EAAG;MACjCD,IAAI,IAAI,GAAG,GAAG,IAAAS,qBAAgB,EAAEN,IAAK,CAAC;IACvC;EACD;EAEA,OACC,IAAAjC,MAAA,CAAAwC,aAAA,EAAClC,WAAA,CAAAmC,KAAK;IACLC,SAAS,EAAG,IAAAC,mBAAU,EACrB,IAAAC,YAAG,CAAC;AACR;AACA;AACA;AACA;AACA;AACA,KACG,CAAG;IACHC,KAAK,EAAC,YAAY;IAClBC,cAAc,EAAGlC;EAAY,GAE7B,IAAAZ,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAC,mBAAU,EACrB,yCAAyC,EACzC,IAAAC,YAAG,CAAC;AACT;AACA;AACA;AACA,MACI;EAAG,GAEH,IAAA5C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACrB;AACA;AACA;EAAQ,GACH,MAEI,CAAC,EACJ/B,UAAU,GACX,IAAAb,MAAA,CAAAwC,aAAA,EAAC/B,gBAAA,CAAAsC,OAAe,MAAE,CAAC,GAEnB,IAAA/C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACtB;AACA;AACA;AACA;EAAS,GAEH,IAAA5C,MAAA,CAAAwC,aAAA;IAAGQ,IAAI,EAAGlB,IAAM;IAACmB,MAAM,EAAC,QAAQ;IAACC,GAAG,EAAC;EAAY,GAC9CpB,IACA,CACC,CAEF,CAAC,EACN,IAAA9B,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAC,mBAAU,EACrB,8CAA8C,EAC9C,IAAAC,YAAG,CAAC;AACT;AACA;AACA;AACA,MACI;EAAG,GAEH,IAAA5C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACrB;AACA;AACA;EAAQ,GACH,WAEI,CAAC,EACJ/B,UAAU,GACX,IAAAb,MAAA,CAAAwC,aAAA,EAAC/B,gBAAA,CAAAsC,OAAe,MAAE,CAAC,GAEnB,IAAA/C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACtB;AACA;AACA;AACA;EAAS,GAEA,mBAAmBjC,MAAQ,iBAC1B,CAEF,CAAC,EACN,IAAAX,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAC,mBAAU,EACrB,0CAA0C,EAC1C,IAAAC,YAAG,CAAC;AACT;AACA;AACA;AACA,MACI;EAAG,GAEH,IAAA5C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACrB;AACA;AACA;EAAQ,GACH,OAEI,CAAC,EACJ/B,UAAU,GACX,IAAAb,MAAA,CAAAwC,aAAA,EAAC/B,gBAAA,CAAAsC,OAAe,MAAE,CAAC,GAEnB,IAAA/C,MAAA,CAAAwC,aAAA;IACCE,SAAS,EAAG,IAAAE,YAAG,CAAC;AACtB;AACA;AACA;AACA;EAAS,GAEA,gBAAgBd,IAAM,yDACrB,CAEF,CACC,CAAC;AAEV,CAAC;AAAC,IAAAqB,QAAA,GAAAC,OAAA,CAAAL,OAAA,GAEarC,cAAc","ignoreList":[]}