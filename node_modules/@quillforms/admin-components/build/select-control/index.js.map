{"version":3,"names":["_react","require","_downshift","_classnames","_interopRequireDefault","_icons","_i18n","_reactDom","_components","itemToString","item","name","span","document","createElement","render","tmp","appendChild","children","innerText","undefined","stateReducer","selectedItem","type","changes","props","items","useSelect","stateChangeTypes","ToggleButtonKeyDownArrowDown","Math","min","indexOf","length","ToggleButtonKeyDownArrowUp","max","SelectControl","__next36pxDefaultSize","className","hideLabelFromVision","label","describedBy","options","onChange","onSelectedItemChange","value","_selectedItem","getLabelProps","getToggleButtonProps","getMenuProps","getItemProps","isOpen","highlightedIndex","initialSelectedItem","getDescribedBy","__","sprintf","menuProps","onKeyDownHandler","useCallback","e","stopPropagation","onKeyDown","startsWith","classnames","VisuallyHidden","as","Button","Icon","icon","chevronDown","size","map","index","key","__experimentalHint","style","check","_default","exports","default"],"sources":["@quillforms/admin-components/src/select-control/index.tsx"],"sourcesContent":["// Forked from @WordPress/components and added a feature of supporting item labels as React components.\n/**\n * External dependencies\n */\nimport { useSelect } from 'downshift';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Icon, check, chevronDown } from '@wordpress/icons';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback } from 'react';\nimport { render } from 'react-dom';\n\n/**\n * Internal dependencies\n */\nimport {\n\tButton,\n\tVisuallyHidden,\n} from '@wordpress/components';\n\nconst itemToString = (item) => {\n\tif (item?.name) {\n\t\tif (typeof item.name === 'string') {\n\t\t\treturn item.name;\n\t\t}\n\t\tconst span = document.createElement('span');\n\t\trender(item.name, span);\n\t\tconst tmp = document.createElement('div');\n\t\ttmp.appendChild(span);\n\t\t// @ts-expect-error\n\t\treturn tmp.children[0]?.innerText;\n\t\t// var div = document.createElement( 'div' );\n\t\t// div.innerHTML = reactToHtmlString;\n\t\t// return div.textContent || div.innerText || '';\n\t}\n\treturn undefined;\n};\n// This is needed so that in Windows, where\n// the menu does not necessarily open on\n// key up/down, you can still switch between\n// options with the menu closed.\nconst stateReducer = (\n\t{ selectedItem },\n\t{ type, changes, props: { items } }\n) => {\n\tswitch (type) {\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowDown:\n\t\t\t// If we already have a selected item, try to select the next one,\n\t\t\t// without circular navigation. Otherwise, select the first item.\n\t\t\treturn {\n\t\t\t\tselectedItem:\n\t\t\t\t\titems[\n\t\t\t\t\tselectedItem\n\t\t\t\t\t\t? Math.min(\n\t\t\t\t\t\t\titems.indexOf(selectedItem) + 1,\n\t\t\t\t\t\t\titems.length - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: 0\n\t\t\t\t\t],\n\t\t\t};\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowUp:\n\t\t\t// If we already have a selected item, try to select the previous one,\n\t\t\t// without circular navigation. Otherwise, select the last item.\n\t\t\treturn {\n\t\t\t\tselectedItem:\n\t\t\t\t\titems[\n\t\t\t\t\tselectedItem\n\t\t\t\t\t\t? Math.max(items.indexOf(selectedItem) - 1, 0)\n\t\t\t\t\t\t: items.length - 1\n\t\t\t\t\t],\n\t\t\t};\n\t\tdefault:\n\t\t\treturn changes;\n\t}\n};\n\ninterface Props {\n\tclassName?: string;\n\tlabel?: string;\n\toptions?: object;\n\tonChange: (item: any) => void;\n\tvalue: any;\n}\nconst SelectControl: React.FC<Props> = ({\n\t/** Start opting into the larger default height that will become the default size in a future version. */\n\t// @ts-expect-error\n\t__next36pxDefaultSize = false,\n\tclassName,\n\t// @ts-expect-error\n\thideLabelFromVision,\n\tlabel,\n\t// @ts-expect-error\n\tdescribedBy,\n\toptions: items,\n\tonChange: onSelectedItemChange,\n\tvalue: _selectedItem,\n}) => {\n\tconst {\n\t\tgetLabelProps,\n\t\tgetToggleButtonProps,\n\t\tgetMenuProps,\n\t\tgetItemProps,\n\t\tisOpen,\n\t\thighlightedIndex,\n\t\tselectedItem,\n\t} = useSelect({\n\t\t// @ts-expect-error\n\t\tinitialSelectedItem: items[0],\n\t\t// @ts-expect-error\n\t\titems,\n\t\titemToString,\n\t\tonSelectedItemChange,\n\t\t...(typeof _selectedItem !== 'undefined' && _selectedItem !== null\n\t\t\t? { selectedItem: _selectedItem }\n\t\t\t: undefined),\n\n\t\t// @ts-ignore\n\t\tstateReducer,\n\t});\n\n\tfunction getDescribedBy() {\n\t\tif (describedBy) {\n\t\t\treturn describedBy;\n\t\t}\n\n\t\tif (!selectedItem) {\n\t\t\treturn __('No selection');\n\t\t}\n\n\t\t// translators: %s: The selected option.\n\t\treturn sprintf(__('Currently selected: %s'), selectedItem.name);\n\t}\n\n\tconst menuProps = getMenuProps({\n\t\tclassName: 'components-custom-select-control__menu',\n\t\t'aria-hidden': !isOpen,\n\t});\n\n\tconst onKeyDownHandler = useCallback(\n\t\t(e) => {\n\t\t\te.stopPropagation();\n\t\t\tmenuProps?.onKeyDown?.(e);\n\t\t},\n\t\t[menuProps]\n\t);\n\n\t// We need this here, because the null active descendant is not fully ARIA compliant.\n\tif (\n\t\tmenuProps['aria-activedescendant']?.startsWith('downshift-null')\n\t) {\n\t\tdelete menuProps['aria-activedescendant'];\n\t}\n\n\treturn (\n\t\t<div className=\"admin-components-select-control\">\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\t'components-custom-select-control',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{hideLabelFromVision ? (\n\t\t\t\t\t<VisuallyHidden as=\"label\" {...getLabelProps()}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t) : (\n\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/label-has-associated-control, jsx-a11y/label-has-for */\n\t\t\t\t\t<label\n\t\t\t\t\t\t{...getLabelProps({\n\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t'components-custom-select-control__label',\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</label>\n\t\t\t\t)}\n\t\t\t\t<Button\n\t\t\t\t\t{...getToggleButtonProps({\n\t\t\t\t\t\t// This is needed because some speech recognition software don't support `aria-labelledby`.\n\t\t\t\t\t\t'aria-label': label,\n\t\t\t\t\t\t'aria-labelledby': undefined,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'components-custom-select-control__button',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\tdescribedBy: getDescribedBy(),\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{selectedItem?.name}\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={chevronDown}\n\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t'components-custom-select-control__button-icon',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tsize={18}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n\t\t\t\t<ul {...menuProps} onKeyDown={onKeyDownHandler}>\n\t\t\t\t\t{isOpen &&\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\titems.map((item, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/jsx-key\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t{...getItemProps({\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tkey: item.key,\n\t\t\t\t\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t\t\t\t\titem.className,\n\t\t\t\t\t\t\t\t\t\t\t'components-custom-select-control__item',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'is-highlighted':\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex === highlightedIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t'has-hint':\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!item.__experimentalHint,\n\t\t\t\t\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tstyle: item.style,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t\t\t{item.__experimentalHint && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"components-custom-select-control__item-hint\">\n\t\t\t\t\t\t\t\t\t\t\t{item.__experimentalHint}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{item === selectedItem && (\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\ticon={check}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-custom-select-control__item-icon\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport default SelectControl;\n"],"mappings":"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","ignoreList":[]}