{"version":3,"names":["_react","require","_icons","_components","_reactWindow","_lodash","_classnames","_interopRequireDefault","_fontItem","FontPicker","fonts","selectedFont","setFont","showList","setShowList","useState","searchKeyword","setSearchKeyword","filteredFonts","pick","Object","keys","filter","key","toLowerCase","includes","selectedFontIndex","findIndex","fontKey","filteredFontsKeys","wrapperRef","useRef","searchRef","listRef","handleClickOutside","e","target","current","contains","useEffect","document","addEventListener","removeEventListener","focus","scrollToItem","createElement","className","role","classNames","hidden","onClick","Icon","icon","chevronDown","ref","search","type","value","onChange","FixedSizeList","width","overscanCount","height","length","itemCount","itemSize","index","style","setTimeout","default","font","fontType","_default","exports"],"sources":["@quillforms/admin-components/src/font-picker/index.tsx"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useState, useRef, useEffect } from 'react';\nimport { search, chevronDown } from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n/**\n * External Dependencies\n */\nimport { FixedSizeList as List } from 'react-window';\nimport { pick } from 'lodash';\nimport classNames from 'classnames';\n\n/**\n * Internal Dependencies\n */\nimport FontItem from './font-item';\n\ninterface Props {\n\tfonts: Record<string, string>;\n\tselectedFont: string;\n\tsetFont: (font: string) => void;\n}\nconst FontPicker: React.FC<Props> = ({ fonts, selectedFont, setFont }) => {\n\tconst [showList, setShowList] = useState<boolean>(false);\n\tconst [searchKeyword, setSearchKeyword] = useState<string>('');\n\tconst filteredFonts = pick(\n\t\tfonts,\n\t\tObject.keys(fonts).filter((key) =>\n\t\t\tkey.toLowerCase().includes(searchKeyword.toLowerCase())\n\t\t)\n\t);\n\tconst selectedFontIndex = Object.keys(fonts).findIndex(\n\t\t(fontKey) => fontKey === selectedFont\n\t);\n\tconst filteredFontsKeys = Object.keys(filteredFonts);\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\n\tconst searchRef = useRef<HTMLInputElement | null>(null);\n\tconst listRef = useRef<List | null>(null);\n\n\tconst handleClickOutside = (e: MouseEvent) => {\n\t\tif (\n\t\t\te.target &&\n\t\t\twrapperRef.current &&\n\t\t\t!wrapperRef.current.contains(e.target as Node)\n\t\t) {\n\t\t\tsetShowList(false);\n\t\t}\n\t};\n\n\t// Attaching the previous event with UseEffect hook\n\tuseEffect(() => {\n\t\t// Bind the event listener\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\n\t\treturn () => {\n\t\t\t// Unbind the event listener on clean up\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\tif (showList) {\n\t\t\tsearchRef?.current?.focus();\n\t\t\tsetSearchKeyword('');\n\t\t\tif (selectedFontIndex > -1)\n\t\t\t\tlistRef?.current?.scrollToItem(selectedFontIndex, 'center');\n\t\t} else {\n\t\t\tsetSearchKeyword('');\n\t\t}\n\t}, [showList]);\n\n\treturn (\n\t\t<div className=\"admin-components-font-picker\">\n\t\t\t<div\n\t\t\t\trole=\"presentation\"\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'admin-components-font-picker__select',\n\t\t\t\t\t{ hidden: showList }\n\t\t\t\t)}\n\t\t\t\tonClick={() => setShowList(true)}\n\t\t\t>\n\t\t\t\t<div className=\"admin-components-font-picker__selected-font\">\n\t\t\t\t\t{selectedFont}\n\t\t\t\t</div>\n\t\t\t\t<Icon icon={chevronDown} />\n\t\t\t</div>\n\t\t\t{showList && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-search-wrapper\"\n\t\t\t\t\tref={wrapperRef}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"admin-components-font-picker__search\">\n\t\t\t\t\t\t<Icon icon={search} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={searchRef}\n\t\t\t\t\t\t\tclassName=\"admin-components-font-picker__input\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={searchKeyword}\n\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\tsetSearchKeyword(e.target.value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<List\n\t\t\t\t\t\twidth={'100%'}\n\t\t\t\t\t\tref={listRef}\n\t\t\t\t\t\toverscanCount={12}\n\t\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-list\"\n\t\t\t\t\t\theight={filteredFontsKeys.length > 0 ? 250 : 20}\n\t\t\t\t\t\titemCount={filteredFontsKeys.length}\n\t\t\t\t\t\titemSize={35}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ index, style }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'admin-components-font-picker__fonts-list-item' +\n\t\t\t\t\t\t\t\t\t\t(filteredFontsKeys[index] ===\n\t\t\t\t\t\t\t\t\t\t\tselectedFont\n\t\t\t\t\t\t\t\t\t\t\t? ' selected'\n\t\t\t\t\t\t\t\t\t\t\t: '')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetFont(filteredFontsKeys[index]);\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tsetShowList(false);\n\t\t\t\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FontItem\n\t\t\t\t\t\t\t\t\t\tfont={filteredFontsKeys[index]}\n\t\t\t\t\t\t\t\t\t\tfontType={\n\t\t\t\t\t\t\t\t\t\t\tfilteredFonts[\n\t\t\t\t\t\t\t\t\t\t\tfilteredFontsKeys[index]\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</List>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\nexport default FontPicker;\n"],"mappings":"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","ignoreList":[]}