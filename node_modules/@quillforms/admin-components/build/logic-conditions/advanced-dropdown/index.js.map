{"version":3,"names":["_react","_interopRequireWildcard","require","_useVariables","_interopRequireDefault","_components","_icons","_","_classnames","_emotion","_lodash","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","AdvancedDropdown","var0","var1","onChange","_var1$value","ref","useRef","options","type","label","variables","useVariables","section","filter","variable","value","map","createElement","className","css","BlockIconBox","icon","iconBox","color","handleChange","selected","handleNumberChange","val","selectedVariable","find","classnames","onClick","event","stopPropagation","current","querySelector","click","TextControl","placeholder","DropdownMenu","chevronDown","onClose","MenuGroup","option","MenuItem","key","size","Fragment","ev","_default","exports"],"sources":["@quillforms/admin-components/src/logic-conditions/advanced-dropdown/index.tsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport useVariables from \"../../combobox-control/use-variables\";\r\n\r\nimport { DropdownMenu, MenuItem, MenuGroup } from '@wordpress/components';\r\nimport { chevronDown } from '@wordpress/icons';\r\nimport { BlockIconBox, TextControl } from \"../..\";\r\nimport classnames from \"classnames\";\r\nimport { css } from \"emotion\";\r\nimport { size } from \"lodash\"\r\n\r\nconst AdvancedDropdown = ({ var0, var1, onChange }) => {\r\n\r\n    const ref = useRef(null);\r\n    let options = [\r\n        { type: 'input', label: \"Enter a number\" },\r\n    ];\r\n\r\n    const variables = useVariables({ section: 'variables' }).filter((variable) => variable.value !== var0.value).map(variable => {\r\n        return {\r\n            ...variable, label: <div className={css`display: flex;align-items: center; \r\n            .admin-components-block-icon-box {\r\n                width: 28px;\r\n                display: flex;\r\n                justify-content: center;\r\n            }`}><BlockIconBox icon={variable?.iconBox?.icon} color={variable?.iconBox?.color} /> <span className={css`margin: 0 8px`}>{variable?.label} </span></div>\r\n        };\r\n    });\r\n\r\n\r\n    const handleChange = (selected) => {\r\n\r\n        onChange(selected);\r\n    };\r\n\r\n    const handleNumberChange = (val) => {\r\n        onChange({ value: val, type: \"input\" });\r\n    };\r\n\r\n    const selectedVariable = variables?.find(variable => variable.value === var1.value);\r\n\r\n    return (\r\n        <div className={classnames(\"logic-conditions-advanced-dropdown\", css`\r\n            cursor: ${var1?.type && var1?.type !== \"input\" ? \"pointer\" : \"default\"};\r\n        `)} ref={ref} onClick={(\r\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n        ) => {\r\n                if (var1?.type && var1?.type !== \"input\") {\r\n                    event.stopPropagation();\r\n                    ref.current.querySelector('button').click();\r\n                }\r\n            }}>\r\n            <div className=\"\">\r\n                {!var1.type || var1?.type === \"input\" ? (\r\n                    <TextControl\r\n                        type=\"number\"\r\n                        placeholder=\"Enter a number\"\r\n                        value={var1.value ?? ''}\r\n                        onChange={handleNumberChange}\r\n                    />\r\n                )\r\n                    : (\r\n                        <div className=\"logic-conditions-advanced-dropdown__variable-label\">\r\n                            {selectedVariable?.label}\r\n                        </div>\r\n                    )}\r\n            </div>\r\n            <DropdownMenu\r\n                className=\"logic-conditions-advanced-dropdown__menu\"\r\n                icon={chevronDown}\r\n            >\r\n                {({ onClose }) => (\r\n                    <MenuGroup>\r\n                        {options.map((option) => (\r\n                            <MenuItem\r\n                                key={option.value}\r\n                                onClick={() => {\r\n                                    handleChange(option);\r\n                                    onClose();\r\n                                }}\r\n                            >\r\n                                {option.label}\r\n                            </MenuItem>\r\n                        ))}\r\n                        {size(variables) > 0 && (\r\n                            <>\r\n                                <div className='combobox-control-select-section' onClick={(ev) => ev.stopPropagation()}>\r\n                                    Variables\r\n                                </div>\r\n                                {variables.map((option) => (\r\n                                    <MenuItem\r\n                                        key={option.value}\r\n                                        onClick={() => {\r\n                                            handleChange(option);\r\n                                            onClose();\r\n                                        }}\r\n                                    >\r\n                                        {option.label}\r\n                                    </MenuItem>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </MenuGroup>\r\n\r\n\r\n                )}\r\n            </DropdownMenu>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdvancedDropdown;"],"mappings":"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","ignoreList":[]}