{"version":3,"names":["_react","require","_data","_components","_icons","_lodash","_comboboxControl","_interopRequireDefault","_operatorSelector","_textControl","_button","_advancedDropdown","LogicConditions","value","onChange","combobox","formBlocks","blockTypes","useSelect","select","getBlocks","getBlockTypes","blocks","size","forEach","block","name","supports","editable","push","innerBlocks","childBlock","useEffect","Array","isArray","length","vars","customize","override","handler","customizable","sections","options","filter","section","includes","key","option","type","_option$other$name","blockType","other","logic","logicConditions","customized","createElement","className","map","group","gi","Icon","icon","closeSmall","onClick","$value","splice","condition","ci","_combobox$excerptLeng","var0Type","var0Value","op","var1Value","find","$block","id","operators","logicalOperators","row1","row2","default","excerptLength","var0","undefined","isToggleEnabled","hideChooseOption","selectFirstOption","logicControl","attributes","setValue","var1","removeCondition","isPrimary","_default","exports"],"sources":["@quillforms/admin-components/src/logic-conditions/index.tsx"],"sourcesContent":["/**\n * QuillForms Dependencies\n */\nimport {\n\tEditorLogicCondition,\n\tFormBlocks,\n\tLogicConditionOperator,\n} from '@quillforms/types';\n\n/**\n * WordPress Dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from 'react';\nimport { Icon } from '@wordpress/components';\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * External Dependencies\n */\nimport { forEach, size } from 'lodash';\n\n/**\n * Internal Dependencies\n */\nimport ComboboxControl, {\n\tCustomizeFunction,\n\tCustomizeObject,\n} from '../combobox-control';\nimport OperatorSelector from './operator-selector';\nimport TextControl from '../text-control';\nimport Button from '../button';\nimport AdvancedDropdown from './advanced-dropdown';\n\nexport type LogicConditionsProps = {\n\tvalue: EditorLogicCondition[][];\n\tonChange: (value: EditorLogicCondition[][]) => void;\n\tcombobox?: {\n\t\tcustomize?: {\n\t\t\thandler: CustomizeFunction;\n\t\t\toverride?: boolean;\n\t\t};\n\t\texcerptLength?: number;\n\t};\n};\n\nconst LogicConditions: React.FC<LogicConditionsProps> = ({\n\tvalue,\n\tonChange,\n\tcombobox,\n}) => {\n\tconst { formBlocks, blockTypes } = useSelect((select) => {\n\t\treturn {\n\t\t\t// @ts-ignore\n\t\t\tformBlocks: select('quillForms/block-editor').getBlocks(),\n\t\t\tblockTypes: select('quillForms/blocks').getBlockTypes(),\n\t\t};\n\t});\n\n\tconst blocks: FormBlocks = [];\n\n\tif (size(formBlocks) > 0) {\n\t\tforEach(formBlocks, (block) => {\n\t\t\tif (blockTypes[block.name]?.supports?.editable) {\n\t\t\t\tblocks.push({ ...block });\n\t\t\t}\n\t\t\tif (blockTypes[block.name]?.supports?.innerBlocks) {\n\t\t\t\tif (size(block?.innerBlocks) > 0) {\n\t\t\t\t\tforEach(block.innerBlocks, (childBlock) => {\n\t\t\t\t\t\tblocks.push({\n\t\t\t\t\t\t\t...childBlock,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t// update value on mount if input isn't array or is empty array.\n\tuseEffect(() => {\n\t\tif (!Array.isArray(value) || value.length === 0) {\n\t\t\tonChange([[{ vars: [{}, {}] }]]);\n\t\t}\n\t}, []);\n\n\tconst customize = combobox?.customize?.override\n\t\t? combobox.customize.handler\n\t\t: (customizable: CustomizeObject) => {\n\t\t\tlet { sections, options } = customizable;\n\t\t\tsections = sections.filter((section) =>\n\t\t\t\t['fields', 'variables', 'hidden_fields'].includes(\n\t\t\t\t\tsection.key\n\t\t\t\t)\n\t\t\t);\n\t\t\toptions = options.filter((option) => {\n\t\t\t\tif (option.type === 'field') {\n\t\t\t\t\tconst blockType =\n\t\t\t\t\t\tblockTypes[option.other?.name ?? ''];\n\t\t\t\t\treturn (\n\t\t\t\t\t\tblockType?.supports?.logic &&\n\t\t\t\t\t\tblockType?.supports?.logicConditions\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\t['variable', 'hidden_field'].includes(option.type)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (combobox?.customize) {\n\t\t\t\tconst customized = combobox.customize.handler({\n\t\t\t\t\tsections,\n\t\t\t\t\toptions,\n\t\t\t\t});\n\t\t\t\tsections = customized.sections;\n\t\t\t\toptions = customized.options;\n\t\t\t}\n\n\t\t\treturn { sections, options };\n\t\t};\n\n\tif (!Array.isArray(value)) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"logic-conditions\">\n\t\t\t{value.map((group, gi) => (\n\t\t\t\t<div key={gi}>\n\t\t\t\t\t<div className=\"logic-conditions__group\">\n\t\t\t\t\t\t{value.length > 1 && (\n\t\t\t\t\t\t\t<div className=\"group-remove\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={closeSmall}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t$value.splice(gi, 1);\n\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{group.map((condition, ci) => {\n\t\t\t\t\t\t\tconst var0Type = condition.vars[0].type;\n\t\t\t\t\t\t\tconst var0Value = condition.vars[0].value;\n\t\t\t\t\t\t\tconst op = condition.op;\n\t\t\t\t\t\t\tconst var1Value = condition.vars[1].value;\n\n\t\t\t\t\t\t\t// some properties for field type.\n\t\t\t\t\t\t\tlet block;\n\t\t\t\t\t\t\tlet blockType;\n\t\t\t\t\t\t\tif (var0Type === 'field') {\n\t\t\t\t\t\t\t\tblock = blocks.find(\n\t\t\t\t\t\t\t\t\t($block) =>\n\t\t\t\t\t\t\t\t\t\t$block.id === condition.vars[0].value\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tblockType = blockTypes[block?.name];\n\t\t\t\t\t\t\t\tif (!blockType) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// possible operators list.\n\t\t\t\t\t\t\tlet operators: LogicConditionOperator[] | null =\n\t\t\t\t\t\t\t\tnull;\n\t\t\t\t\t\t\tif (var0Type === 'field') {\n\t\t\t\t\t\t\t\tif (blockType.logicalOperators) {\n\t\t\t\t\t\t\t\t\toperators = blockType.logicalOperators;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (var0Type === 'variable') {\n\t\t\t\t\t\t\t\toperators = [\n\t\t\t\t\t\t\t\t\t'is',\n\t\t\t\t\t\t\t\t\t'is_not',\n\t\t\t\t\t\t\t\t\t'lower_than',\n\t\t\t\t\t\t\t\t\t'greater_than',\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!operators) {\n\t\t\t\t\t\t\t\toperators = [\n\t\t\t\t\t\t\t\t\t'is',\n\t\t\t\t\t\t\t\t\t'is_not',\n\t\t\t\t\t\t\t\t\t'starts_with',\n\t\t\t\t\t\t\t\t\t'ends_with',\n\t\t\t\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t\t\t\t'not_contains',\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet row1: any = null;\n\t\t\t\t\t\t\tlet row2: any = null;\n\n\t\t\t\t\t\t\t// row1 render.\n\t\t\t\t\t\t\trow1 = (\n\t\t\t\t\t\t\t\t<div className=\"condition-row-1\">\n\t\t\t\t\t\t\t\t\t<div className=\"condition-var0\">\n\t\t\t\t\t\t\t\t\t\t<ComboboxControl\n\t\t\t\t\t\t\t\t\t\t\texcerptLength={\n\t\t\t\t\t\t\t\t\t\t\t\tcombobox?.excerptLength ?? 30\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={condition.vars[0]}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(var0) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][ci] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvars: [var0, { type: undefined }],\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tisToggleEnabled={false}\n\t\t\t\t\t\t\t\t\t\t\tcustomize={customize}\n\t\t\t\t\t\t\t\t\t\t\thideChooseOption={true}\n\t\t\t\t\t\t\t\t\t\t\tselectFirstOption={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"condition-op\">\n\t\t\t\t\t\t\t\t\t\t{var0Value && (\n\t\t\t\t\t\t\t\t\t\t\t<OperatorSelector\n\t\t\t\t\t\t\t\t\t\t\t\toperators={operators}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={op ?? null}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(op) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][ci].op = op;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// row2 render.\n\t\t\t\t\t\t\tif (var0Value) {\n\t\t\t\t\t\t\t\trow2 = (\n\t\t\t\t\t\t\t\t\t<div className=\"condition-row-2\">\n\t\t\t\t\t\t\t\t\t\t{var0Type === 'field' &&\n\t\t\t\t\t\t\t\t\t\t\tblockType.logicControl ? (\n\t\t\t\t\t\t\t\t\t\t\t<blockType.logicControl\n\t\t\t\t\t\t\t\t\t\t\t\tattributes={block.attributes}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={var1Value}\n\t\t\t\t\t\t\t\t\t\t\t\tsetValue={(var1) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tremoveCondition={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].splice(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : var0Type === 'variable' ? (\n\t\t\t\t\t\t\t\t\t\t\t// <TextControl\n\t\t\t\t\t\t\t\t\t\t\t// \ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t// \tvalue={ var1Value ?? '' }\n\t\t\t\t\t\t\t\t\t\t\t// \tonChange={ ( var1 ) => {\n\t\t\t\t\t\t\t\t\t\t\t// \t\tconst $value = [ ...value ];\n\t\t\t\t\t\t\t\t\t\t\t// \t\t$value[ gi ][\n\t\t\t\t\t\t\t\t\t\t\t// \t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t// \t\t].vars[ 1 ].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t// \t\tonChange( $value );\n\t\t\t\t\t\t\t\t\t\t\t// \t} }\n\t\t\t\t\t\t\t\t\t\t\t// />\n\t\t\t\t\t\t\t\t\t\t\t<AdvancedDropdown var0={condition.vars[0]} var1={condition.vars[1]} onChange={var1 => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1.value;\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].type = var1.type;\n\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={var1Value ?? ''}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(var1) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ci}>\n\t\t\t\t\t\t\t\t\t<div className=\"logic-conditions__condition\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"condition-rows\">\n\t\t\t\t\t\t\t\t\t\t\t{row1}\n\t\t\t\t\t\t\t\t\t\t\t{row2}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{group.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"condition-remove\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={closeSmall}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].splice(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tci,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{group.length - 1 !== ci ? (\n\t\t\t\t\t\t\t\t\t\t<div>and</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"logic-conditions__add-condition\">\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvars: [{}, {}],\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tand\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{value.length - 1 !== gi ? (\n\t\t\t\t\t\t<div className=\"logic-conditions__or\">- OR -</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"logic-conditions__add-group\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t$value.push([{ vars: [{}, {}] }]);\n\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOR\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default LogicConditions;\n"],"mappings":"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","ignoreList":[]}