{"version":3,"names":["sanitizeBlockAttributes","memo","useState","useEffect","Icon","blockDefault","plus","useSelect","useDispatch","classNames","css","tinycolor","areEqual","prevProps","nextProps","disabled","BlockTypesListItem","blockName","index","disableAnimation","destinationIndex","parent","isMounted","setIsMounted","setTimeout","blockType","select","getBlockType","icon","src","renderedIcon","createElement","insertEmptyFieldAnswer","__experimentalInsertBlock","setCurrentBlock","generateBlockId","Math","random","toString","substr","createBlock","name","attributes","id","onClick","e","stopPropagation","blockToInsert","supports","editable","document","querySelector","getElementById","scrollIntoView","behavior","className","color","setAlpha","mounted","style","backgroundColor","title"],"sources":["@quillforms/admin-components/src/block-types-list-item/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/**\n * QuillForms Dependencies\n */\nimport type {\n\tIconDescriptor,\n\tFormBlock,\n\tIcon as IconType,\n} from '@quillforms/types';\nimport { sanitizeBlockAttributes } from '@quillforms/blocks';\n\n/**\n * WordPress Dependencies\n */\nimport { memo, useState, useEffect } from 'react';\n// @ts-expect-error\nimport { Icon, Dashicon } from '@wordpress/components';\nimport { blockDefault, plus } from '@wordpress/icons';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { FC } from 'react';\n\n/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { css } from 'emotion';\nimport tinycolor from 'tinycolor2';\n\nconst areEqual = (prevProps: Props, nextProps: Props): boolean => {\n\tif (prevProps.disabled === nextProps.disabled) return true;\n\treturn false;\n};\ninterface Props {\n\tdisabled: boolean;\n\tblockName: string;\n\tindex: number;\n\tdisableAnimation?: boolean;\n\tdestinationIndex: number;\n\tparent?: string;\n}\nconst BlockTypesListItem: FC<Props> = memo(\n\t({\n\t\tdisabled,\n\t\tblockName,\n\t\tindex,\n\t\tdisableAnimation,\n\t\tdestinationIndex,\n\t\tparent,\n\t}) => {\n\t\tconst [isMounted, setIsMounted] = useState(false);\n\n\t\tuseEffect(() => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetIsMounted(true);\n\t\t\t}, 50);\n\t\t}, []);\n\t\tconst { blockType } = useSelect((select) => {\n\t\t\treturn {\n\t\t\t\tblockType:\n\t\t\t\t\tselect('quillForms/blocks').getBlockType(blockName),\n\t\t\t};\n\t\t});\n\n\t\tif (!blockType) return null;\n\t\tlet { icon } = blockType;\n\t\tif ((icon as IconDescriptor)?.src === 'block-default') {\n\t\t\ticon = {\n\t\t\t\tsrc: blockDefault,\n\t\t\t};\n\t\t}\n\t\tif (!icon) icon = plus;\n\t\tconst renderedIcon = (\n\t\t\t<Icon\n\t\t\t\ticon={\n\t\t\t\t\t((icon as IconDescriptor).src as IconType)\n\t\t\t\t\t\t? ((icon as IconDescriptor).src as IconType)\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t: (icon as Dashicon.Icon)\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t\tconst { insertEmptyFieldAnswer } = useDispatch(\n\t\t\t'quillForms/renderer-core'\n\t\t);\n\t\tconst { __experimentalInsertBlock, setCurrentBlock } = useDispatch(\n\t\t\t'quillForms/block-editor'\n\t\t);\n\t\tconst generateBlockId = (): string => {\n\t\t\treturn Math.random().toString(36).substr(2, 9);\n\t\t};\n\n\t\t/**\n\t\t * Returns a block object given its type and attributes.\n\t\t *\n\t\t * @param {string} name       Block name.\n\t\t * @param {Object} attributes Block attributes.\n\t\t *\n\t\t * @throws {Error} If the block type isn't registered.\n\t\t * @return {Object?} Block object.\n\t\t */\n\t\tconst createBlock = (\n\t\t\tname: string,\n\t\t\tattributes: Record<string, unknown> = {}\n\t\t): FormBlock | void => {\n\t\t\t// Blocks are stored with a unique ID, the assigned type name, the block\n\t\t\t// attributes.\n\t\t\treturn {\n\t\t\t\tid: generateBlockId(),\n\t\t\t\tname,\n\t\t\t\tattributes: sanitizeBlockAttributes(name, attributes),\n\t\t\t};\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\tif (disabled) return;\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst blockToInsert = createBlock(blockName);\n\t\t\t\t\tif (blockToInsert) {\n\t\t\t\t\t\t// blockToInsert.id = generateBlockId();\n\t\t\t\t\t\tif (blockType.supports.editable)\n\t\t\t\t\t\t\tinsertEmptyFieldAnswer(\n\t\t\t\t\t\t\t\tblockToInsert.id,\n\t\t\t\t\t\t\t\tblockName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t__experimentalInsertBlock(\n\t\t\t\t\t\t\tblockToInsert,\n\t\t\t\t\t\t\tdestinationIndex,\n\t\t\t\t\t\t\tparent\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!document.querySelector(\n\t\t\t\t\t\t\t\t\t`#block-editor-box-wrapper-${blockToInsert.id} .block-editor-block-edit`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetCurrentBlock(blockToInsert.id);\n\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t?.getElementById(\n\t\t\t\t\t\t\t\t\t\t`block-editor-box-wrapper-${blockToInsert.id}`\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t?.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 80);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'admin-components-blocks-list-item',\n\t\t\t\t\tcss`\n\t\t\t\t\t\t&:not( .animation-disabled ) {\n\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\ttransform: translateX( -15px );\n\t\t\t\t\t\t\ttransition: transform 0.3s ease ${index * 0.1}s,\n\t\t\t\t\t\t\t\topacity 0.3s ease ${index * 0.1}s;\n\n\t\t\t\t\t\t\t&.mounted {\n\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\ttransform: scale( 1 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tbackground: ${tinycolor(blockType?.color)\n\t\t\t\t\t\t\t.setAlpha(0.1)\n\t\t\t\t\t\t\t.toString()};\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\t\t{\n\t\t\t\t\t\tdisabled: disabled ? true : false,\n\t\t\t\t\t\tmounted: isMounted,\n\t\t\t\t\t\t'animation-disabled': disableAnimation,\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"admin-components-blocks-list-item__icon-wrapper\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: blockType?.color\n\t\t\t\t\t\t\t? blockType.color\n\t\t\t\t\t\t\t: '#bb426f',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"admin-components-blocks-list-item__icon\">\n\t\t\t\t\t\t{renderedIcon}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span className=\"admin-components-blocks-list-item__block-name\">\n\t\t\t\t\t{blockType?.title}\n\t\t\t\t</span>\n\t\t\t\t{(blockType?.name === 'group' || blockType?.name === 'slider') && (\n\t\t\t\t\t<div className=\"admin-components-control-label__new-feature\">\n\t\t\t\t\t\tNEW\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t},\n\tareEqual\n);\n\nexport default BlockTypesListItem;\n"],"mappings":"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","ignoreList":[]}