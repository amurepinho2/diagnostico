{"version":3,"names":["removep","escapeHtml","Text","size","htmlSerialize","value","serialize","node","nodeText","text","isText","bold","italic","Array","isArray","map","subNode","serializeNode","join","children","n","type","url","data","modifier"],"sources":["@quillforms/admin-components/src/rich-text/html-serialize.ts"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { removep } from '@wordpress/autop';\n\n/**\n * External Dependencies\n */\nimport escapeHtml from 'escape-html';\nimport { Text, Node } from 'slate';\n\n/**\n * Internal Dependencies\n */\nimport type { CustomNode, MergeTag } from './types';\nimport { size } from 'lodash';\nconst htmlSerialize = ( value: Node ): string => {\n\treturn removep( serialize( value ) );\n};\nconst serialize = ( node: CustomNode ) => {\n\tlet nodeText = escapeHtml( node.text );\n\tif ( Text.isText( node ) ) {\n\t\tif ( node.bold ) {\n\t\t\tnodeText = `<strong>` + nodeText + `</strong>`;\n\t\t}\n\n\t\tif ( node.italic ) {\n\t\t\tnodeText = `<em>` + nodeText + `</em>`;\n\t\t}\n\n\t\tif ( nodeText === '' ) {\n\t\t\treturn '<br />';\n\t\t}\n\n\t\treturn nodeText;\n\t}\n\n\tif ( Array.isArray( node ) ) {\n\t\treturn node\n\t\t\t.map( ( subNode ) => {\n\t\t\t\treturn serializeNode( subNode );\n\t\t\t} )\n\t\t\t.join( '' );\n\t}\n\n\treturn serializeNode( node );\n};\n\nconst serializeNode = ( node: CustomNode ) => {\n\tconst children =\n\t\tsize( node.children ) > 0\n\t\t\t? node.children.map( ( n ) => serialize( n ) ).join( '' )\n\t\t\t: '';\n\tswitch ( node.type ) {\n\t\tcase 'link':\n\t\t\treturn `<a target=\"_blank\" href=\"${ escapeHtml(\n\t\t\t\tnode.url\n\t\t\t) }\">${ children }</a>`;\n\t\tcase 'mergeTag':\n\t\t\treturn `{{${ ( node.data as MergeTag ).type }:${\n\t\t\t\t( node.data as MergeTag ).modifier\n\t\t\t}}}`;\n\t\tcase 'paragraph':\n\t\t\treturn `<p>${ children }</p>`;\n\t\tdefault:\n\t\t\treturn `${ children }`;\n\t}\n};\n\nexport default htmlSerialize;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,QAAQ,kBAAkB;;AAE1C;AACA;AACA;AACA,OAAOC,UAAU,MAAM,aAAa;AACpC,SAASC,IAAI,QAAc,OAAO;;AAElC;AACA;AACA;;AAEA,SAASC,IAAI,QAAQ,QAAQ;AAC7B,MAAMC,aAAa,GAAKC,KAAW,IAAc;EAChD,OAAOL,OAAO,CAAEM,SAAS,CAAED,KAAM,CAAE,CAAC;AACrC,CAAC;AACD,MAAMC,SAAS,GAAKC,IAAgB,IAAM;EACzC,IAAIC,QAAQ,GAAGP,UAAU,CAAEM,IAAI,CAACE,IAAK,CAAC;EACtC,IAAKP,IAAI,CAACQ,MAAM,CAAEH,IAAK,CAAC,EAAG;IAC1B,IAAKA,IAAI,CAACI,IAAI,EAAG;MAChBH,QAAQ,GAAI,UAAS,GAAGA,QAAQ,GAAI,WAAU;IAC/C;IAEA,IAAKD,IAAI,CAACK,MAAM,EAAG;MAClBJ,QAAQ,GAAI,MAAK,GAAGA,QAAQ,GAAI,OAAM;IACvC;IAEA,IAAKA,QAAQ,KAAK,EAAE,EAAG;MACtB,OAAO,QAAQ;IAChB;IAEA,OAAOA,QAAQ;EAChB;EAEA,IAAKK,KAAK,CAACC,OAAO,CAAEP,IAAK,CAAC,EAAG;IAC5B,OAAOA,IAAI,CACTQ,GAAG,CAAIC,OAAO,IAAM;MACpB,OAAOC,aAAa,CAAED,OAAQ,CAAC;IAChC,CAAE,CAAC,CACFE,IAAI,CAAE,EAAG,CAAC;EACb;EAEA,OAAOD,aAAa,CAAEV,IAAK,CAAC;AAC7B,CAAC;AAED,MAAMU,aAAa,GAAKV,IAAgB,IAAM;EAC7C,MAAMY,QAAQ,GACbhB,IAAI,CAAEI,IAAI,CAACY,QAAS,CAAC,GAAG,CAAC,GACtBZ,IAAI,CAACY,QAAQ,CAACJ,GAAG,CAAIK,CAAC,IAAMd,SAAS,CAAEc,CAAE,CAAE,CAAC,CAACF,IAAI,CAAE,EAAG,CAAC,GACvD,EAAE;EACN,QAASX,IAAI,CAACc,IAAI;IACjB,KAAK,MAAM;MACV,OAAQ,4BAA4BpB,UAAU,CAC7CM,IAAI,CAACe,GACN,CAAG,KAAKH,QAAU,MAAK;IACxB,KAAK,UAAU;MACd,OAAQ,KAAOZ,IAAI,CAACgB,IAAI,CAAeF,IAAM,IAC1Cd,IAAI,CAACgB,IAAI,CAAeC,QAC1B,IAAG;IACL,KAAK,WAAW;MACf,OAAQ,MAAML,QAAU,MAAK;IAC9B;MACC,OAAQ,GAAGA,QAAU,EAAC;EACxB;AACD,CAAC;AAED,eAAef,aAAa","ignoreList":[]}