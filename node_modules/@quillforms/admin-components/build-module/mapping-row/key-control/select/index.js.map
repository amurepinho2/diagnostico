{"version":3,"names":["SelectControl","Disabled","__","useMappingKeyControlContext","Option","Select","sections","options","_SelectOptions$find","value","onChange","disabled","SelectOptions","key","name","createElement","label","section","push","onClick","ev","stopPropagation","className","forEach","option","index","isStarred","hasSection","undefined","component","find","Number","isInteger","selectedItem"],"sources":["@quillforms/admin-components/src/mapping-row/key-control/select/index.tsx"],"sourcesContent":["/**\n * QuillForms Dependencies\n */\nimport SelectControl from '../../../select-control';\n\n/**\n * WordPress Dependencies\n */\n// @ts-expect-error\nimport type { CustomSelectControl } from '@wordpress/components';\nimport { Disabled } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal Dependencies\n */\nimport { useMappingKeyControlContext } from '../context';\nimport Option from './option';\nimport type { Options, Sections } from '..';\n\ninterface Props {\n\tsections: Sections;\n\toptions: Options;\n}\n\nconst Select: React.FC< Props > = ( { sections, options } ) => {\n\tconst { value, onChange, disabled } = useMappingKeyControlContext();\n\n\t// @ts-expect-error\n\tconst SelectOptions: CustomSelectControl.Option[] = [\n\t\t{\n\t\t\tkey: 'select',\n\t\t\tname: <Option label={ __( 'Choose an option', 'quillforms' ) } />,\n\t\t},\n\t];\n\t// add each section with related options.\n\tfor ( const section of sections ) {\n\t\tSelectOptions.push( {\n\t\t\tkey: section.key,\n\t\t\tname: (\n\t\t\t\t<div onClick={ ( ev ) => ev.stopPropagation() }>\n\t\t\t\t\t{ section.label }\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tclassName: 'mapping-key-control-select-section',\n\t\t} );\n\t\toptions.forEach( ( option, index ) => {\n\t\t\tif ( option.section === section.key ) {\n\t\t\t\tSelectOptions.push( {\n\t\t\t\t\tkey: index,\n\t\t\t\t\tname: (\n\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t\t\tisStarred={ option.isStarred }\n\t\t\t\t\t\t\thasSection\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\t// add options of undefined section.\n\toptions.forEach( ( option, index ) => {\n\t\tif ( option.section === undefined ) {\n\t\t\tSelectOptions.push( {\n\t\t\t\tkey: index,\n\t\t\t\tname: (\n\t\t\t\t\t<Option\n\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t\tisStarred={ option.isStarred }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t} );\n\t\t}\n\t} );\n\n\tconst component = (\n\t\t<div className=\"mapping-key-control-select\">\n\t\t\t<SelectControl\n\t\t\t\tlabel=\"\"\n\t\t\t\tvalue={\n\t\t\t\t\tSelectOptions.find(\n\t\t\t\t\t\t( option ) =>\n\t\t\t\t\t\t\tNumber.isInteger( option.key ) &&\n\t\t\t\t\t\t\toptions[ option.key ].value === value\n\t\t\t\t\t) ?? SelectOptions[ 0 ]\n\t\t\t\t}\n\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\tif ( selectedItem ) {\n\t\t\t\t\t\tif ( selectedItem.key === 'select' ) {\n\t\t\t\t\t\t\t// clear\n\t\t\t\t\t\t\tonChange( '' );\n\t\t\t\t\t\t} else if ( Number.isInteger( selectedItem.key ) ) {\n\t\t\t\t\t\t\t// update selected value\n\t\t\t\t\t\t\tconst option = options[ selectedItem.key ];\n\t\t\t\t\t\t\tonChange( option.value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\toptions={ SelectOptions }\n\t\t\t/>\n\t\t</div>\n\t);\n\n\treturn disabled ? <Disabled>{ component }</Disabled> : component;\n};\n\nexport default Select;\n"],"mappings":"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","ignoreList":[]}