{"version":3,"names":["useSelect","classnames","Icon","check","chevronDown","__","sprintf","useCallback","render","Button","VisuallyHidden","itemToString","item","name","span","document","createElement","tmp","appendChild","children","innerText","undefined","stateReducer","selectedItem","type","changes","props","items","stateChangeTypes","ToggleButtonKeyDownArrowDown","Math","min","indexOf","length","ToggleButtonKeyDownArrowUp","max","SelectControl","__next36pxDefaultSize","className","hideLabelFromVision","label","describedBy","options","onChange","onSelectedItemChange","value","_selectedItem","getLabelProps","getToggleButtonProps","getMenuProps","getItemProps","isOpen","highlightedIndex","initialSelectedItem","getDescribedBy","menuProps","onKeyDownHandler","e","stopPropagation","onKeyDown","startsWith","as","icon","size","map","index","key","__experimentalHint","style"],"sources":["@quillforms/admin-components/src/select-control/index.tsx"],"sourcesContent":["// Forked from @WordPress/components and added a feature of supporting item labels as React components.\n/**\n * External dependencies\n */\nimport { useSelect } from 'downshift';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Icon, check, chevronDown } from '@wordpress/icons';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback } from 'react';\nimport { render } from 'react-dom';\n\n/**\n * Internal dependencies\n */\nimport {\n\tButton,\n\tVisuallyHidden,\n} from '@wordpress/components';\n\nconst itemToString = (item) => {\n\tif (item?.name) {\n\t\tif (typeof item.name === 'string') {\n\t\t\treturn item.name;\n\t\t}\n\t\tconst span = document.createElement('span');\n\t\trender(item.name, span);\n\t\tconst tmp = document.createElement('div');\n\t\ttmp.appendChild(span);\n\t\t// @ts-expect-error\n\t\treturn tmp.children[0]?.innerText;\n\t\t// var div = document.createElement( 'div' );\n\t\t// div.innerHTML = reactToHtmlString;\n\t\t// return div.textContent || div.innerText || '';\n\t}\n\treturn undefined;\n};\n// This is needed so that in Windows, where\n// the menu does not necessarily open on\n// key up/down, you can still switch between\n// options with the menu closed.\nconst stateReducer = (\n\t{ selectedItem },\n\t{ type, changes, props: { items } }\n) => {\n\tswitch (type) {\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowDown:\n\t\t\t// If we already have a selected item, try to select the next one,\n\t\t\t// without circular navigation. Otherwise, select the first item.\n\t\t\treturn {\n\t\t\t\tselectedItem:\n\t\t\t\t\titems[\n\t\t\t\t\tselectedItem\n\t\t\t\t\t\t? Math.min(\n\t\t\t\t\t\t\titems.indexOf(selectedItem) + 1,\n\t\t\t\t\t\t\titems.length - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: 0\n\t\t\t\t\t],\n\t\t\t};\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowUp:\n\t\t\t// If we already have a selected item, try to select the previous one,\n\t\t\t// without circular navigation. Otherwise, select the last item.\n\t\t\treturn {\n\t\t\t\tselectedItem:\n\t\t\t\t\titems[\n\t\t\t\t\tselectedItem\n\t\t\t\t\t\t? Math.max(items.indexOf(selectedItem) - 1, 0)\n\t\t\t\t\t\t: items.length - 1\n\t\t\t\t\t],\n\t\t\t};\n\t\tdefault:\n\t\t\treturn changes;\n\t}\n};\n\ninterface Props {\n\tclassName?: string;\n\tlabel?: string;\n\toptions?: object;\n\tonChange: (item: any) => void;\n\tvalue: any;\n}\nconst SelectControl: React.FC<Props> = ({\n\t/** Start opting into the larger default height that will become the default size in a future version. */\n\t// @ts-expect-error\n\t__next36pxDefaultSize = false,\n\tclassName,\n\t// @ts-expect-error\n\thideLabelFromVision,\n\tlabel,\n\t// @ts-expect-error\n\tdescribedBy,\n\toptions: items,\n\tonChange: onSelectedItemChange,\n\tvalue: _selectedItem,\n}) => {\n\tconst {\n\t\tgetLabelProps,\n\t\tgetToggleButtonProps,\n\t\tgetMenuProps,\n\t\tgetItemProps,\n\t\tisOpen,\n\t\thighlightedIndex,\n\t\tselectedItem,\n\t} = useSelect({\n\t\t// @ts-expect-error\n\t\tinitialSelectedItem: items[0],\n\t\t// @ts-expect-error\n\t\titems,\n\t\titemToString,\n\t\tonSelectedItemChange,\n\t\t...(typeof _selectedItem !== 'undefined' && _selectedItem !== null\n\t\t\t? { selectedItem: _selectedItem }\n\t\t\t: undefined),\n\n\t\t// @ts-ignore\n\t\tstateReducer,\n\t});\n\n\tfunction getDescribedBy() {\n\t\tif (describedBy) {\n\t\t\treturn describedBy;\n\t\t}\n\n\t\tif (!selectedItem) {\n\t\t\treturn __('No selection');\n\t\t}\n\n\t\t// translators: %s: The selected option.\n\t\treturn sprintf(__('Currently selected: %s'), selectedItem.name);\n\t}\n\n\tconst menuProps = getMenuProps({\n\t\tclassName: 'components-custom-select-control__menu',\n\t\t'aria-hidden': !isOpen,\n\t});\n\n\tconst onKeyDownHandler = useCallback(\n\t\t(e) => {\n\t\t\te.stopPropagation();\n\t\t\tmenuProps?.onKeyDown?.(e);\n\t\t},\n\t\t[menuProps]\n\t);\n\n\t// We need this here, because the null active descendant is not fully ARIA compliant.\n\tif (\n\t\tmenuProps['aria-activedescendant']?.startsWith('downshift-null')\n\t) {\n\t\tdelete menuProps['aria-activedescendant'];\n\t}\n\n\treturn (\n\t\t<div className=\"admin-components-select-control\">\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\t'components-custom-select-control',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{hideLabelFromVision ? (\n\t\t\t\t\t<VisuallyHidden as=\"label\" {...getLabelProps()}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t) : (\n\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/label-has-associated-control, jsx-a11y/label-has-for */\n\t\t\t\t\t<label\n\t\t\t\t\t\t{...getLabelProps({\n\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t'components-custom-select-control__label',\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</label>\n\t\t\t\t)}\n\t\t\t\t<Button\n\t\t\t\t\t{...getToggleButtonProps({\n\t\t\t\t\t\t// This is needed because some speech recognition software don't support `aria-labelledby`.\n\t\t\t\t\t\t'aria-label': label,\n\t\t\t\t\t\t'aria-labelledby': undefined,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'components-custom-select-control__button',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\tdescribedBy: getDescribedBy(),\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{selectedItem?.name}\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={chevronDown}\n\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t'components-custom-select-control__button-icon',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tsize={18}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n\t\t\t\t<ul {...menuProps} onKeyDown={onKeyDownHandler}>\n\t\t\t\t\t{isOpen &&\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\titems.map((item, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/jsx-key\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t{...getItemProps({\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tkey: item.key,\n\t\t\t\t\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t\t\t\t\titem.className,\n\t\t\t\t\t\t\t\t\t\t\t'components-custom-select-control__item',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'is-highlighted':\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex === highlightedIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t'has-hint':\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!item.__experimentalHint,\n\t\t\t\t\t\t\t\t\t\t\t\t'is-next-36px-default-size':\n\t\t\t\t\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tstyle: item.style,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t\t\t{item.__experimentalHint && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"components-custom-select-control__item-hint\">\n\t\t\t\t\t\t\t\t\t\t\t{item.__experimentalHint}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{item === selectedItem && (\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\ticon={check}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-custom-select-control__item-icon\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport default SelectControl;\n"],"mappings":"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","ignoreList":[]}