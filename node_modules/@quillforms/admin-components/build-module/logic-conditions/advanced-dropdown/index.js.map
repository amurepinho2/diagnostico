{"version":3,"names":["React","useRef","useVariables","DropdownMenu","MenuItem","MenuGroup","chevronDown","BlockIconBox","TextControl","classnames","css","size","AdvancedDropdown","var0","var1","onChange","_var1$value","ref","options","type","label","variables","section","filter","variable","value","map","createElement","className","icon","iconBox","color","handleChange","selected","handleNumberChange","val","selectedVariable","find","onClick","event","stopPropagation","current","querySelector","click","placeholder","onClose","option","key","Fragment","ev"],"sources":["@quillforms/admin-components/src/logic-conditions/advanced-dropdown/index.tsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport useVariables from \"../../combobox-control/use-variables\";\r\n\r\nimport { DropdownMenu, MenuItem, MenuGroup } from '@wordpress/components';\r\nimport { chevronDown } from '@wordpress/icons';\r\nimport { BlockIconBox, TextControl } from \"../..\";\r\nimport classnames from \"classnames\";\r\nimport { css } from \"emotion\";\r\nimport { size } from \"lodash\"\r\n\r\nconst AdvancedDropdown = ({ var0, var1, onChange }) => {\r\n\r\n    const ref = useRef(null);\r\n    let options = [\r\n        { type: 'input', label: \"Enter a number\" },\r\n    ];\r\n\r\n    const variables = useVariables({ section: 'variables' }).filter((variable) => variable.value !== var0.value).map(variable => {\r\n        return {\r\n            ...variable, label: <div className={css`display: flex;align-items: center; \r\n            .admin-components-block-icon-box {\r\n                width: 28px;\r\n                display: flex;\r\n                justify-content: center;\r\n            }`}><BlockIconBox icon={variable?.iconBox?.icon} color={variable?.iconBox?.color} /> <span className={css`margin: 0 8px`}>{variable?.label} </span></div>\r\n        };\r\n    });\r\n\r\n\r\n    const handleChange = (selected) => {\r\n\r\n        onChange(selected);\r\n    };\r\n\r\n    const handleNumberChange = (val) => {\r\n        onChange({ value: val, type: \"input\" });\r\n    };\r\n\r\n    const selectedVariable = variables?.find(variable => variable.value === var1.value);\r\n\r\n    return (\r\n        <div className={classnames(\"logic-conditions-advanced-dropdown\", css`\r\n            cursor: ${var1?.type && var1?.type !== \"input\" ? \"pointer\" : \"default\"};\r\n        `)} ref={ref} onClick={(\r\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n        ) => {\r\n                if (var1?.type && var1?.type !== \"input\") {\r\n                    event.stopPropagation();\r\n                    ref.current.querySelector('button').click();\r\n                }\r\n            }}>\r\n            <div className=\"\">\r\n                {!var1.type || var1?.type === \"input\" ? (\r\n                    <TextControl\r\n                        type=\"number\"\r\n                        placeholder=\"Enter a number\"\r\n                        value={var1.value ?? ''}\r\n                        onChange={handleNumberChange}\r\n                    />\r\n                )\r\n                    : (\r\n                        <div className=\"logic-conditions-advanced-dropdown__variable-label\">\r\n                            {selectedVariable?.label}\r\n                        </div>\r\n                    )}\r\n            </div>\r\n            <DropdownMenu\r\n                className=\"logic-conditions-advanced-dropdown__menu\"\r\n                icon={chevronDown}\r\n            >\r\n                {({ onClose }) => (\r\n                    <MenuGroup>\r\n                        {options.map((option) => (\r\n                            <MenuItem\r\n                                key={option.value}\r\n                                onClick={() => {\r\n                                    handleChange(option);\r\n                                    onClose();\r\n                                }}\r\n                            >\r\n                                {option.label}\r\n                            </MenuItem>\r\n                        ))}\r\n                        {size(variables) > 0 && (\r\n                            <>\r\n                                <div className='combobox-control-select-section' onClick={(ev) => ev.stopPropagation()}>\r\n                                    Variables\r\n                                </div>\r\n                                {variables.map((option) => (\r\n                                    <MenuItem\r\n                                        key={option.value}\r\n                                        onClick={() => {\r\n                                            handleChange(option);\r\n                                            onClose();\r\n                                        }}\r\n                                    >\r\n                                        {option.label}\r\n                                    </MenuItem>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </MenuGroup>\r\n\r\n\r\n                )}\r\n            </DropdownMenu>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdvancedDropdown;"],"mappings":"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","ignoreList":[]}