{"version":3,"names":["useSelect","useEffect","Icon","closeSmall","forEach","size","ComboboxControl","OperatorSelector","TextControl","Button","AdvancedDropdown","LogicConditions","value","onChange","combobox","formBlocks","blockTypes","select","getBlocks","getBlockTypes","blocks","block","name","supports","editable","push","innerBlocks","childBlock","Array","isArray","length","vars","customize","override","handler","customizable","sections","options","filter","section","includes","key","option","type","_option$other$name","blockType","other","logic","logicConditions","customized","createElement","className","map","group","gi","icon","onClick","$value","splice","condition","ci","_combobox$excerptLeng","var0Type","var0Value","op","var1Value","find","$block","id","operators","logicalOperators","row1","row2","excerptLength","var0","undefined","isToggleEnabled","hideChooseOption","selectFirstOption","logicControl","attributes","setValue","var1","removeCondition","isPrimary"],"sources":["@quillforms/admin-components/src/logic-conditions/index.tsx"],"sourcesContent":["/**\n * QuillForms Dependencies\n */\nimport {\n\tEditorLogicCondition,\n\tFormBlocks,\n\tLogicConditionOperator,\n} from '@quillforms/types';\n\n/**\n * WordPress Dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from 'react';\nimport { Icon } from '@wordpress/components';\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * External Dependencies\n */\nimport { forEach, size } from 'lodash';\n\n/**\n * Internal Dependencies\n */\nimport ComboboxControl, {\n\tCustomizeFunction,\n\tCustomizeObject,\n} from '../combobox-control';\nimport OperatorSelector from './operator-selector';\nimport TextControl from '../text-control';\nimport Button from '../button';\nimport AdvancedDropdown from './advanced-dropdown';\n\nexport type LogicConditionsProps = {\n\tvalue: EditorLogicCondition[][];\n\tonChange: (value: EditorLogicCondition[][]) => void;\n\tcombobox?: {\n\t\tcustomize?: {\n\t\t\thandler: CustomizeFunction;\n\t\t\toverride?: boolean;\n\t\t};\n\t\texcerptLength?: number;\n\t};\n};\n\nconst LogicConditions: React.FC<LogicConditionsProps> = ({\n\tvalue,\n\tonChange,\n\tcombobox,\n}) => {\n\tconst { formBlocks, blockTypes } = useSelect((select) => {\n\t\treturn {\n\t\t\t// @ts-ignore\n\t\t\tformBlocks: select('quillForms/block-editor').getBlocks(),\n\t\t\tblockTypes: select('quillForms/blocks').getBlockTypes(),\n\t\t};\n\t});\n\n\tconst blocks: FormBlocks = [];\n\n\tif (size(formBlocks) > 0) {\n\t\tforEach(formBlocks, (block) => {\n\t\t\tif (blockTypes[block.name]?.supports?.editable) {\n\t\t\t\tblocks.push({ ...block });\n\t\t\t}\n\t\t\tif (blockTypes[block.name]?.supports?.innerBlocks) {\n\t\t\t\tif (size(block?.innerBlocks) > 0) {\n\t\t\t\t\tforEach(block.innerBlocks, (childBlock) => {\n\t\t\t\t\t\tblocks.push({\n\t\t\t\t\t\t\t...childBlock,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t// update value on mount if input isn't array or is empty array.\n\tuseEffect(() => {\n\t\tif (!Array.isArray(value) || value.length === 0) {\n\t\t\tonChange([[{ vars: [{}, {}] }]]);\n\t\t}\n\t}, []);\n\n\tconst customize = combobox?.customize?.override\n\t\t? combobox.customize.handler\n\t\t: (customizable: CustomizeObject) => {\n\t\t\tlet { sections, options } = customizable;\n\t\t\tsections = sections.filter((section) =>\n\t\t\t\t['fields', 'variables', 'hidden_fields'].includes(\n\t\t\t\t\tsection.key\n\t\t\t\t)\n\t\t\t);\n\t\t\toptions = options.filter((option) => {\n\t\t\t\tif (option.type === 'field') {\n\t\t\t\t\tconst blockType =\n\t\t\t\t\t\tblockTypes[option.other?.name ?? ''];\n\t\t\t\t\treturn (\n\t\t\t\t\t\tblockType?.supports?.logic &&\n\t\t\t\t\t\tblockType?.supports?.logicConditions\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\t['variable', 'hidden_field'].includes(option.type)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (combobox?.customize) {\n\t\t\t\tconst customized = combobox.customize.handler({\n\t\t\t\t\tsections,\n\t\t\t\t\toptions,\n\t\t\t\t});\n\t\t\t\tsections = customized.sections;\n\t\t\t\toptions = customized.options;\n\t\t\t}\n\n\t\t\treturn { sections, options };\n\t\t};\n\n\tif (!Array.isArray(value)) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"logic-conditions\">\n\t\t\t{value.map((group, gi) => (\n\t\t\t\t<div key={gi}>\n\t\t\t\t\t<div className=\"logic-conditions__group\">\n\t\t\t\t\t\t{value.length > 1 && (\n\t\t\t\t\t\t\t<div className=\"group-remove\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={closeSmall}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t$value.splice(gi, 1);\n\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{group.map((condition, ci) => {\n\t\t\t\t\t\t\tconst var0Type = condition.vars[0].type;\n\t\t\t\t\t\t\tconst var0Value = condition.vars[0].value;\n\t\t\t\t\t\t\tconst op = condition.op;\n\t\t\t\t\t\t\tconst var1Value = condition.vars[1].value;\n\n\t\t\t\t\t\t\t// some properties for field type.\n\t\t\t\t\t\t\tlet block;\n\t\t\t\t\t\t\tlet blockType;\n\t\t\t\t\t\t\tif (var0Type === 'field') {\n\t\t\t\t\t\t\t\tblock = blocks.find(\n\t\t\t\t\t\t\t\t\t($block) =>\n\t\t\t\t\t\t\t\t\t\t$block.id === condition.vars[0].value\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tblockType = blockTypes[block?.name];\n\t\t\t\t\t\t\t\tif (!blockType) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// possible operators list.\n\t\t\t\t\t\t\tlet operators: LogicConditionOperator[] | null =\n\t\t\t\t\t\t\t\tnull;\n\t\t\t\t\t\t\tif (var0Type === 'field') {\n\t\t\t\t\t\t\t\tif (blockType.logicalOperators) {\n\t\t\t\t\t\t\t\t\toperators = blockType.logicalOperators;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (var0Type === 'variable') {\n\t\t\t\t\t\t\t\toperators = [\n\t\t\t\t\t\t\t\t\t'is',\n\t\t\t\t\t\t\t\t\t'is_not',\n\t\t\t\t\t\t\t\t\t'lower_than',\n\t\t\t\t\t\t\t\t\t'greater_than',\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!operators) {\n\t\t\t\t\t\t\t\toperators = [\n\t\t\t\t\t\t\t\t\t'is',\n\t\t\t\t\t\t\t\t\t'is_not',\n\t\t\t\t\t\t\t\t\t'starts_with',\n\t\t\t\t\t\t\t\t\t'ends_with',\n\t\t\t\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t\t\t\t'not_contains',\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet row1: any = null;\n\t\t\t\t\t\t\tlet row2: any = null;\n\n\t\t\t\t\t\t\t// row1 render.\n\t\t\t\t\t\t\trow1 = (\n\t\t\t\t\t\t\t\t<div className=\"condition-row-1\">\n\t\t\t\t\t\t\t\t\t<div className=\"condition-var0\">\n\t\t\t\t\t\t\t\t\t\t<ComboboxControl\n\t\t\t\t\t\t\t\t\t\t\texcerptLength={\n\t\t\t\t\t\t\t\t\t\t\t\tcombobox?.excerptLength ?? 30\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={condition.vars[0]}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(var0) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][ci] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvars: [var0, { type: undefined }],\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tisToggleEnabled={false}\n\t\t\t\t\t\t\t\t\t\t\tcustomize={customize}\n\t\t\t\t\t\t\t\t\t\t\thideChooseOption={true}\n\t\t\t\t\t\t\t\t\t\t\tselectFirstOption={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"condition-op\">\n\t\t\t\t\t\t\t\t\t\t{var0Value && (\n\t\t\t\t\t\t\t\t\t\t\t<OperatorSelector\n\t\t\t\t\t\t\t\t\t\t\t\toperators={operators}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={op ?? null}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(op) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][ci].op = op;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// row2 render.\n\t\t\t\t\t\t\tif (var0Value) {\n\t\t\t\t\t\t\t\trow2 = (\n\t\t\t\t\t\t\t\t\t<div className=\"condition-row-2\">\n\t\t\t\t\t\t\t\t\t\t{var0Type === 'field' &&\n\t\t\t\t\t\t\t\t\t\t\tblockType.logicControl ? (\n\t\t\t\t\t\t\t\t\t\t\t<blockType.logicControl\n\t\t\t\t\t\t\t\t\t\t\t\tattributes={block.attributes}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={var1Value}\n\t\t\t\t\t\t\t\t\t\t\t\tsetValue={(var1) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tremoveCondition={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].splice(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : var0Type === 'variable' ? (\n\t\t\t\t\t\t\t\t\t\t\t// <TextControl\n\t\t\t\t\t\t\t\t\t\t\t// \ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t// \tvalue={ var1Value ?? '' }\n\t\t\t\t\t\t\t\t\t\t\t// \tonChange={ ( var1 ) => {\n\t\t\t\t\t\t\t\t\t\t\t// \t\tconst $value = [ ...value ];\n\t\t\t\t\t\t\t\t\t\t\t// \t\t$value[ gi ][\n\t\t\t\t\t\t\t\t\t\t\t// \t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t// \t\t].vars[ 1 ].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t// \t\tonChange( $value );\n\t\t\t\t\t\t\t\t\t\t\t// \t} }\n\t\t\t\t\t\t\t\t\t\t\t// />\n\t\t\t\t\t\t\t\t\t\t\t<AdvancedDropdown var0={condition.vars[0]} var1={condition.vars[1]} onChange={var1 => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1.value;\n\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].type = var1.type;\n\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={var1Value ?? ''}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(var1) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tci\n\t\t\t\t\t\t\t\t\t\t\t\t\t].vars[1].value = var1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ci}>\n\t\t\t\t\t\t\t\t\t<div className=\"logic-conditions__condition\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"condition-rows\">\n\t\t\t\t\t\t\t\t\t\t\t{row1}\n\t\t\t\t\t\t\t\t\t\t\t{row2}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{group.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"condition-remove\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={closeSmall}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].splice(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tci,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{group.length - 1 !== ci ? (\n\t\t\t\t\t\t\t\t\t\t<div>and</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"logic-conditions__add-condition\">\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t$value[gi].push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvars: [{}, {}],\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tand\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{value.length - 1 !== gi ? (\n\t\t\t\t\t\t<div className=\"logic-conditions__or\">- OR -</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"logic-conditions__add-group\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst $value = [...value];\n\t\t\t\t\t\t\t\t\t$value.push([{ vars: [{}, {}] }]);\n\t\t\t\t\t\t\t\t\tonChange($value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOR\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default LogicConditions;\n"],"mappings":"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","ignoreList":[]}