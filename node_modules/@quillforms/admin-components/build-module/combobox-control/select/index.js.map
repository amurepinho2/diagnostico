{"version":3,"names":["SelectControl","__","useComboboxControlContext","Option","getPlainExcerpt","Select","hideChooseOption","_SelectOptions$find","sections","options","value","onChange","isToggleEnabled","placeholder","excerptLength","SelectOptions","key","name","createElement","label","style","display","section","push","onClick","ev","stopPropagation","className","forEach","option","index","order","iconBox","hasSection","undefined","find","Number","isInteger","type","selectedItem"],"sources":["@quillforms/admin-components/src/combobox-control/select/index.tsx"],"sourcesContent":["/**\n * QuillForms Dependencies\n */\nimport SelectControl from '../../select-control';\n\n/**\n * WordPress Dependencies\n */\n// @ts-expect-error\nimport type { CustomSelectControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * External Dependencies\n */\n\n/**\n * Internal Dependencies\n */\nimport { useComboboxControlContext } from '../context';\nimport Option from './option';\nimport { getPlainExcerpt } from '../../rich-text';\n\ninterface Props {\n\thideChooseOption?: boolean;\n}\n\nconst Select: React.FC< Props > = ( { hideChooseOption } ) => {\n\tconst {\n\t\tsections,\n\t\toptions,\n\t\tvalue,\n\t\tonChange,\n\t\tisToggleEnabled,\n\t\tplaceholder,\n\t\texcerptLength,\n\t} = useComboboxControlContext();\n\n\t// @ts-expect-error\n\tconst SelectOptions: CustomSelectControl.Option[] = [\n\t\t{\n\t\t\tkey: 'select',\n\t\t\tname: (\n\t\t\t\t<Option\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tplaceholder ?? __( 'Choose an option', 'quillforms' )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t),\n\t\t\tstyle: hideChooseOption ? { display: 'none' } : {},\n\t\t},\n\t];\n\t// add each section with related options.\n\tfor ( const section of sections ) {\n\t\tSelectOptions.push( {\n\t\t\tkey: section.key,\n\t\t\tname: (\n\t\t\t\t<div onClick={ ( ev ) => ev.stopPropagation() }>\n\t\t\t\t\t{ section.label }\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tclassName: 'combobox-control-select-section',\n\t\t} );\n\t\toptions.forEach( ( option, index ) => {\n\t\t\tif ( option.section === section.key ) {\n\t\t\t\tSelectOptions.push( {\n\t\t\t\t\tkey: index,\n\t\t\t\t\tname: (\n\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\tlabel={ getPlainExcerpt(\n\t\t\t\t\t\t\t\toption.label,\n\t\t\t\t\t\t\t\texcerptLength\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\torder={ option?.order }\n\t\t\t\t\t\t\ticonBox={ option.iconBox }\n\t\t\t\t\t\t\thasSection\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\t// add options of undefined section.\n\toptions.forEach( ( option, index ) => {\n\t\tif ( option.section === undefined ) {\n\t\t\tSelectOptions.push( {\n\t\t\t\tkey: index,\n\t\t\t\tname: (\n\t\t\t\t\t<Option label={ option.label } iconBox={ option.iconBox } />\n\t\t\t\t),\n\t\t\t} );\n\t\t}\n\t} );\n\t// add custom value option.\n\tif ( isToggleEnabled ) {\n\t\tSelectOptions.push( {\n\t\t\tkey: 'toggle',\n\t\t\tname: <Option label={ __( 'Custom Value', 'quillforms' ) } />,\n\t\t} );\n\t}\n\n\treturn (\n\t\t<div className=\"combobox-control-select\">\n\t\t\t<SelectControl\n\t\t\t\tlabel=\"\"\n\t\t\t\tvalue={\n\t\t\t\t\tSelectOptions.find(\n\t\t\t\t\t\t( option ) =>\n\t\t\t\t\t\t\tNumber.isInteger( option.key ) &&\n\t\t\t\t\t\t\toptions[ option.key ].type === value.type &&\n\t\t\t\t\t\t\toptions[ option.key ].value === value.value\n\t\t\t\t\t) ?? SelectOptions[ 0 ]\n\t\t\t\t}\n\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\tif ( selectedItem ) {\n\t\t\t\t\t\tif ( selectedItem.key === 'select' ) {\n\t\t\t\t\t\t\t// clear selection\n\t\t\t\t\t\t\tonChange( {} );\n\t\t\t\t\t\t} else if ( selectedItem.key === 'toggle' ) {\n\t\t\t\t\t\t\t// toggle to rich text editor\n\t\t\t\t\t\t\tonChange( { type: 'text' } );\n\t\t\t\t\t\t} else if ( Number.isInteger( selectedItem.key ) ) {\n\t\t\t\t\t\t\t// update selected value\n\t\t\t\t\t\t\tconst option = options[ selectedItem.key ];\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\ttype: option.type,\n\t\t\t\t\t\t\t\tvalue: option.value,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\toptions={ SelectOptions }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Select;\n"],"mappings":"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","ignoreList":[]}