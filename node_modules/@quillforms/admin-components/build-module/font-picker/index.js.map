{"version":3,"names":["useState","useRef","useEffect","search","chevronDown","Icon","FixedSizeList","List","pick","classNames","FontItem","FontPicker","fonts","selectedFont","setFont","showList","setShowList","searchKeyword","setSearchKeyword","filteredFonts","Object","keys","filter","key","toLowerCase","includes","selectedFontIndex","findIndex","fontKey","filteredFontsKeys","wrapperRef","searchRef","listRef","handleClickOutside","e","target","current","contains","document","addEventListener","removeEventListener","focus","scrollToItem","createElement","className","role","hidden","onClick","icon","ref","type","value","onChange","width","overscanCount","height","length","itemCount","itemSize","index","style","setTimeout","font","fontType"],"sources":["@quillforms/admin-components/src/font-picker/index.tsx"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useState, useRef, useEffect } from 'react';\nimport { search, chevronDown } from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n/**\n * External Dependencies\n */\nimport { FixedSizeList as List } from 'react-window';\nimport { pick } from 'lodash';\nimport classNames from 'classnames';\n\n/**\n * Internal Dependencies\n */\nimport FontItem from './font-item';\n\ninterface Props {\n\tfonts: Record<string, string>;\n\tselectedFont: string;\n\tsetFont: (font: string) => void;\n}\nconst FontPicker: React.FC<Props> = ({ fonts, selectedFont, setFont }) => {\n\tconst [showList, setShowList] = useState<boolean>(false);\n\tconst [searchKeyword, setSearchKeyword] = useState<string>('');\n\tconst filteredFonts = pick(\n\t\tfonts,\n\t\tObject.keys(fonts).filter((key) =>\n\t\t\tkey.toLowerCase().includes(searchKeyword.toLowerCase())\n\t\t)\n\t);\n\tconst selectedFontIndex = Object.keys(fonts).findIndex(\n\t\t(fontKey) => fontKey === selectedFont\n\t);\n\tconst filteredFontsKeys = Object.keys(filteredFonts);\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\n\tconst searchRef = useRef<HTMLInputElement | null>(null);\n\tconst listRef = useRef<List | null>(null);\n\n\tconst handleClickOutside = (e: MouseEvent) => {\n\t\tif (\n\t\t\te.target &&\n\t\t\twrapperRef.current &&\n\t\t\t!wrapperRef.current.contains(e.target as Node)\n\t\t) {\n\t\t\tsetShowList(false);\n\t\t}\n\t};\n\n\t// Attaching the previous event with UseEffect hook\n\tuseEffect(() => {\n\t\t// Bind the event listener\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\n\t\treturn () => {\n\t\t\t// Unbind the event listener on clean up\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\tif (showList) {\n\t\t\tsearchRef?.current?.focus();\n\t\t\tsetSearchKeyword('');\n\t\t\tif (selectedFontIndex > -1)\n\t\t\t\tlistRef?.current?.scrollToItem(selectedFontIndex, 'center');\n\t\t} else {\n\t\t\tsetSearchKeyword('');\n\t\t}\n\t}, [showList]);\n\n\treturn (\n\t\t<div className=\"admin-components-font-picker\">\n\t\t\t<div\n\t\t\t\trole=\"presentation\"\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'admin-components-font-picker__select',\n\t\t\t\t\t{ hidden: showList }\n\t\t\t\t)}\n\t\t\t\tonClick={() => setShowList(true)}\n\t\t\t>\n\t\t\t\t<div className=\"admin-components-font-picker__selected-font\">\n\t\t\t\t\t{selectedFont}\n\t\t\t\t</div>\n\t\t\t\t<Icon icon={chevronDown} />\n\t\t\t</div>\n\t\t\t{showList && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-search-wrapper\"\n\t\t\t\t\tref={wrapperRef}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"admin-components-font-picker__search\">\n\t\t\t\t\t\t<Icon icon={search} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={searchRef}\n\t\t\t\t\t\t\tclassName=\"admin-components-font-picker__input\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={searchKeyword}\n\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\tsetSearchKeyword(e.target.value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<List\n\t\t\t\t\t\twidth={'100%'}\n\t\t\t\t\t\tref={listRef}\n\t\t\t\t\t\toverscanCount={12}\n\t\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-list\"\n\t\t\t\t\t\theight={filteredFontsKeys.length > 0 ? 250 : 20}\n\t\t\t\t\t\titemCount={filteredFontsKeys.length}\n\t\t\t\t\t\titemSize={35}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ index, style }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'admin-components-font-picker__fonts-list-item' +\n\t\t\t\t\t\t\t\t\t\t(filteredFontsKeys[index] ===\n\t\t\t\t\t\t\t\t\t\t\tselectedFont\n\t\t\t\t\t\t\t\t\t\t\t? ' selected'\n\t\t\t\t\t\t\t\t\t\t\t: '')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetFont(filteredFontsKeys[index]);\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tsetShowList(false);\n\t\t\t\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FontItem\n\t\t\t\t\t\t\t\t\t\tfont={filteredFontsKeys[index]}\n\t\t\t\t\t\t\t\t\t\tfontType={\n\t\t\t\t\t\t\t\t\t\t\tfilteredFonts[\n\t\t\t\t\t\t\t\t\t\t\tfilteredFontsKeys[index]\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</List>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\nexport default FontPicker;\n"],"mappings":"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","ignoreList":[]}