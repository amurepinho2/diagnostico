{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = require(\"react\");\nvar _rendererCore = require(\"@quillforms/renderer-core\");\nvar _tinycolor = _interopRequireDefault(require(\"tinycolor2\"));\nvar _reactTextMask = _interopRequireDefault(require(\"react-text-mask\"));\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\nvar _customParseFormat = _interopRequireDefault(require(\"dayjs/plugin/customParseFormat\"));\nvar _emotion = require(\"emotion\");\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _createAutocorrectedDatePipe = _interopRequireDefault(require(\"./create-autocorrected-date-pipe\"));\n/**\r\n * QuillForms Dependencies\r\n */\n\n/**\r\n * WordPress Dependencies\r\n */\n\n/**\r\n * External Dependencies\r\n */\n\n/**\r\n * Internal Dependencies\r\n */\n\nconst DateOutput = props => {\n  const {\n    id,\n    attributes,\n    setIsValid,\n    isPreview,\n    setIsAnswered,\n    setValidationErr,\n    showNextBtn,\n    showErrMsg,\n    val,\n    setVal,\n    setFooterDisplay,\n    isTouchScreen,\n    inputRef,\n    isReviewing\n  } = props;\n  const {\n    format,\n    separator,\n    required\n  } = attributes;\n  const theme = (0, _rendererCore.useBlockTheme)(attributes.themeId);\n  const messages = (0, _rendererCore.useMessages)();\n  const answersColor = (0, _tinycolor.default)(theme.answersColor);\n  const getPlaceholder = () => {\n    if (format === 'MMDDYYYY') {\n      return 'MM' + separator + 'DD' + separator + 'YYYY';\n    } else if (format === 'DDMMYYYY') {\n      return 'DD' + separator + 'MM' + separator + 'YYYY';\n    } else if (format === 'YYYYMMDD') {\n      return 'YYYY' + separator + 'MM' + separator + 'DD';\n    }\n  };\n  const checkFieldValidation = value => {\n    _dayjs.default.extend(_customParseFormat.default);\n    const date = (0, _dayjs.default)(value, getPlaceholder(), true);\n    if (required === true && (!value || value === '')) {\n      setIsValid(false);\n      setValidationErr(messages['label.errorAlert.required']);\n    } else if (!date.isValid() && value) {\n      setIsValid(false);\n      setValidationErr(messages['label.errorAlert.date']);\n    } else {\n      setIsValid(true);\n      setValidationErr(null);\n    }\n  };\n  (0, _react.useEffect)(() => {\n    // if change in required flag and is in preview mode, check validation\n    // Note, that this effect will also be called on mount, that's why we check if isReviewing = false\n    // because we want to display errors coming from server.\n    if (isPreview || !isReviewing) checkFieldValidation(val);\n  }, [attributes]);\n  const changeHandler = e => {\n    const value = e.target.value;\n    setVal(value);\n    showErrMsg(false);\n    checkFieldValidation(value);\n    if (value !== '') {\n      setIsAnswered(true);\n      showNextBtn(true);\n    } else {\n      setIsAnswered(false);\n    }\n  };\n  const autoCorrectedDatePipe = (0, _createAutocorrectedDatePipe.default)(getPlaceholder()?.toLowerCase());\n  const getMask = () => {\n    if (format === 'YYYYMMDD') {\n      return [/\\d/, /\\d/, /\\d/, /\\d/, separator, /\\d/, /\\d/, separator, /\\d/, /\\d/];\n    }\n    return [/\\d/, /\\d/, separator, /\\d/, /\\d/, separator, /\\d/, /\\d/, /\\d/, /\\d/];\n  };\n  return (0, _react.createElement)(_reactTextMask.default, {\n    onChange: changeHandler,\n    ref: inputRef,\n    className: (0, _classnames.default)((0, _emotion.css)`\n\t\t\t\t\t& {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t\tborder: none !important;\n\t\t\t\t\t\tborder-radius: 0 !important;\n\t\t\t\t\t\tpadding-bottom: 8px;\n\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(0.3).toString()}\n\t\t\t\t\t\t\t0px 1px !important;\n\t\t\t\t\t}\n\n\t\t\t\t\t&::placeholder {\n\t\t\t\t\t\topacity: 0.3;\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\n\t\t\t\t\t\tcolor: ${theme.answersColor};\n\t\t\t\t\t}\n\n\t\t\t\t\t&:-ms-input-placeholder {\n\t\t\t\t\t\topacity: 0.3;\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\n\t\t\t\t\t\tcolor: ${theme.answersColor};\n\t\t\t\t\t}\n\n\t\t\t\t\t&::-ms-input-placeholder {\n\t\t\t\t\t\topacity: 0.3;\n\t\t\t\t\t\t/* Microsoft Edge */\n\t\t\t\t\t\tcolor: ${theme.answersColor};\n\t\t\t\t\t}\n\n\t\t\t\t\t&:focus {\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(1).toString()}\n\t\t\t\t\t\t\t0px 2px !important;\n\t\t\t\t\t}\n\n\t\t\t\t\tcolor: ${theme.answersColor};\n\t\t\t\t`),\n    placeholder: getPlaceholder(),\n    mask: getMask(),\n    pipe: autoCorrectedDatePipe,\n    value: val && val.length > 0 ? val : '',\n    onFocus: () => {\n      if (isTouchScreen) {\n        setFooterDisplay(false);\n      }\n    },\n    onBlur: () => {\n      if (isTouchScreen) {\n        setFooterDisplay(true);\n      }\n    },\n    autoComplete: \"off\"\n  });\n};\nvar _default = exports.default = DateOutput;","map":{"version":3,"names":["_react","require","_rendererCore","_tinycolor","_interopRequireDefault","_reactTextMask","_dayjs","_customParseFormat","_emotion","_classnames","_createAutocorrectedDatePipe","DateOutput","props","id","attributes","setIsValid","isPreview","setIsAnswered","setValidationErr","showNextBtn","showErrMsg","val","setVal","setFooterDisplay","isTouchScreen","inputRef","isReviewing","format","separator","required","theme","useBlockTheme","themeId","messages","useMessages","answersColor","default","getPlaceholder","checkFieldValidation","value","extend","date","isValid","useEffect","changeHandler","e","target","autoCorrectedDatePipe","toLowerCase","getMask","createElement","onChange","ref","className","css","setAlpha","toString","placeholder","mask","pipe","length","onFocus","onBlur","autoComplete","_default","exports"],"sources":["/Users/amurepinho/Documents/GitHub/diagnostico/node_modules/@quillforms/blocklib-date-block/build/renderer/@quillforms/blocklib-date-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport MaskedInput from 'react-text-mask';\r\nimport dayJs from 'dayjs';\r\nimport CustomParseFormat from 'dayjs/plugin/customParseFormat';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport createAutoCorrectedDatePipe from './create-autocorrected-date-pipe';\r\n\r\nconst DateOutput = (props) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tisPreview,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tshowErrMsg,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tsetFooterDisplay,\r\n\t\tisTouchScreen,\r\n\t\tinputRef,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst { format, separator, required } = attributes;\r\n\tconst theme = useBlockTheme(attributes.themeId);\r\n\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor(theme.answersColor);\r\n\r\n\tconst getPlaceholder = () => {\r\n\t\tif (format === 'MMDDYYYY') {\r\n\t\t\treturn 'MM' + separator + 'DD' + separator + 'YYYY';\r\n\t\t} else if (format === 'DDMMYYYY') {\r\n\t\t\treturn 'DD' + separator + 'MM' + separator + 'YYYY';\r\n\t\t} else if (format === 'YYYYMMDD') {\r\n\t\t\treturn 'YYYY' + separator + 'MM' + separator + 'DD';\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkFieldValidation = (value) => {\r\n\t\tdayJs.extend(CustomParseFormat);\r\n\t\tconst date = dayJs(value, getPlaceholder(), true);\r\n\t\tif (required === true && (!value || value === '')) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(messages['label.errorAlert.required']);\r\n\t\t} else if (!date.isValid() && value) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(messages['label.errorAlert.date']);\r\n\t\t} else {\r\n\t\t\tsetIsValid(true);\r\n\t\t\tsetValidationErr(null);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t// if change in required flag and is in preview mode, check validation\r\n\t\t// Note, that this effect will also be called on mount, that's why we check if isReviewing = false\r\n\t\t// because we want to display errors coming from server.\r\n\t\tif (isPreview || !isReviewing) checkFieldValidation(val);\r\n\t}, [attributes]);\r\n\r\n\tconst changeHandler = (e) => {\r\n\t\tconst value = e.target.value;\r\n\t\tsetVal(value);\r\n\t\tshowErrMsg(false);\r\n\t\tcheckFieldValidation(value);\r\n\r\n\t\tif (value !== '') {\r\n\t\t\tsetIsAnswered(true);\r\n\t\t\tshowNextBtn(true);\r\n\t\t} else {\r\n\t\t\tsetIsAnswered(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst autoCorrectedDatePipe = createAutoCorrectedDatePipe(\r\n\t\tgetPlaceholder()?.toLowerCase()\r\n\t);\r\n\r\n\tconst getMask = () => {\r\n\t\tif (format === 'YYYYMMDD') {\r\n\t\t\treturn [\r\n\t\t\t\t/\\d/,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\tseparator,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\tseparator,\r\n\t\t\t\t/\\d/,\r\n\t\t\t\t/\\d/,\r\n\t\t\t];\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t/\\d/,\r\n\t\t\t/\\d/,\r\n\t\t\tseparator,\r\n\t\t\t/\\d/,\r\n\t\t\t/\\d/,\r\n\t\t\tseparator,\r\n\t\t\t/\\d/,\r\n\t\t\t/\\d/,\r\n\t\t\t/\\d/,\r\n\t\t\t/\\d/,\r\n\t\t];\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MaskedInput\r\n\t\t\tonChange={changeHandler}\r\n\t\t\tref={inputRef}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\tborder-radius: 0 !important;\r\n\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(0.3).toString()}\r\n\t\t\t\t\t\t\t0px 1px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\tbox-shadow: ${answersColor.setAlpha(1).toString()}\r\n\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t`\r\n\t\t\t)}\r\n\t\t\tplaceholder={getPlaceholder()}\r\n\t\t\tmask={getMask()}\r\n\t\t\tpipe={autoCorrectedDatePipe}\r\n\t\t\tvalue={val && val.length > 0 ? val : ''}\r\n\t\t\tonFocus={() => {\r\n\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tonBlur={() => {\r\n\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\nexport default DateOutput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}