{"ast":null,"code":"/**\r\n * Quill Forms Dependencies\r\n */\nimport configApi from '@quillforms/config';\n/**\r\n * WordPress Dependencies\r\n */\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\r\n * External Dependencies\r\n */\nimport { isFunction } from 'lodash';\n\n/**\r\n * Internal Modules\r\n */\n\nlet paymentGatewayModules = {};\n\n/**\r\n * Register PaymentGateway Module\r\n *\r\n * @param {string}               slug     The module slug\r\n * @param {PaymentGatewayModule} module The module properties.\r\n *\r\n */\nexport const registerPaymentGatewayModule = (slug, module) => {\n  const isWPEnv = configApi.isWPEnv();\n  if (isWPEnv || !isWPEnv && !['free', 'basic_yearly', 'basic_monthly'].includes(window?.quillformsSaasManagerAdmin?.plan?.plan)) {\n    module = applyFilters('QuillForms.PaymentGateways.PaymentGatewayModule', module, slug);\n  }\n  if (paymentGatewayModules[slug]) {\n    console.error(`This payment gateway ${slug} is already registered!`);\n    return;\n  }\n  if (!module.name) {\n    console.error(`The 'name' property is mandatory!`);\n    return;\n  }\n  if (typeof module.name !== 'string') {\n    console.error(`The 'name' property must be a string!`);\n    return;\n  }\n  if (!module.icon) {\n    console.error(`The 'icon' property is mandatory!`);\n    return;\n  }\n  if (!module.description) {\n    console.error(`The 'description' property is mandatory!`);\n    return;\n  }\n  if (module.settings && !isFunction(module.settings)) {\n    console.error('The \"settings\" property must be a valid function!');\n    return;\n  }\n  if (!module.methods) {\n    console.error(`The 'methods' property is mandatory!`);\n    return;\n  }\n  for (const _method of Object.values(module.methods)) {\n    // TODO: method props check.\n  }\n  paymentGatewayModules[slug] = module;\n};\nexport const getPaymentGatewayModules = () => {\n  return paymentGatewayModules;\n};\nexport const getPaymentGatewayModule = slug => {\n  return paymentGatewayModules[slug];\n};","map":{"version":3,"names":["configApi","applyFilters","isFunction","paymentGatewayModules","registerPaymentGatewayModule","slug","module","isWPEnv","includes","window","quillformsSaasManagerAdmin","plan","console","error","name","icon","description","settings","methods","_method","Object","values","getPaymentGatewayModules","getPaymentGatewayModule"],"sources":["/Users/amurepinho/Documents/GitHub/diagnostico/node_modules/@quillforms/payment-gateways/build-module/api/@quillforms/payment-gateways/src/api/index.ts"],"sourcesContent":["/**\r\n * Quill Forms Dependencies\r\n */\r\nimport configApi from '@quillforms/config';\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { applyFilters } from '@wordpress/hooks';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { isFunction } from 'lodash';\r\n\r\n/**\r\n * Internal Modules\r\n */\r\nimport type { PaymentGatewayModules, PaymentGatewayModule } from '../types';\r\n\r\nlet paymentGatewayModules = {};\r\n\r\n/**\r\n * Register PaymentGateway Module\r\n *\r\n * @param {string}               slug     The module slug\r\n * @param {PaymentGatewayModule} module The module properties.\r\n *\r\n */\r\nexport const registerPaymentGatewayModule = (\r\n\tslug: string,\r\n\tmodule: PaymentGatewayModule\r\n) => {\r\n\r\n\tconst isWPEnv = configApi.isWPEnv();\r\n\r\n\tif (isWPEnv || (!isWPEnv && !['free', 'basic_yearly', 'basic_monthly'].includes(window?.quillformsSaasManagerAdmin?.plan?.plan))) {\r\n\t\tmodule = applyFilters(\r\n\t\t\t'QuillForms.PaymentGateways.PaymentGatewayModule',\r\n\t\t\tmodule,\r\n\t\t\tslug\r\n\t\t) as PaymentGatewayModule;\r\n\t}\r\n\r\n\tif (paymentGatewayModules[slug]) {\r\n\t\tconsole.error(\r\n\t\t\t`This payment gateway ${slug} is already registered!`\r\n\t\t);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!module.name) {\r\n\t\tconsole.error(`The 'name' property is mandatory!`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (typeof module.name !== 'string') {\r\n\t\tconsole.error(`The 'name' property must be a string!`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!module.icon) {\r\n\t\tconsole.error(`The 'icon' property is mandatory!`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!module.description) {\r\n\t\tconsole.error(`The 'description' property is mandatory!`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (module.settings && !isFunction(module.settings)) {\r\n\t\tconsole.error('The \"settings\" property must be a valid function!');\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!module.methods) {\r\n\t\tconsole.error(`The 'methods' property is mandatory!`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor (const _method of Object.values(module.methods)) {\r\n\t\t// TODO: method props check.\r\n\t}\r\n\r\n\tpaymentGatewayModules[slug] = module;\r\n};\r\n\r\nexport const getPaymentGatewayModules = (): PaymentGatewayModules => {\r\n\treturn paymentGatewayModules;\r\n};\r\n\r\nexport const getPaymentGatewayModule = (slug: string) => {\r\n\treturn paymentGatewayModules[slug];\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,SAAS,MAAM,oBAAoB;AAC1C;AACA;AACA;AACA,SAASC,YAAY,QAAQ,kBAAkB;;AAE/C;AACA;AACA;AACA,SAASC,UAAU,QAAQ,QAAQ;;AAEnC;AACA;AACA;;AAGA,IAAIC,qBAAqB,GAAG,CAAC,CAAC;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,4BAA4B,GAAGA,CAC3CC,IAAY,EACZC,MAA4B,KACxB;EAEJ,MAAMC,OAAO,GAAGP,SAAS,CAACO,OAAO,CAAC,CAAC;EAEnC,IAAIA,OAAO,IAAK,CAACA,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,cAAc,EAAE,eAAe,CAAC,CAACC,QAAQ,CAACC,MAAM,EAAEC,0BAA0B,EAAEC,IAAI,EAAEA,IAAI,CAAE,EAAE;IACjIL,MAAM,GAAGL,YAAY,CACpB,iDAAiD,EACjDK,MAAM,EACND,IACD,CAAyB;EAC1B;EAEA,IAAIF,qBAAqB,CAACE,IAAI,CAAC,EAAE;IAChCO,OAAO,CAACC,KAAK,CACX,wBAAuBR,IAAK,yBAC9B,CAAC;IACD;EACD;EAEA,IAAI,CAACC,MAAM,CAACQ,IAAI,EAAE;IACjBF,OAAO,CAACC,KAAK,CAAE,mCAAkC,CAAC;IAClD;EACD;EAEA,IAAI,OAAOP,MAAM,CAACQ,IAAI,KAAK,QAAQ,EAAE;IACpCF,OAAO,CAACC,KAAK,CAAE,uCAAsC,CAAC;IACtD;EACD;EAEA,IAAI,CAACP,MAAM,CAACS,IAAI,EAAE;IACjBH,OAAO,CAACC,KAAK,CAAE,mCAAkC,CAAC;IAClD;EACD;EAEA,IAAI,CAACP,MAAM,CAACU,WAAW,EAAE;IACxBJ,OAAO,CAACC,KAAK,CAAE,0CAAyC,CAAC;IACzD;EACD;EAEA,IAAIP,MAAM,CAACW,QAAQ,IAAI,CAACf,UAAU,CAACI,MAAM,CAACW,QAAQ,CAAC,EAAE;IACpDL,OAAO,CAACC,KAAK,CAAC,mDAAmD,CAAC;IAClE;EACD;EAEA,IAAI,CAACP,MAAM,CAACY,OAAO,EAAE;IACpBN,OAAO,CAACC,KAAK,CAAE,sCAAqC,CAAC;IACrD;EACD;EAEA,KAAK,MAAMM,OAAO,IAAIC,MAAM,CAACC,MAAM,CAACf,MAAM,CAACY,OAAO,CAAC,EAAE;IACpD;EAAA;EAGDf,qBAAqB,CAACE,IAAI,CAAC,GAAGC,MAAM;AACrC,CAAC;AAED,OAAO,MAAMgB,wBAAwB,GAAGA,CAAA,KAA6B;EACpE,OAAOnB,qBAAqB;AAC7B,CAAC;AAED,OAAO,MAAMoB,uBAAuB,GAAIlB,IAAY,IAAK;EACxD,OAAOF,qBAAqB,CAACE,IAAI,CAAC;AACnC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}