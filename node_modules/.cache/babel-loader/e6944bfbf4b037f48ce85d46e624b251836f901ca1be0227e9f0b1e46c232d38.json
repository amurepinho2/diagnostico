{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.race = exports.join = exports.fork = exports.promise = undefined;\nvar _is = require('../utils/is');\nvar _is2 = _interopRequireDefault(_is);\nvar _helpers = require('../utils/helpers');\nvar _dispatcher = require('../utils/dispatcher');\nvar _dispatcher2 = _interopRequireDefault(_dispatcher);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar promise = exports.promise = function promise(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.promise(value)) return false;\n  value.then(next, raiseNext);\n  return true;\n};\nvar forkedTasks = new Map();\nvar fork = exports.fork = function fork(value, next, rungen) {\n  if (!_is2.default.fork(value)) return false;\n  var task = Symbol('fork');\n  var dispatcher = (0, _dispatcher2.default)();\n  forkedTasks.set(task, dispatcher);\n  rungen(value.iterator.apply(null, value.args), function (result) {\n    return dispatcher.dispatch(result);\n  }, function (err) {\n    return dispatcher.dispatch((0, _helpers.error)(err));\n  });\n  var unsubscribe = dispatcher.subscribe(function () {\n    unsubscribe();\n    forkedTasks.delete(task);\n  });\n  next(task);\n  return true;\n};\nvar join = exports.join = function join(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.join(value)) return false;\n  var dispatcher = forkedTasks.get(value.task);\n  if (!dispatcher) {\n    raiseNext('join error : task not found');\n  } else {\n    (function () {\n      var unsubscribe = dispatcher.subscribe(function (result) {\n        unsubscribe();\n        next(result);\n      });\n    })();\n  }\n  return true;\n};\nvar race = exports.race = function race(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.race(value)) return false;\n  var finished = false;\n  var success = function success(result, k, v) {\n    if (finished) return;\n    finished = true;\n    result[k] = v;\n    next(result);\n  };\n  var fail = function fail(err) {\n    if (finished) return;\n    raiseNext(err);\n  };\n  if (_is2.default.array(value.competitors)) {\n    (function () {\n      var result = value.competitors.map(function () {\n        return false;\n      });\n      value.competitors.forEach(function (competitor, index) {\n        rungen(competitor, function (output) {\n          return success(result, index, output);\n        }, fail);\n      });\n    })();\n  } else {\n    (function () {\n      var result = Object.keys(value.competitors).reduce(function (p, c) {\n        p[c] = false;\n        return p;\n      }, {});\n      Object.keys(value.competitors).forEach(function (index) {\n        rungen(value.competitors[index], function (output) {\n          return success(result, index, output);\n        }, fail);\n      });\n    })();\n  }\n  return true;\n};\nvar subscribe = function subscribe(value, next) {\n  if (!_is2.default.subscribe(value)) return false;\n  if (!_is2.default.channel(value.channel)) {\n    throw new Error('the first argument of \"subscribe\" must be a valid channel');\n  }\n  var unsubscribe = value.channel.subscribe(function (ret) {\n    unsubscribe && unsubscribe();\n    next(ret);\n  });\n  return true;\n};\nexports.default = [promise, fork, join, race, subscribe];","map":{"version":3,"names":["Object","defineProperty","exports","value","race","join","fork","promise","undefined","_is","require","_is2","_interopRequireDefault","_helpers","_dispatcher","_dispatcher2","obj","__esModule","default","next","rungen","yieldNext","raiseNext","then","forkedTasks","Map","task","Symbol","dispatcher","set","iterator","apply","args","result","dispatch","err","error","unsubscribe","subscribe","delete","get","finished","success","k","v","fail","array","competitors","map","forEach","competitor","index","output","keys","reduce","p","c","channel","Error","ret"],"sources":["/Users/amurepinho/Documents/GitHub/diagnostico/node_modules/rungen/dist/controls/async.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.race = exports.join = exports.fork = exports.promise = undefined;\n\nvar _is = require('../utils/is');\n\nvar _is2 = _interopRequireDefault(_is);\n\nvar _helpers = require('../utils/helpers');\n\nvar _dispatcher = require('../utils/dispatcher');\n\nvar _dispatcher2 = _interopRequireDefault(_dispatcher);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar promise = exports.promise = function promise(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.promise(value)) return false;\n  value.then(next, raiseNext);\n  return true;\n};\n\nvar forkedTasks = new Map();\nvar fork = exports.fork = function fork(value, next, rungen) {\n  if (!_is2.default.fork(value)) return false;\n  var task = Symbol('fork');\n  var dispatcher = (0, _dispatcher2.default)();\n  forkedTasks.set(task, dispatcher);\n  rungen(value.iterator.apply(null, value.args), function (result) {\n    return dispatcher.dispatch(result);\n  }, function (err) {\n    return dispatcher.dispatch((0, _helpers.error)(err));\n  });\n  var unsubscribe = dispatcher.subscribe(function () {\n    unsubscribe();\n    forkedTasks.delete(task);\n  });\n  next(task);\n  return true;\n};\n\nvar join = exports.join = function join(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.join(value)) return false;\n  var dispatcher = forkedTasks.get(value.task);\n  if (!dispatcher) {\n    raiseNext('join error : task not found');\n  } else {\n    (function () {\n      var unsubscribe = dispatcher.subscribe(function (result) {\n        unsubscribe();\n        next(result);\n      });\n    })();\n  }\n  return true;\n};\n\nvar race = exports.race = function race(value, next, rungen, yieldNext, raiseNext) {\n  if (!_is2.default.race(value)) return false;\n  var finished = false;\n  var success = function success(result, k, v) {\n    if (finished) return;\n    finished = true;\n    result[k] = v;\n    next(result);\n  };\n\n  var fail = function fail(err) {\n    if (finished) return;\n    raiseNext(err);\n  };\n  if (_is2.default.array(value.competitors)) {\n    (function () {\n      var result = value.competitors.map(function () {\n        return false;\n      });\n      value.competitors.forEach(function (competitor, index) {\n        rungen(competitor, function (output) {\n          return success(result, index, output);\n        }, fail);\n      });\n    })();\n  } else {\n    (function () {\n      var result = Object.keys(value.competitors).reduce(function (p, c) {\n        p[c] = false;\n        return p;\n      }, {});\n      Object.keys(value.competitors).forEach(function (index) {\n        rungen(value.competitors[index], function (output) {\n          return success(result, index, output);\n        }, fail);\n      });\n    })();\n  }\n  return true;\n};\n\nvar subscribe = function subscribe(value, next) {\n  if (!_is2.default.subscribe(value)) return false;\n  if (!_is2.default.channel(value.channel)) {\n    throw new Error('the first argument of \"subscribe\" must be a valid channel');\n  }\n  var unsubscribe = value.channel.subscribe(function (ret) {\n    unsubscribe && unsubscribe();\n    next(ret);\n  });\n\n  return true;\n};\n\nexports.default = [promise, fork, join, race, subscribe];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}